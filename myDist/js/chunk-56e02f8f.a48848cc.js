(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-56e02f8f"],{"09f8":function(t,e,n){"use strict";var o={props:{title:{type:String,default:"关闭"},disabled:{type:Boolean,default:!1}}},a=(n("3f2b"),n("2877")),i=Object(a.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"normal-full-btn",class:t.disabled?"is-disabled":"",attrs:{disabled:t.disabled}},[t._v(t._s(t.title))])}),[],!1,null,null,null);e.a=i.exports},"12c7":function(t,e,n){},"19f1":function(t,e,n){"use strict";n.r(e);var o=(n("ac1f"),n("5319"),n("96cf"),n("1da1")),a=n("5530"),i=n("09f8"),r=n("edeb"),s=(n("4de4"),n("d81d"),n("64dc")),u=n("d06f"),c=n("797d"),l=n("b1b8"),p=n("2f62"),d={components:{SingleBottomLineInputComp:u.a,DisconnectTypeDatePickerComp:c.a,StaffSelector:l.a,TreeComp:s.a},computed:Object(a.a)({},Object(p.c)("common",["allProductClassify"]),{},Object(p.e)("couponStore",["condition2CouponSave","addPageCurStaff"]),{watchValue4Tree:function(){return this.watchValue},defaultCheckedKeys:function(){return this.condition2CouponSave.ProductList.map((function(t){return t.ProductID}))},couponAmount:{get:function(){return this.condition2CouponSave.Data.Amount},set:function(t){this.setCondition2CouponSave([["Data","Amount"],t])}},minPayAmount:{get:function(){return this.condition2CouponSave.Data.MinPayAmount},set:function(t){this.setCondition2CouponSave([["Data","MinPayAmount"],t])}},totalNumber:{get:function(){return this.condition2CouponSave.Data.TotalNumber},set:function(t){this.setCondition2CouponSave([["Data","TotalNumber"],t])}}}),methods:Object(a.a)({},Object(p.d)("couponStore",["setCondition2CouponSave"]),{},Object(p.b)("common",["getProductList","getAllProductNames"]),{handleChangeFunc:function(t){var e=t.filter((function(t){return t.ProductID})).map((function(t){return{FirstLevelID:t.ProductClass.First,SecondLevelID:t.ProductClass.Second,ProductID:t.ProductID,ProductName:t.ProductName}}));this.setCondition2CouponSave([["ProductList",""],e])}}),mounted:function(){this.getProductList(),this.getAllProductNames()}},f=(n("8c1e"),n("2877")),m=Object(f.a)(d,(function(){var t=this,e=this,n=e.$createElement,o=e._self._c||n;return o("section",{staticClass:"mp-coupon-add-page-left-comp-wrap"},[o("header",[o("single-bottom-line-input-comp",{model:{value:e.couponAmount,callback:function(t){e.couponAmount=t},expression:"couponAmount"}}),e._v(" "),o("single-bottom-line-input-comp",{attrs:{title:"满多少可用"},model:{value:e.minPayAmount,callback:function(t){e.minPayAmount=t},expression:"minPayAmount"}}),o("single-bottom-line-input-comp",{attrs:{title:"发放数量",remark:"张"},model:{value:e.totalNumber,callback:function(t){e.totalNumber=t},expression:"totalNumber"}})],1),o("div",{staticClass:"content"},[o("disconnect-type-date-picker-comp",{attrs:{isLineStyle:"",title:"开始领取时间",DateValue:e.condition2CouponSave.ProvideStartTime,handleFunc:function(e){return t.setCondition2CouponSave([["ProvideStartTime",""],e])},showCheck:"",StartNow:e.condition2CouponSave.ProvideNow,setStartNowFunc:function(e){return t.setCondition2CouponSave([["ProvideNow",""],e])}}}),o("disconnect-type-date-picker-comp",{attrs:{isLineStyle:"",title:"结束领取时间",DateValue:e.condition2CouponSave.ProvideEndTime,handleFunc:function(e){return t.setCondition2CouponSave([["ProvideEndTime",""],e])}}}),o("disconnect-type-date-picker-comp",{attrs:{isLineStyle:"",title:"有效期开始",DateValue:e.condition2CouponSave.ValidStartTime,handleFunc:function(e){return t.setCondition2CouponSave([["ValidStartTime",""],e])},showCheck:"",StartNow:e.condition2CouponSave.StartNow,setStartNowFunc:function(e){return t.setCondition2CouponSave([["StartNow",""],e])}}}),o("disconnect-type-date-picker-comp",{attrs:{isLineStyle:"",title:"有效期结束",DateValue:e.condition2CouponSave.ValidEndTime,handleFunc:function(e){return t.setCondition2CouponSave([["ValidEndTime",""],e])}}}),o("staff-selector",{attrs:{isLineStyle:"",changePropsFunc:e.setCondition2CouponSave,typeList:[["ApplyUser","StaffID"]],watchValue:e.addPageCurStaff,value:e.condition2CouponSave.ApplyUser.StaffID,title:"申请人"}})],1),o("footer",[o("tree-comp",{attrs:{title:"选择产品",isProduct:"",treeList:e.allProductClassify,defaultCheckedKeys:e.defaultCheckedKeys,handleChangeFunc:e.handleChangeFunc,checkAllTitle:"所有产品"}})],1)])}),[],!1,null,null,null).exports,h={components:{CheckboxGroupComp:n("2e4d").a,TreeComp:s.a},computed:Object(a.a)({},Object(p.e)("couponStore",["condition2CouponSave"]),{},Object(p.e)("common",["orderCreateTypeList","userTypeList","userRankList"]),{},Object(p.c)("common",["allAreaTreeList"]),{orderTypeList:function(){return this.orderCreateTypeList?this.orderCreateTypeList.filter((function(t){return!!t.ID})):[]},filterUserTypeList:function(){return this.userTypeList?this.userTypeList.filter((function(t){return t.CategoryID})):[]},filterUserRankList:function(){return this.userRankList?this.userRankList.filter((function(t){return!!t.CategoryID})):[]},selectOrderTypeList:function(){return this.condition2CouponSave.OrderTypeList},selectUserTypeList:function(){return this.condition2CouponSave.CustomerTypeList.map((function(t){return{CategoryID:t.ID}}))},selectUserRankList:function(){return this.condition2CouponSave.CustomerGradeList.map((function(t){return{CategoryID:t.ID}}))},defaultCheckedKeys:function(){return this.condition2CouponSave.SellAreaArray.map((function(t){return t.CountyID}))}}),methods:Object(a.a)({},Object(p.d)("couponStore",["setCondition2CouponSave"]),{},Object(p.b)("common",["getUserClassify","getAreaList"]),{onOrderTypeListChange:function(t){this.setCondition2CouponSave([["OrderTypeList",""],t])},onUserTypeListChange:function(t){var e=t.map((function(t){return{ID:t.CategoryID}}));this.setCondition2CouponSave([["CustomerTypeList",""],e])},onUserRankListChange:function(t){var e=t.map((function(t){return{ID:t.CategoryID}}));this.setCondition2CouponSave([["CustomerGradeList",""],e])},handleChangeFunc:function(t){var e=t.filter((function(t){return 3===t.Level})).map((function(t){return{CountyID:t.ID}}));this.setCondition2CouponSave([["SellAreaArray",""],e])}}),mounted:function(){this.getUserClassify(),this.getAreaList()}},C=(n("4434"),Object(f.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mp-coupon-add-page-right-comp-wrap"},[n("checkbox-group-comp",{attrs:{itemList:t.orderTypeList,selectList:t.selectOrderTypeList,defaultProps:{label:"name",value:"ID"}},on:{change:t.onOrderTypeListChange}}),n("checkbox-group-comp",{attrs:{title:"客户类型",itemList:t.filterUserTypeList,selectList:t.selectUserTypeList},on:{change:t.onUserTypeListChange}}),n("checkbox-group-comp",{attrs:{title:"客户等级",itemList:t.filterUserRankList,selectList:t.selectUserRankList},on:{change:t.onUserRankListChange}}),n("tree-comp",{attrs:{title:"销售区域",treeList:t.allAreaTreeList,defaultCheckedKeys:t.defaultCheckedKeys,handleChangeFunc:t.handleChangeFunc,checkAllTitle:"所有地区"}})],1)}),[],!1,null,null,null)).exports,v={components:{normalBtn:r.a,normalBtnFull:i.a,CouponAddPageLeftComp:m,CouponAddPageRightComp:C},data:function(){return{pageTitle:"添加优惠券"}},computed:Object(a.a)({},Object(p.e)("common",["Permission"])),methods:Object(a.a)({},Object(p.b)("couponStore",["submitOrEditCoupon"]),{onSubmitClick:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.submitOrEditCoupon();case 2:e.sent&&(n=t.$route.params.type,o="add"===n?"添加成功":"edit"===n?"修改成功":"",t.messageBox.successSingle(o,(function(){t.onReturnClick(),t.$store.dispatch("couponStore/getCouponList")})));case 4:case"end":return e.stop()}}),e)})))()},onReturnClick:function(){this.$store.commit("couponStore/clearCondition2CouponSave"),this.$router.replace("/couponList")}}),mounted:function(){var t=this.$route.params.type,e=this.$store.state.couponStore.condition2CouponSave.CouponID;"edit"!==t||e?("add"===t&&(this.pageTitle="添加优惠券"),"edit"===t&&(this.pageTitle="编辑优惠券")):this.onReturnClick()}},y=(n("8d12"),Object(f.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mp-coupon-add-page-wrap"},[n("header",[n("span",{staticClass:"mp-common-title-wrap"},[t._v(t._s(t.pageTitle))])]),n("div",{staticClass:"content"},[n("div",{staticClass:"left"},[n("coupon-add-page-left-comp",{staticClass:"mp-scroll-wrap"})],1),n("div",{staticClass:"right"},[n("coupon-add-page-right-comp",{staticClass:"mp-scroll-wrap"})],1)]),n("footer",[t.Permission.PermissionList.PermissionCoupon.Obj.Setup?n("normal-btn-full",{attrs:{title:"保存"},nativeOn:{click:function(e){return t.onSubmitClick(e)}}}):t._e(),n("normal-btn",{attrs:{title:"返回"},nativeOn:{click:function(e){return t.onReturnClick(e)}}})],1)])}),[],!1,null,null,null));e.default=y.exports},"1d08":function(t,e,n){"use strict";var o=n("56c7");n.n(o).a},"3f2b":function(t,e,n){"use strict";var o=n("436f");n.n(o).a},"436f":function(t,e,n){},4434:function(t,e,n){"use strict";var o=n("49d1");n.n(o).a},"49d1":function(t,e,n){},"56c7":function(t,e,n){},8994:function(t,e,n){},"8c1e":function(t,e,n){"use strict";var o=n("12c7");n.n(o).a},"8d12":function(t,e,n){"use strict";var o=n("de99");n.n(o).a},9899:function(t,e,n){"use strict";var o=n("8994");n.n(o).a},b1b8:function(t,e,n){"use strict";var o=(n("498a"),n("96cf"),n("1da1")),a=n("5530"),i=n("2f62"),r=(n("99af"),n("ade3")),s=n("2909"),u={props:{value:{default:"不限"},defaultProps:{type:Object,default:function(){return{label:"label",value:"value"}}},mini:{type:Boolean,default:!1},requestListFunc:{type:Function,default:function(){},required:!0},placeholder:{type:String,default:"请输入姓名"},watchValue:{},isDisabled:{type:Boolean,default:!1},needlimit:{type:Boolean,default:!1},remote:{type:Boolean,default:!0},staffList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,options:[],key:2021}},computed:{watchValue1:function(){return this.watchValue},optionList:function(){return this.remote?this.options:this.staffList}},watch:{watchValue1:{handler:function(t){t&&(this.options=[t],this.key+=1)}}},methods:{onChange:function(t){this.$emit("handleChange",t)},onClearClick:function(){this.$emit("handleChange","")},remoteMethod:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:""!==t?(e.loading=!0,e.requestListFunc(t).then((function(t){var n;e.loading=!1,1e3===t.data.Status&&(e.needlimit?e.options=[(n={},Object(r.a)(n,e.defaultProps.label,"不限"),Object(r.a)(n,e.defaultProps.value,""),n)].concat(Object(s.a)(t.data.Data)):e.options=t.data.Data)})).catch((function(){e.loading=!1}))):e.options=[];case 1:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.watchValue1&&(this.options=[this.watchValue1])}},c=(n("9899"),n("2877")),l=Object(c.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mp-common-remote-select-comp-wrapper"},[n("el-select",{key:t.key,staticClass:"mp-common-remote-select-comp-wrap",class:t.mini?"font-12":"",attrs:{value:t.value,filterable:"",clearable:"",remote:t.remote,disabled:t.isDisabled,placeholder:t.placeholder,"remote-method":t.remoteMethod,loading:t.loading},on:{change:t.onChange}},t._l(t.optionList,(function(e){return n("el-option",{key:e.value,attrs:{label:e[t.defaultProps.label],value:e[t.defaultProps.value]}})})),1),n("i",{directives:[{name:"show",rawName:"v-show",value:""!==t.value&&!t.isDisabled,expression:"value !== '' && !isDisabled"}],staticClass:"el-icon-error",on:{click:t.onClearClick}})],1)}),[],!1,null,null,null).exports,p={props:{title:{type:String,default:"申请人"},changePropsFunc:{type:Function,default:function(){}},typeList:{type:Array,default:function(){return[]}},value:{default:""},requestFunc:{type:Function,default:function(){}},watchValue:{},isDisabled:{type:Boolean,default:!1},needlimit:{type:Boolean,default:!1},isLineStyle:{default:!1,type:Boolean},showArrow:{default:!1,type:Boolean},remote:{type:Boolean,default:!0}},components:{RemoteSelectComp:l},data:function(){return{defaultProps:{label:"StaffName",value:"StaffID"}}},computed:Object(a.a)({},Object(i.e)("common",["staffList"])),methods:{handleChange:function(t){this.changePropsFunc([this.typeList[0],t]),this.requestFunc&&this.requestFunc()},requestListFunc:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.api.getStaffList({FieldType:1,Page:1,PageSize:20,KeyWords:t.trim()});case 2:return o=n.sent,n.abrupt("return",o);case 4:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.remote||this.$store.dispatch("common/getStaffList")}},d=(n("e9dd"),Object(c.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mp-common-comps-staff-selector-wrap",class:t.isLineStyle?"isLineStyle":""},[n("header",[t._v(t._s(t.title)+"：")]),n("main",[n("remote-select-comp",{class:t.showArrow?"mp-common-select-comp-wrap":"",attrs:{mini:"",value:t.value,isDisabled:t.isDisabled,defaultProps:t.defaultProps,requestListFunc:t.requestListFunc,watchValue:t.watchValue,remote:t.remote,needlimit:t.needlimit,staffList:t.staffList},on:{handleChange:t.handleChange}})],1)])}),[],!1,null,null,null));e.a=d.exports},d06f:function(t,e,n){"use strict";var o={props:{title:{type:String,default:"金额"},remark:{type:String,default:"元"},value:{},isNum:{type:Boolean,default:!1}},model:{prop:"value",event:"change"},computed:{inpVal:{get:function(){return this.value},set:function(t){var e=t;this.isNum&&(e=this.$utils.filterNumber(e)),this.$emit("change",e)}}}},a=(n("1d08"),n("2877")),i=Object(a.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mp-common-comp-single-bottom-line-input-wrap"},[n("span",{staticClass:"title"},[t._v(t._s(t.title)+"：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.inpVal,expression:"inpVal"}],attrs:{type:"text"},domProps:{value:t.inpVal},on:{input:function(e){e.target.composing||(t.inpVal=e.target.value)}}}),n("span",{staticClass:"remark is-gray"},[t._v(t._s(t.remark))])])}),[],!1,null,null,null);e.a=i.exports},de99:function(t,e,n){},e852:function(t,e,n){},e9dd:function(t,e,n){"use strict";var o=n("e852");n.n(o).a}}]);