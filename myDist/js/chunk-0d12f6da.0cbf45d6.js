(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0d12f6da"],{"0bc7":function(t,e,i){"use strict";i.r(e);var r=(i("96cf"),i("1da1")),a=i("5530"),n=i("2f62"),s=i("3eca"),o=i("9477"),l=(i("4de4"),i("caad"),i("fb6a"),i("a434"),i("d3b7"),i("25f0"),i("2532"),i("a9e4")),c={props:{drawerVisible:{type:Boolean,default:!1},leftPropertyList:{type:Array,default:function(){return[]}},rightPropertyList:{type:Array,default:function(){return[]}},initData:{type:Object,default:null}},components:{FormulaPanelElementSelectDialog:l.a},computed:{drawer:{get:function(){return this.drawerVisible},set:function(t){this.$emit("update:drawerVisible",t)}},lSelectedIDs:function(){return(this.leftIndex||0===this.leftIndex)&&this.localList[this.leftIndex]&&this.localList[this.leftIndex].Property?[this.localList[this.leftIndex].Property.StoredContent]:[]},rSelectedIDs:function(){return(this.rightIndex||0===this.rightIndex)&&this.localList[this.rightIndex]&&this.localList[this.rightIndex].Property?[this.localList[this.rightIndex].Property.StoredContent]:[]}},data:function(){return{localList:[],listItem:{ID:"",ControlID:"",Property:null,Operator:"",CompareProperty:null,FailTips:"",key:"",DefaultValue:""},leftVisible:!1,rightVisible:!1,leftIndex:"",rightIndex:""}},methods:{onItemAddClick:function(){var t=Math.random().toString(16).slice(-8);this.localList.push(Object(a.a)({},this.listItem,{key:t}))},onItemRemoveClick:function(t){this.localList.splice(t,1)},onLeftClick:function(t){this.leftIndex=t,this.leftVisible=!0},onRightClick:function(t){this.rightIndex=t,this.rightVisible=!0},onLeftSelected:function(t){if(t&&(this.leftIndex||0===this.leftIndex)){this.localList[this.leftIndex].Property=t,this.localList[this.leftIndex].CompareProperty=null;var e=t.OperatorList&&t.OperatorList.length>0?t.OperatorList[0]:"";(e||0===e)&&(this.localList[this.leftIndex].Operator=e)}},onRightSelected:function(t){(this.rightIndex||0===this.rightIndex)&&(this.localList[this.rightIndex].CompareProperty=t)},getOperatorOptions:function(t){if(!t)return[];var e=t.Property;if(!e)return[];var i=e.OperatorList;return Array.isArray(i)&&0!==i.length?s.a.filter((function(t){return i.includes(t.ID)})):[]},getSubmitInfo:function(){return this.getCheckResult()?{List:this.localList}:null},getCheckResult:function(){if(0===this.localList.length)return this.messageBox.failSingleError("保存失败","对比结果为空，请添加右侧对比条目"),!1;for(var t=0;t<this.localList.length;t+=1){var e=this.localList[t];if(!e.FailTips||!e.Property||!e.CompareProperty)return this.messageBox.failSingleError("保存失败","第".concat(t+1,"行信息不完整，请检查数值、对比数值及错误提示")),!1;if(255===e.CompareProperty.FixedType){if(!e.DefaultValue&&0!==e.DefaultValue)return this.messageBox.failSingleError("保存失败","第".concat(t+1,"行未填写对比数值，请输入数字值")),!1;if(!this.$utils.getValueIsOrNotNumber(e.DefaultValue))return this.messageBox.failSingleError("保存失败","第".concat(t+1,"行对比数值输入类型不正确，请输入数字值")),!1}}return!0}},mounted:function(){this.initData&&Array.isArray(this.initData.List)&&(this.localList=JSON.parse(JSON.stringify(this.initData.List)))}},u=(i("92a5"),i("2877")),p=Object(u.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"mp-erp-price-module-makeup-ctrl-size-number-panel-container"},[r("ul",t._l(t.localList,(function(e,a){return r("li",{key:e.key||e.ID},[r("div",[r("span",{staticClass:"blue-span",on:{click:function(e){return t.onLeftClick(a)}}},[t._v("选择数值")]),r("span",{staticClass:"selected-title",attrs:{title:e.Property?e.Property.TipsContent||e.Property.DisplayContent.replace(/\[|\]/g,""):""}},[t._v(" "+t._s(e.Property?e.Property.DisplayContent.replace(/\[|\]/g,""):"")+" ")]),r("el-select",{attrs:{disabled:!e.Property,"no-data-text":"请先左侧选择数值",size:"small","popper-class":"compare-operator"},model:{value:e.Operator,callback:function(i){t.$set(e,"Operator",i)},expression:"it.Operator"}},t._l(t.getOperatorOptions(e),(function(t){return r("el-option",{key:t.ID,attrs:{label:t.Name,value:t.ID}})})),1),r("span",{staticClass:"blue-span is-font-size-12",class:{disabled:!e.Property},on:{click:function(e){return t.onRightClick(a)}}},[t._v("选择对比数值")]),e.CompareProperty&&255===e.CompareProperty.FixedType?r("el-input",{staticClass:"selected-input",attrs:{size:"small",maxlength:"9"},model:{value:e.DefaultValue,callback:function(i){t.$set(e,"DefaultValue",t._n("string"==typeof i?i.trim():i))},expression:"it.DefaultValue"}}):r("span",{staticClass:"selected-title",attrs:{title:e.CompareProperty?e.CompareProperty.DisplayContent.replace(/\[|\]/g,""):""}},[t._v(" "+t._s(e.CompareProperty?e.CompareProperty.DisplayContent.replace(/\[|\]/g,""):"")+" ")])],1),r("div",[r("span",{staticClass:"label"},[t._v("错误提示：")]),r("el-input",{attrs:{size:"small",maxlength:"30","show-word-limit":""},model:{value:e.FailTips,callback:function(i){t.$set(e,"FailTips","string"==typeof i?i.trim():i)},expression:"it.FailTips"}}),r("span",{staticClass:"del",on:{click:function(e){return t.onItemRemoveClick(a)}}},[r("img",{attrs:{src:i("6e30"),alt:""}}),r("i",[t._v("删除")])])],1)])})),0),r("FormulaPanelElementSelectDialog",{key:"l",attrs:{visible:t.leftVisible,list:t.leftPropertyList,selectedElementIDs:t.lSelectedIDs},on:{"update:visible":function(e){t.leftVisible=e},submit:t.onLeftSelected}}),r("FormulaPanelElementSelectDialog",{attrs:{visible:t.rightVisible,list:t.rightPropertyList,selectedElementIDs:t.rSelectedIDs},on:{"update:visible":function(e){t.rightVisible=e},submit:t.onRightSelected}}),r("el-drawer",{attrs:{visible:t.drawer,size:"470px","show-close":!1},on:{"update:visible":function(e){t.drawer=e}}},[r("template",{slot:"title"},[r("span",{staticClass:"drawer-title",on:{click:function(e){t.drawer=!1}}},[r("i",{staticClass:"el-icon-arrow-right"}),t._v(" 说明")])]),r("div",{staticClass:"drawer-content"},[r("p",[t._v("注意：拼版时会使用此处设置的长度、宽度、数量进行拼版，并印刷指定份数。此处尺寸指的是展开尺寸，物料数量指的是每份不同印刷内容的物料数量。")]),r("p",{staticClass:"is-pink"},[t._v("特别注意：物料数量是以此展开尺寸为基础的此尺寸物料数量，且印刷内容不同。")]),r("div",[r("p",[t._v("例如：")]),r("ul",[r("li",[t._v(" 锁线胶装画册 1000本，封面 4P，则宽度为成品宽度 *2+书脊厚度+勒口宽度*2，长度为成品长，物料数量则为 1，共需印刷 1000份。 ")]),r("li",[t._v(" 锁线胶装画册 1000本，内文64P，双面印，内容不同，则长度为成品长*2，宽度为成品宽，物料数量则为 16，共需印刷 1000份。 ")]),r("li",[t._v(" 锁线胶装画册 1000本，内文64P，双面印，内容相同1P循环，则长度为成品长*2，宽度为成品宽，物料数量则为 1，共需印刷 16000份。 ")]),r("li",[t._v(" 锁线胶装画册 1000本，内文64P，双面印，内容相同8P循环，则长度为成品长*2，宽度为成品宽，物料数量则为 2，共需印刷 8000份。 ")])]),r("p",[r("img",{attrs:{src:i("298b"),alt:""}}),r("span",{staticClass:"is-gray"},[t._v("其他应用请自己思考")])])])])],2)],1)}),[],!1,null,null,null).exports,f={name:"MakeupCtrlConditionSet",data:function(){return{drawer:!1,visible:!1}},components:{ContionCommonComp:o.a,SizeNumberPanel:p},computed:Object(a.a)({},Object(n.e)("productManage",["ProductManageList","ProductModuleKeyIDList","curInteractionData","ControlTypeList","subTargetData","InteractionLeftPropertyList","InteractionRightPropertyList","CompareLeftPropertyList","CompareRightPropertyList"]),{rightTitle:function(){return"risk"===this.routeInfo.setType?"则进行风险提示：":"compare"===this.routeInfo.setType?"则必须满足":"则"},ComparePropertyList:function(){return"risk"===this.routeInfo.setType||"compare"===this.routeInfo.setType||"subCompare"===this.routeInfo.setType?this.InteractionLeftPropertyList:null},routeInfo:function(){var t=this.$route.params,e=t.ProductID,i=t.PartID,r=t.ProductName,a=t.PartName;return{ProductID:e,PartID:"null"===i?"":i,ProductName:r,PartName:"null"===a?"":a,SolutionName:t.SolutionName,setType:t.setType}}}),methods:{onGoBackClick:function(){this.$goback()},onSubmitClick:function(){var t,e=this.$refs.oLeftComp.getConditonResult();if(e&&("risk"===this.routeInfo.setType&&(t=this.$refs.oRisk.getSubmitInfo()),"interaction"!==this.routeInfo.setType&&"subInteraction"!==this.routeInfo.setType||(t=this.$refs.oInteraction.getSubmitInfo()),"compare"!==this.routeInfo.setType&&"subCompare"!==this.routeInfo.setType||(t=this.$refs.oComparePanel.getSubmitInfo()),t)){var i=this.$utils.getIDFromListByNames(this.routeInfo.setType,this.ControlTypeList);if(i||0===i){var r=s.c.getPropIDsObj(this.subTargetData),n=Object(a.a)({},e,{},t,{ProductID:this.ProductID,ControlType:i},r);this.handleSubmit(n)}}},handleSubmit:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function i(){var r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.api.getProductControlSave(t).catch((function(){}));case 2:(r=i.sent)&&1e3===r.data.Status&&(a=function(){e.onGoBackClick(),e.$store.commit("productManage/setProductInteractionDataListChange",t)},e.messageBox.successSingle("保存成功",a,a));case 4:case"end":return i.stop()}}),i)})))()},onCompareAddClick:function(){this.$refs.oComparePanel.onItemAddClick()}},mounted:function(){}},d=(i("a313"),Object(u.a)(f,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mp-erp-price-manage-makeup-ctrl-condition-set-page-wrap"},[i("header",[i("span",[t._v("当前产品："+t._s(t.routeInfo.ProductName))]),i("span",[t._v("设置方案："+t._s(t.routeInfo.SolutionName))]),i("span",[t._v("设置部件："+t._s(t.routeInfo.PartName)+"部件1")])]),i("main",[i("ContionCommonComp",{ref:"oLeftComp",attrs:{ComparePropertyList:t.ComparePropertyList,PropertyList:t.InteractionLeftPropertyList,leftWidth:"40%",curEditData:t.curInteractionData,rightTitle:t.rightTitle}},[i("template",{slot:"title"},["0"===t.routeInfo.setType?[i("span",{staticClass:"intro",on:{click:function(e){t.drawer=!0}}},[i("i",[t._v("?")]),t._v(" 说明")])]:t._e()],2),"0"===t.routeInfo.setType?i("SizeNumberPanel",{ref:"oSizeNumberPanel",attrs:{initData:null,drawerVisible:t.drawer,leftPropertyList:[],rightPropertyList:[]},on:{"update:drawerVisible":function(e){t.drawer=e},"update:drawer-visible":function(e){t.drawer=e}}}):t._e()],2)],1),i("footer",[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitClick}},[t._v("保存")]),i("el-button",{on:{click:t.onGoBackClick}},[i("i",{staticClass:"el-icon-d-arrow-left"}),t._v(" 返回")])],1)])}),[],!1,null,null,null));e.default=d.exports},"1dfd":function(t,e,i){},"298b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAATCAYAAACdkl3yAAADZ0lEQVQ4T42UX2gcVRTGv+/OzL2b3UlsGiTiS+IfBFuV1FoQ/yAqpUir1KqR0kxKLL7YBxUfWkUwgogPVbGgUmubZGfTYqgV00IxohS0WKptaQpK0STgQ5CqTdKd3e5Mdu+R3XaXGgl23ubMOb9zv2++GWKRKxr2uqTCtSCWK9AXyBzAcRcYTQXxuYVjXFiIhvRdQu4kcBOIA7By2pJzSuxSOmqVCJ6C4CfX4YupTaXJ+vy/QFGoNwI1yOsnJuI9D/ejvHCR7ITJt+qXlPAVKPT4PfFYtacBKuScxyDuHinLGr8vObuY5Hq9uM99wFacg8radenN8ydqIBnAkoJrflG28kx6c/n7/4PUn+dz+mkK387MxHfWQPlQv0Ggww+S56r3UdasIeUtAff7QfxefVD6oYq3mI8ssEwSPN+yJT4XheYIaQ/WQIXQ/ArYZzPB/CkBWAjN74BsF+H7HnFfKoh/q/YVh/UGsdgOwaiQ9/pBvK4QmrUCbGO0G+0w+me/N2mrnW4vrqdnjvlBfFs+NLsdylfpnuTA5YW6n8ILTal4qBCbcT+IO6Z3IX1dWv/F2UFvpevwEz9IVjYkjMBhNypVKeyHvVoa+iEERK701KwIzTQLQ94KUdzrB8mKazX5P9kLzR+c+xRLldFT/kTSevX2a4VKDi1F0dM1s6NQjzuwW5uC8neNV5tNPeJPlo4uhEc591G/p/xNI0+h7rbglsugrHmZlAczQbKh3hCF+iTBNzNBPNqoDXhdcNRYpjdur/p0JTo/QPBBDXT+Q/jpZnMWxBcilcPNveVvL2XdhypUnwM4QsGkJW8k5Ekhtjb3JJ9dzJrHSTxByKrMRHJ3XdoggGUkxqxwI4GP/SDeEY3gBil56xXZTvICbXy4qRdTUWjeBbBaREapuB5WDnFmINXpuXI8U4472YfSzAA6PVefLqvk5iWbMLPQ9EvD6KiIPjM/n3S29mH24hDaqPQU84N6uXL4ZSaIb60O/Z1DixHzJyBFER5VlFNWOAdImyLvsZD7Kaj8OJm0V/8OsgteIa3Ps/ZJZPVxAc8IcEgRL0Bk2rrJNreiV1eAO0j6IjIHi/H5UvK1Tpv9gMxay32OI71WaGoeVbPkaO81UN1OyLG0SXawG8liWZIR+FGsXyXYJZCTfjF55x8ALYRGDvPYzAAAAABJRU5ErkJggg=="},"92a5":function(t,e,i){"use strict";var r=i("e0af");i.n(r).a},a313:function(t,e,i){"use strict";var r=i("1dfd");i.n(r).a},e0af:function(t,e,i){}}]);