(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0b0f9881"],{"072a":function(e,t,n){"use strict";var i=n("956e");n.n(i).a},2243:function(e,t,n){},"283a":function(e,t,n){},"31e0":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return p})),n("99af"),n("7db0"),n("caad"),n("d3b7"),n("ac1f"),n("25f0"),n("2532"),n("466d");var i=n("d4ec"),r=n("bee2"),a=n("ade3"),s=n("192e"),l=n("247a"),o=n("7775"),u=n("3eca"),c=[{type:"ProductProperty",label:"产品"},{type:"MaterialProperty",label:"物料"}],p=function(){function e(t){if(Object(i.a)(this,e),Object(a.a)(this,"ID",""),Object(a.a)(this,"Name",""),Object(a.a)(this,"Content",""),Object(a.a)(this,"UseModule",""),Object(a.a)(this,"UseTimes",""),Object(a.a)(this,"Unit",""),Object(a.a)(this,"Remark",""),Object(a.a)(this,"PropertyList",[]),t&&"[object Object]"===Object.prototype.toString.call(t)){var n=JSON.parse(JSON.stringify(t)),r=n.ID,s=n.Name,l=n.Content,o=n.PositionID,u=n.UseModule,c=n.UseTimes,p=n.Unit,d=n.PropertyList,m=n.Remark,f=n.MaterialTypeID,y=n.PartID,h=n.ProductID,L=n.PriceID,b=n.GroupID,D=n.ElementID,v=n.CraftID;r&&(this.ID=r),s&&(this.Name=s),l&&(this.Content=l),o&&(this.PositionID=o),f&&(this.MaterialTypeID=f),y&&(this.PartID=y),h&&(this.ProductID=h),L&&(this.PriceID=L),b&&(this.GroupID=b),D&&(this.ElementID=D),v&&(this.CraftID=v),(u||0===u)&&(this.UseModule=u),c&&(this.UseTimes=c),p&&(this.Unit=p),m&&(this.Remark=m),d&&Array.isArray(d)&&d.length>0&&(this.PropertyList=d)}}return Object(r.a)(e,null,[{key:"checkSubmit",value:function(e){if(!e||"[object Object]"!==Object.prototype.toString.call(e))return s.a.failSingleError("操作失败","获取提交信息出错"),!1;var t=e.Name,n=e.PropertyList,i=e.Content;if(!t)return s.a.failSingleError("操作失败","请输入公式名称"),!1;if(n&&n.length>0){var r=n.find((function(e){return!e.DefaultValue&&0!==e.DefaultValue}));if(r)return s.a.failSingleError("操作失败","".concat(r.Element?r.Element.Name:r.DisplayContent,"未设置空值")),!1;if(r=n.find((function(e){if(!e.Element)return!Object(l.g)(e.DefaultValue);var t=e.Element,n=t.Type,i=t.NumbericAttribute,r=!(1===n&&i&&i.AllowDecimal);return!Object(l.g)(e.DefaultValue,r)})))return s.a.failSingleError("操作失败","".concat(r.Element?r.Element.Name:r.DisplayContent,"空值设置值不正确(检查是否为数字或是否允许小数)")),!1;for(var a=0;a<n.length;a+=1){var c=n[a];if(c.ValueRange){var p=c.ValueRange,d=p.MinValue,m=p.MaxValue;if((d||0===d)&&+c.DefaultValue<d)return s.a.failSingleError("操作失败","".concat(c.Element?c.Element.Name:c.DisplayContent,"空值设置值不能小于").concat(d)),!1;if((m||0===m)&&+c.DefaultValue>m&&-1!==m)return s.a.failSingleError("操作失败","".concat(c.Element?c.Element.Name:c.DisplayContent,"空值设置值不能大于").concat(m)),!1}}if(r=n.find((function(e){var t=e.DefaultValue,n=e.AvailableValueList;return!u.d.AvailableValueListChecker(t,n)})))return s.a.failSingleError("操作失败","".concat(r.Element?r.Element.Name:r.DisplayContent,"空值设置值不正确，请检查其取值范围")),!1}if(!i)return s.a.failSingleError("操作失败","请填写公式内容"),!1;var f=i.match(o.d);return!f||(s.a.failSingleError("操作失败","公式中[ ".concat(f," ]请转为半角字符")),!1)}},{key:"checkCalculate",value:function(e){if(!e||"[object Object]"!==Object.prototype.toString.call(e))return s.a.failSingleError("计算失败","获取提交信息出错"),!1;var t=e.PropertyList,n=e.Content;if(!n)return s.a.failSingleError("计算失败","请填写公式内容"),!1;var i=n.match(o.d);if(i)return s.a.failSingleError("计算失败","公式中[ ".concat(i," ]等字符为全角字符，请转换为半角")),!1;if(t&&t.length>0){var r=t.find((function(e){return!e.CalculateValue&&0!==e.CalculateValue&&n.includes(e.DisplayContent)}));if(r)return s.a.failSingleError("计算失败","".concat(r.Element?r.Element.Name:r.DisplayContent,"未设置测试计算数值")),!1;if(r=t.find((function(e){return n.includes(e.DisplayContent)&&!Object(l.g)(e.CalculateValue)})))return s.a.failSingleError("计算失败","".concat(r.Element?r.Element.Name:r.DisplayContent,"计算值不合法(检查是否为数字或是否允许小数)")),!1}return!0}}]),e}()},"466d":function(e,t,n){"use strict";var i=n("d784"),r=n("825a"),a=n("50c4"),s=n("1d80"),l=n("8aa5"),o=n("14c3");i("match",1,(function(e,t,n){return[function(t){var n=s(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var s=r(e),u=String(this);if(!s.global)return o(s,u);var c=s.unicode;s.lastIndex=0;for(var p,d=[],m=0;null!==(p=o(s,u));){var f=String(p[0]);d[m]=f,""===f&&(s.lastIndex=l(u,a(s.lastIndex),c)),m++}return 0===m?null:d}]}))},"468e":function(e,t,n){"use strict";var i=n("4aae");n.n(i).a},4944:function(e,t,n){"use strict";var i=n("283a");n.n(i).a},"4aae":function(e,t,n){},5731:function(e,t){e.exports="data:image/png;base64,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"},"918d":function(e,t,n){"use strict";var i=n("2243");n.n(i).a},"956e":function(e,t,n){},a9e4:function(e,t,n){"use strict";var i=(n("99af"),n("7db0"),n("4160"),n("caad"),n("b64b"),n("d3b7"),n("25f0"),n("2532"),n("159b"),n("5530")),r=n("3835"),a=n("ad32"),s=n("2387"),l=n("31e0"),o=n("3eca"),u=(n("c740"),n("a434"),{props:{dataList:{type:Array,default:null},selectedElementIDs:{type:Array,default:function(){return[]}},ElementGroupList:{type:Array,default:null}},computed:{groupList:function(){if(this.ElementGroupList)return this.ElementGroupList;if(!this.dataList||!Array.isArray(this.dataList)||0===this.dataList.length)return[];var e=[],t=[];return JSON.parse(JSON.stringify(this.dataList)).forEach((function(n){var r=n.Group,a=n.FixedType,s=n.Element,l=n.Formula,o=s||l;if(!o&&r&&!a&&0!==a){var u=e.findIndex((function(e){return(e.Group?e.Group.ID:e.ID)===r.ID}));if(u>-1){if(!e[u].StoredContent&&n.StoredContent){var c=e[u],p=c.List,d=c._FixedTypeList;p=p||[],d=d||[];var m=Object(i.a)({},n,{List:p,_FixedTypeList:d});e.splice(u,1,m)}}else e.push(Object(i.a)({},n,{_FixedTypeList:[],List:[]}))}if(s&&r&&!a&&0!==a&&!l){var f=e.find((function(e){return(e.Group?e.Group.ID:e.ID)===r.ID}));if(f){f.List||(f.List=[]);var y=f.List.findIndex((function(e){return(e.Element?e.Element.ID:e.ID)===s.ID}));if(y>-1){if(!f.List[y].StoredContent&&n.StoredContent){var h=f.List[y]._FixedTypeList,L=Object(i.a)({},n,{_FixedTypeList:h});f.List.splice(y,1,L)}}else f.List.push(n)}else e.push(Object(i.a)({},r,{List:[n]}))}if(!s&&r&&(a||0===a)&&!l){var b=e.find((function(e){return(e.Group?e.Group.ID:e.ID)===r.ID}));if(b)b._FixedTypeList||(b._FixedTypeList=[]),b._FixedTypeList.push(n);else{var D=Object(i.a)({},r,{List:[],_FixedTypeList:[n]});e.push(D)}t.push(n)}if(o&&r&&(a||0===a)){var v=e.find((function(e){return(e.Group?e.Group.ID:e.ID)===r.ID}));if(v){var C=v.List.find((function(e){return(e.Element?e.Element.ID:e.ID)===o.ID}));if(C)C._FixedTypeList||(C._FixedTypeList=[]),C._FixedTypeList.push(n);else{var E=Object(i.a)({},o,{_FixedTypeList:[n]});v.List.push(E)}}else e.push(Object(i.a)({},r,{_FixedTypeList:[n],List:[]}))}})),e}},methods:{getName:function(e){return o.d.getProperyName(e)},onItemClick:function(e){this.$emit("submit",e)}}}),c=(n("e363"),n("2877")),p=Object(c.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"mp-erp-common-comps-on-element-select-dialog-group-type-show-item-comp-wrap"},e._l(e.groupList,(function(t){return n("li",{key:t.Group?t.Group.ID:t.ID},[t.Group?n("label",[t.StoredContent?n("span",{staticClass:"is-element",on:{click:function(n){return e.onItemClick(t)}}},[e._v(e._s(t.Group.Name))]):n("span",[e._v(e._s(t.Group.Name))]),t.Group.GroupProps&&t.Group.GroupProps.length>0?[e._v(" （"),e._l(t.Group.GroupProps,(function(t){return n("span",{key:t.StoredContent,staticClass:"blue-span",class:e.selectedElementIDs.includes(t.StoredContent)?"is-disabled":"",on:{click:function(n){return e.onItemClick(t)}}},[e._v(e._s(e.getName(t)))])})),e._v("） ")]:e._e(),t.List.length>0?[e._v("：")]:e._e()],2):e._e(),!t.Group&&t.Name?n("label",[e._v(e._s(t.Name)+" "),t._FixedTypeList&&t._FixedTypeList.length>0?[e._v(" （"),e._l(t._FixedTypeList,(function(t){return n("span",{key:t.StoredContent,staticClass:"blue-span",class:e.selectedElementIDs.includes(t.StoredContent)?"is-disabled":"",on:{click:function(n){return e.onItemClick(t)}}},[e._v(e._s(e.getName(t)))])})),e._v("） ")]:e._e(),t.List.length>0?[e._v("：")]:e._e()],2):e._e(),n("ul",e._l(t.List,(function(t){return n("li",{key:t.StoredContent||t.ID},[n("span",{staticClass:"is-element",class:{"has-child":t._FixedTypeList&&t._FixedTypeList.length>0,disabled:!t.StoredContent,"is-disabled":t.StoredContent&&e.selectedElementIDs.includes(t.StoredContent)},on:{click:function(n){return e.onItemClick(t)}}},[e._v(e._s(e.getName(t)))]),t._FixedTypeList&&t._FixedTypeList.length>0?n("div",[e._v(" （"),e._l(t._FixedTypeList,(function(t){return n("span",{key:t.StoredContent,staticClass:"blue-span",class:e.selectedElementIDs.includes(t.StoredContent)?"is-disabled":"",on:{click:function(n){return e.onItemClick(t)}}},[e._v(e._s(e.getName(t)))])})),e._v("） ")],2):e._e()])})),0)])})),0)}),[],!1,null,null,null).exports,d={props:{dataList:{type:Array,default:function(){return[]}},ElementList:{type:Array,default:null},selectedElementIDs:{type:Array,default:function(){return[]}}},computed:{elementList:function(){if(this.ElementList)return this.ElementList;if(!this.dataList||!Array.isArray(this.dataList)||0===this.dataList.length)return[];var e=[];return JSON.parse(JSON.stringify(this.dataList)).forEach((function(t){if(t.FixedType||0===t.FixedType){var n=e.find((function(e){return(e.Element?e.Element.ID:e.ID)===(t.Element?t.Element.ID:t.Formula.ID)}));if(n)n._FixedTypeList.push(t);else{var r=t.Element||t.Formula;e.push(Object(i.a)({},r,{_FixedTypeList:[t]}))}}else{var a=e.findIndex((function(e){return(e.Element?e.Element.ID:e.ID)===t.Element.ID}));if(a>-1){if(!e[a].StoredContent&&t.StoredContent){var s=e[a]._FixedTypeList,l=Object(i.a)({},t,{_FixedTypeList:s});e.splice(a,1,l)}}else e.push(Object(i.a)({},t,{_FixedTypeList:[]}))}})),e}},methods:{getName:function(e){return o.d.getProperyName(e)},onItemClick:function(e){this.$emit("submit",e)}}},m=(n("918d"),Object(c.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"mp-erp-common-comps-on-element-select-dialog-element-type-show-item-comp-wrap"},e._l(e.elementList,(function(t){return n("li",{key:t.StoredContent||t.ID},[n("span",{staticClass:"is-element",class:{"has-child":t._FixedTypeList&&t._FixedTypeList.length>0,disabled:!t.StoredContent,"is-disabled":t.StoredContent&&e.selectedElementIDs.includes(t.StoredContent)},on:{click:function(n){return e.onItemClick(t)}}},[e._v(e._s(e.getName(t)))]),t._FixedTypeList&&t._FixedTypeList.length>0?n("div",[e._v(" （"),e._l(t._FixedTypeList,(function(t){return n("span",{key:t.StoredContent,staticClass:"blue-span",class:e.selectedElementIDs.includes(t.StoredContent)?"is-disabled":"",on:{click:function(n){return e.onItemClick(t)}}},[e._v(e._s(e.getName(t)))])})),e._v("） ")],2):e._e()])})),0)}),[],!1,null,null,null)).exports,f={props:{dataList:{type:Array,default:function(){return[]}},selectedElementIDs:{type:Array,default:function(){return[]}}},components:{ElementTypeShowComp:m,ElementGroupTypeShowComp:p},computed:{craftTypeList:function(){if(!this.dataList||!Array.isArray(this.dataList)||0===this.dataList.length)return[];var e=[],t=JSON.parse(JSON.stringify(this.dataList)),n=function(e){return{Craft:e,_ElementList:[],_ElementGroupList:[]}},r=function(t){var n=e.find((function(e){return t.ID===e.Craft.ID}));if(n){if(!n.StoredContent&&t.StoredContent){var r=n._ElementList,a=n._ElementGroupList,s=Object(i.a)({},t,{_ElementList:r,_ElementGroupList:a}),l=e.findIndex((function(e){return t.ID===e.Craft.ID}));e.splice(l,1,s)}}else e.push(t)};return t.forEach((function(t){var a=t.Craft,s=t.Element,l=t.Group,o=t.FixedType,u=t.Formula,c=s||u;if(!a||s||l||o||0===o||u||r(t),a&&s&&!l&&!o&&0!==o&&!u){var p=e.find((function(e){return a.ID===e.Craft.ID}));if(p){p._ElementList||(p._ElementList=[]);var d=p._ElementList.findIndex((function(e){return(e.Element?e.Element.ID:e.ID)===s.ID}));if(d>-1){if(!p._ElementList[d].StoredContent&&t.StoredContent){var m=p._ElementList[d]._FixedTypeList,f=Object(i.a)({},t,{_FixedTypeList:m});p._ElementList.splice(d,1,f)}}else p._ElementList.push(t)}else{var y=n(a);y._ElementList.push(t),r(y)}}if(a&&s&&!l&&(o||0===o)&&!u){var h=e.find((function(e){return a.ID===e.Craft.ID}));if(h){h._ElementList||(h._ElementList=[]);var L=h._ElementList.find((function(e){return(e.Element?e.Element.ID:e.ID)===s.ID}));if(L)L._FixedTypeList||(L._FixedTypeList=[]),L._FixedTypeList.push(t);else{var b=Object(i.a)({},s,{_FixedTypeList:[t]});h._ElementList.push(b)}}else{var D=n(a),v=Object(i.a)({},s,{_FixedTypeList:[t]});D._ElementList.push(v),r(D)}}if(a&&!s&&l&&!o&&0!==o&&!u){var C=e.find((function(e){return a.ID===e.Craft.ID}));if(C){var E=Object(i.a)({},t,{List:[]});C._ElementGroupList||(C._ElementGroupList=[]);var I=C._ElementGroupList.findIndex((function(e){return(e.Group?e.Group.ID:e.ID)===l.ID}));if(I>-1){if(!C._ElementGroupList[I].StoredContent&&t.StoredContent){var _=C._ElementGroupList[I].List,g=Object(i.a)({},t,{List:_});C._ElementGroupList.splice(I,1,g)}}else C._ElementGroupList.push(E)}else{var T=n(a),S=Object(i.a)({},t,{List:[]});T._ElementGroupList.push(S),r(T)}}if(a&&s&&l&&!o&&0!==o&&!u){var O=e.find((function(e){return a.ID===e.Craft.ID}));if(O){var x=Object(i.a)({},l,{List:[t]});O._ElementGroupList||(O._ElementGroupList=[]);var G=O._ElementGroupList.find((function(e){return(e.Group?e.Group.ID:e.ID)===l.ID}));if(G){var A=G.List.findIndex((function(e){return e.ID===s.ID}));if(A>-1){if(!G.List[A].StoredContent&&t.StoredContent){var j=G.List[A]._FixedTypeList,F=Object(i.a)({},t,{_FixedTypeList:j});G.List.splice(A,1,F)}}else G.List.push(t)}else O._ElementGroupList.push(x)}else{var k=n(a),P=Object(i.a)({},l,{List:[t]});k._ElementGroupList.push(P),r(k)}}if(a&&!c&&l&&(o||0===o)){var w=e.find((function(e){return a.ID===e.Craft.ID}));if(w){var N=Object(i.a)({},l,{List:[],_FixedTypeList:[t]});w._ElementGroupList||(w._ElementGroupList=[]);var M=w._ElementGroupList.find((function(e){return(e.Group?e.Group.ID:e.ID)===l.ID}));M?(M._FixedTypeList||(M._FixedTypeList=[]),M._FixedTypeList.push(t)):w._ElementGroupList.push(N)}else{var V=n(a),B=Object(i.a)({},l,{List:[],_FixedTypeList:[t]});V._ElementGroupList.push(B),r(V)}}if(a&&c&&l&&(o||0===o)){var Y=e.find((function(e){return a.ID===e.Craft.ID}));if(Y){Y._ElementGroupList||(Y._ElementGroupList=[]);var W=Y._ElementGroupList.find((function(e){return(e.Group?e.Group.ID:e.ID)===l.ID}));if(W){var R=W.List.find((function(e){return(e.Element?e.Element.ID:e.ID)===c.ID}));if(R)R._FixedTypeList||(R._FixedTypeList=[]),R._FixedTypeList.push(t);else{var Z=Object(i.a)({},c,{_FixedTypeList:[t]});W.List.push(Z)}}else{var U=Object(i.a)({},l,{List:[Object(i.a)({},c,{_FixedTypeList:[t]})],_FixedTypeList:[]});Y._ElementGroupList.push(U)}}else{var J=n(a),X=Object(i.a)({},l,{List:[Object(i.a)({},c,{_FixedTypeList:[t]})],_FixedTypeList:[]});J._ElementGroupList.push(X),r(J)}}})),e}},methods:{getName:function(e){return o.d.getProperyName(e)},onItemClick:function(e){e.StoredContent&&this.$emit("submit",e)}}},y=(n("e952"),Object(c.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"mp-erp-common-comps-on-element-select-dialog-craft-type-show-item-comp-wrap"},e._l(e.craftTypeList,(function(t){return n("li",{key:t.StoredContent||t.Craft.ID},[n("label",{staticClass:"is-element",class:{"is-disabled":t.StoredContent&&e.selectedElementIDs.includes(t.StoredContent),"no-element":!t.StoredContent},on:{click:function(n){return e.onItemClick(t)}}},[e._v(e._s(t.Craft.Name)+" "),t._ElementList||t._ElementGroupList?[e._v("：")]:e._e()],2),n("div",[n("ElementTypeShowComp",{attrs:{selectedElementIDs:e.selectedElementIDs,ElementList:t._ElementList},on:{submit:e.onItemClick}}),n("ElementGroupTypeShowComp",{attrs:{selectedElementIDs:e.selectedElementIDs,ElementGroupList:t._ElementGroupList},on:{submit:e.onItemClick}})],1)])})),0)}),[],!1,null,null,null)).exports,h={props:{dataList:{type:Array,default:function(){return[]}},selectedElementIDs:{type:Array,default:function(){return[]}},useType:{type:String,default:"condition"}},computed:{formulaMaterialList:function(){if(!this.dataList||"formula"!==this.useType||0===this.dataList.length)return[];var e=[];return this.dataList.forEach((function(t){var n=t.MaterialType,i=e.find((function(e){return e.MaterialType.ID===n.ID}));i?i.List.push(t):e.push({MaterialType:n,List:[t]})})),e}},methods:{getName:function(e){return o.d.getProperyName(e)},onItemClick:function(e){this.$emit("submit",e)}}},L=(n("072a"),Object(c.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"mp-erp-common-comps-on-element-select-dialog-group-type-show-item-comp-wrap"},["formula"===e.useType?e._l(e.formulaMaterialList,(function(t){return n("li",{key:t.MaterialType.ID,staticClass:"formula-type"},[n("label",[e._v(e._s(t.MaterialType.Name)+"：")]),e._l(t.List,(function(t){return n("span",{key:t.Element.ID,staticClass:"is-element",class:{"is-disabled":t.StoredContent&&e.selectedElementIDs.includes(t.StoredContent)},on:{click:function(n){return e.onItemClick(t)}}},[e._v(e._s(e.getName(t)))])}))],2)})):e._l(e.dataList,(function(t){return n("li",{key:t.StoredContent||t.ID},[n("span",{staticClass:"is-element",class:{"has-child":t.FixedTypeList,disabled:!t.StoredContent,"is-disabled":t.StoredContent&&e.selectedElementIDs.includes(t.StoredContent)},on:{click:function(n){return e.onItemClick(t)}}},[e._v(e._s(e.getName(t)))]),t.FixedTypeList?n("div",[e._v(" （"),e._l(t.FixedTypeList,(function(t){return n("span",{key:t.StoredContent,staticClass:"blue-span",class:e.selectedElementIDs.includes(t.StoredContent)?"is-disabled":"",on:{click:function(n){return e.onItemClick(t)}}},[e._v(e._s(e.getName(t)))])})),e._v("） ")],2):e._e()])}))],2)}),[],!1,null,null,null)).exports,b={components:{CommonDialogComp:a.a,TipsSpanButton:s.a,ElementGroupTypeShowComp:p,ElementTypeShowComp:m,CraftTypeShowComp:y,MaterialTypeShowComp:L},props:{visible:{type:Boolean,default:!1},list:{type:Array,default:function(){return[]}},selectedElementIDs:{type:Array,default:function(){return[]}},useType:{type:String,default:"condition"},DialogTitle:{type:String,default:""},showConstant:{type:Boolean,default:!1},curTargetID:{type:String,default:""},fixedPartName:{type:String,default:""},isMultiple:{type:Boolean,default:!1}},data:function(){return{propertyData:null,panelRadio:"",panelList:[],tempTabList:[{label:"产品",value:"ProductProperty"},{label:"物料",value:"MaterialProperty"}]}},computed:{showData:function(){if(this.propertyData&&this.panelRadio){if(this.propertyData[this.panelRadio])return this.propertyData[this.panelRadio];if(this.propertyData.PartProperty[this.panelRadio])return this.propertyData.PartProperty[this.panelRadio]}return null}},methods:{onSubmit:function(e){this.selectedElementIDs.includes(e.StoredContent)||(this.$emit("submit",e),this.onCancle())},onCancle:function(){this.$emit("update:visible",!1)},getInitListData:function(){var e=this;if(this.panelList=[],o.b&&this.list){var t={ProductProperty:[],PartProperty:{},MaterialProperty:[]};this.list.forEach((function(n){if(n.Product&&n.Product.ID&&!n.Part)n.Product.ID===e.curTargetID&&e.tempTabList&&e.tempTabList[0].label&&(e.tempTabList[0].label.includes("（当前）")||(e.tempTabList[0].label+="（当前）")),t.ProductProperty.push(n);else if(n.Product&&n.Product.ID&&n.Part&&n.Part.ID){var i=n.Part.Name||n.Part.ID;e.curTargetID===n.Part.ID&&(i+="（当前目标）"),t.PartProperty[i]&&Array.isArray(t.PartProperty[i])?t.PartProperty[i].push(n):t.PartProperty[i]=[n]}else n.Material&&n.Material.ID&&!n.Product&&t.MaterialProperty.push(n)}));var n=this.protertyFilterHelper(t);if(this.propertyData=n,Object.keys(n).length>0){var i=Object.keys(n),a=Object(r.a)(i,1)[0];if(Array.isArray(n[a]))this.panelRadio=a;else if("[object Object]"===Object.prototype.toString.call(n[a])){var s=Object.keys(n[a]),l=Object(r.a)(s,1)[0];Array.isArray(n[a][l])&&(this.panelRadio=l)}}this.fixedPartName&&(this.panelRadio="产品"===this.fixedPartName?"ProductProperty":this.fixedPartName)}},protertyFilterHelper:function(e){var t=this,n={};return Object.keys(e).forEach((function(r){if(Array.isArray(e[r])&&e[r].length>0){n[r]=t.protertySeparateHelper(e[r]);var a=t.tempTabList.find((function(e){return e.value===r}));a&&t.panelList.push(Object(i.a)({},a))}if("[object Object]"===Object.prototype.toString.call(e[r])&&Object.keys(e[r]).length>0){var s={};Object.keys(e[r]).forEach((function(n){(s[n]=t.protertySeparateHelper(e[r][n]),"PartProperty"===r)&&(t.panelList.find((function(e){return e.value===n}))||t.panelList.push({label:n,value:n}))})),n[r]=s}})),n},protertySeparateHelper:function(e){var t=JSON.parse(JSON.stringify(e)),n={};t.forEach((function(e){n[e.Type]&&Array.isArray(n[e.Type])?n[e.Type].push(e):n[e.Type]=[e]}));var i=[];return Object.keys(n).forEach((function(e){i.push({Type:+e,list:n[e]})})),i},onOpen:function(){this.getInitListData()},getTitle:function(e){var t=this,n=o.b.find((function(t){return t.ID===e}));if(n){if(0!==e)return n.nickName;var i=l.a.find((function(e){return e.type===t.panelRadio}));return i?"".concat(i.label).concat(n.nickName):n.label}return""},getTextName:function(e){return o.d.getProperyName(e)},onConstantClick:function(){this.$emit("submit",null),this.onCancle()}}},D=(n("4944"),Object(c.a)(b,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CommonDialogComp",{staticClass:"mp-erp-common-comps-formula-panel-comp-element-select-comp-wrap",attrs:{width:"850px",top:"10vh",title:"添加元素",visible:e.visible,showSubmit:!1,cancelText:"关闭"},on:{"update:visible":function(t){e.visible=t},cancle:e.onCancle,open:e.onOpen}},[i("section",{staticClass:"show-panel-box"},[i("header",[e.panelList.length>1&&!e.fixedPartName?i("el-radio-group",{staticClass:"mp-common-tab-radio-box",attrs:{size:"mini"},model:{value:e.panelRadio,callback:function(t){e.panelRadio=t},expression:"panelRadio"}},e._l(e.panelList,(function(t){return i("el-radio-button",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1):e.DialogTitle?i("p",[e._v(e._s(e.DialogTitle))]):e._e()],1),e.showData?i("main",[e._l(e.showData,(function(t){return i("div",{key:t.Type},[i("span",{staticClass:"title mp-common-title-wrap"},[e._v(e._s(e.getTitle(t.Type)))]),2===t.Type?i("ElementGroupTypeShowComp",{attrs:{dataList:t.list,selectedElementIDs:e.selectedElementIDs},on:{submit:e.onSubmit}}):3===t.Type?i("ElementTypeShowComp",{attrs:{dataList:t.list,selectedElementIDs:e.selectedElementIDs},on:{submit:e.onSubmit}}):4===t.Type?i("CraftTypeShowComp",{attrs:{dataList:t.list,selectedElementIDs:e.selectedElementIDs},on:{submit:e.onSubmit}}):5===t.Type?i("MaterialTypeShowComp",{attrs:{useType:e.useType,dataList:t.list,selectedElementIDs:e.selectedElementIDs},on:{submit:e.onSubmit}}):6===t.Type?i("ElementGroupTypeShowComp",{attrs:{dataList:t.list,selectedElementIDs:e.selectedElementIDs},on:{submit:e.onSubmit}}):8===t.Type?i("ElementTypeShowComp",{attrs:{dataList:t.list,selectedElementIDs:e.selectedElementIDs},on:{submit:e.onSubmit}}):i("div",e._l(t.list,(function(t){return i("TipsSpanButton",{key:t.StoredContent,attrs:{disabled:e.selectedElementIDs.includes(t.StoredContent),text:e.getTextName(t)||t.DisplayContent||"未知名称"},nativeOn:{click:function(n){return e.onSubmit(t)}}})})),1)],1)})),e.showConstant?i("p",{staticClass:"constant"},[i("span",{staticClass:"blue-span",on:{click:e.onConstantClick}},[e._v("常量")])]):e._e()],2):i("main",{staticClass:"null-box"},[i("img",{attrs:{src:n("5731"),alt:""}}),i("p",{staticClass:"is-font-size-12 is-gray"},[e._v("暂无数据，请先添加")])])])])}),[],!1,null,null,null));t.a=D.exports},ad32:function(e,t,n){"use strict";var i={model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},title:{type:String,default:"提示"},width:{default:"30%"},top:{type:String,default:"15vh"},showSubmit:{type:Boolean,default:!0},submitText:{type:String,default:"保存"},dangerText:{type:String,default:"重新生成"},cancelText:{type:String,default:"取消"},disabled:{type:Boolean,default:!1},showDanger:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},data:function(){return{checkList:[]}},methods:{onCancleClick:function(){this.$emit("cancle")},onSubmitClick:function(e){this.dialogVisible&&("BUTTON"===e.target.nodeName?e.target.blur():"BUTTON"===e.target.parentNode.nodeName&&e.target.parentNode.blur(),this.$emit("submit"))},onDangerClick:function(){this.$emit("danger")},onOpen:function(){this.$emit("open")},onOpened:function(){this.$emit("opened")},onClose:function(){this.$emit("close")},onClosed:function(){this.$emit("closed")}}},r=(n("468e"),n("2877")),a=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"mp-img-style-header mp-erp-common-dialog-comp-wrap",attrs:{title:e.title,visible:e.dialogVisible,"close-on-click-modal":!1,width:e.width,top:e.top,modal:!1,"before-close":e.onCancleClick},on:{"update:visible":function(t){e.dialogVisible=t},open:e.onOpen,opened:e.onOpened,close:e.onClose,closed:e.onClosed}},[e._t("default"),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.showSubmit?n("el-button",{attrs:{type:"primary",loading:e.loading,disabled:e.disabled},on:{click:e.onSubmitClick}},[e._v(e._s(e.loading?"加载中":e.submitText))]):e._e(),e.showDanger?n("el-button",{attrs:{type:"danger"},on:{click:e.onDangerClick}},[e._v(e._s(e.dangerText))]):e._e(),n("el-button",{on:{click:e.onCancleClick}},[e._v(e._s(e.cancelText))])],1)],2)}),[],!1,null,null,null);t.a=a.exports},dbd1:function(e,t,n){},e363:function(e,t,n){"use strict";var i=n("dbd1");n.n(i).a},e952:function(e,t,n){"use strict";var i=n("feaa");n.n(i).a},feaa:function(e,t,n){}}]);