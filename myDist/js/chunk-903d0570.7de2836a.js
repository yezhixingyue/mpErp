(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-903d0570"],{"0a4b":function(t,e,a){"use strict";var o=a("225c");a.n(o).a},"225c":function(t,e,a){},"50cd":function(t,e,a){},c9b2:function(t,e,a){"use strict";var o=(a("4de4"),a("a9e3"),a("ade3")),n=(a("96cf"),a("1da1")),i={props:{PositionID:{type:String,default:""},formulaH:{type:Number,default:560},PositionType:{type:String,default:""},UseModule:{type:Number,default:0}},data:function(){return{localTableData:[],loading:!1}},methods:{onSetupClick:function(t){this.$emit("setup",t)},onRemoveClick:function(t){var e=this;t&&t.ID&&this.messageBox.warnCancelBox("确定删除该公式吗","公式名称：[ ".concat(t.Name," ]"),(function(){e.handleRemove(t)}))},handleRemove:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function a(){var o,n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.api.getFormulaRemove(t.ID).catch((function(){}));case 2:(o=a.sent)&&200===o.status&&1e3===o.data.Status&&(n=function(){e.setDataListRemove(t.ID)},e.messageBox.successSingle("删除成功",n,n));case 4:case"end":return a.stop()}}),a)})))()},setDataListRemove:function(t){this.localTableData=this.localTableData.filter((function(e){return e.ID!==t}))},getFormulaList:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.PositionID&&!t.loading){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,e.next=5,t.api.getFormulaList((a={},Object(o.a)(a,t.PositionType,t.PositionID),Object(o.a)(a,"UseModule",t.UseModule),a)).catch((function(){}));case 5:n=e.sent,t.loading=!1,n&&200===n.status&&1e3===n.data.Status&&(t.localTableData=n.data.Data);case 8:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getFormulaList();var t=document.querySelector(".mp-erp-common-comps-formula-table-common-comp-wrap .mp-erp-common-formula-table-comp-wrap .el-table__body-wrapper");t&&(t.style.minHeight="".concat(this.formulaH,"px"))}},s=(a("e9c5"),a("2877")),r=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"mp-erp-common-comps-formula-table-common-comp-wrap"},[a("header",[a("span",{staticClass:"title"},[t._v("公式列表")]),a("span",{staticClass:"blue-span",on:{click:function(e){return t.onSetupClick(null)}}},[t._v("+添加公式")])]),a("main",[a("el-table",{key:"mp-erp-common-formula-table-comp-wrap",staticClass:"mp-erp-common-formula-table-comp-wrap",staticStyle:{width:"100%"},attrs:{stripe:"",border:"",data:t.localTableData,fit:""}},[a("el-table-column",{attrs:{prop:"Name",label:"名称",width:"280"}}),a("el-table-column",{attrs:{prop:"Content",label:"公式","min-width":"240","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"Unit",label:"单位",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"UseTimes",label:"使用次数",width:"160","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"240","class-name":"menu-column"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"menu-list"},[a("span",{staticClass:"icon-span",on:{click:function(a){return t.onSetupClick(e.row)}}},[a("i"),t._v("编辑")]),a("span",{staticClass:"icon-span",on:{click:function(a){return t.onRemoveClick(e.row)}}},[a("i"),t._v("删除")])])}}])}),a("div",{attrs:{slot:"empty"},slot:"empty"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[t._v("暂无公式")])])],1)],1)])}),[],!1,null,null,null);e.a=r.exports},d619:function(t,e,a){"use strict";a.r(e);var o={name:"MaterialFormulaListPage",data:function(){return{PositionID:"",materialTypeName:""}},components:{FormulaTableCrtlComp:(a("99af"),a("b0c0"),a("ac1f"),a("5319"),a("c9b2")).a},methods:{getPositionID:function(){if(this.$route.params){var t=this.$route.params,e=t.id,a=t.name;e&&a&&(this.PositionID=e,this.materialTypeName=a)}},onGoBackClick:function(){this.$router.replace("/MaterialTypeList")},onFormulaSetupClick:function(t){this.PositionID&&this.materialTypeName&&(this.$store.commit("basicSet/setNowEditFormulaData",t),this.$router.push("/MaterialFormulaSetup/".concat(this.PositionID,"/").concat(this.materialTypeName,"/").concat(Date.now())))}},mounted:function(){this.getPositionID()}},n=(a("0a4b"),a("2877")),i=Object(n.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.PositionID?a("section",{staticClass:"mp-erp-material-type-page-formula-list-page-wrap"},[a("header",[a("span",[t._v("当前物料类型：")]),a("span",[t._v(t._s(t.materialTypeName))])]),a("main",[a("FormulaTableCrtlComp",{attrs:{UseModule:0,PositionID:t.PositionID,PositionType:"MaterialTypeID"},on:{setup:t.onFormulaSetupClick}})],1),a("footer",[a("el-button",{on:{click:t.onGoBackClick}},[t._v("返回")])],1)]):t._e()}),[],!1,null,null,null);e.default=i.exports},e9c5:function(t,e,a){"use strict";var o=a("50cd");a.n(o).a}}]);