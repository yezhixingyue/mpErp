(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-75f9da0e"],{"047a":function(e,t,a){"use strict";var n=a("578e");a.n(n).a},"09f8":function(e,t,a){"use strict";var n={props:{title:{type:String,default:"关闭"},disabled:{type:Boolean,default:!1}}},i=(a("3f2b"),a("2877")),r=Object(i.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"normal-full-btn",class:e.disabled?"is-disabled":"",attrs:{disabled:e.disabled}},[e._v(e._s(e.title))])}),[],!1,null,null,null);t.a=r.exports},"1cd1":function(e,t,a){},"24de":function(e,t,a){},"286f":function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return c})),a("4de4"),a("7db0"),a("4160"),a("caad"),a("d81d"),a("d3b7"),a("6062"),a("2532"),a("3ca3"),a("159b"),a("ddb0");var n=a("5530"),i=a("2909"),r=/^全部/;function s(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ClassName";if(!e||0===e.length)return[];var s=JSON.parse(JSON.stringify(t)),c=Object(i.a)(new Set(e.map((function(e){return e.RegionalID})))),l=Object(i.a)(new Set(e.map((function(e){return e.CityID})))),o=Object(i.a)(new Set(e.map((function(e){return e.CountyID})))),u=s.filter((function(e){return c.includes(e.ID)}));if((u=(u=u.map((function(e){return Object(n.a)({},e,{children:e.children.filter((function(e){return l.includes(e.ID)}))})}))).map((function(e){var t=e.children.map((function(e){var t,i=!0;return e.children.forEach((function(e){o.includes(e.ID)||(i=!1)})),i?i&&(t=["全部".concat(e[a],"区域")]):t=e.children.filter((function(e){return o.includes(e.ID)})),Object(n.a)({},e,{children:t})})),i=!0;(t.forEach((function(e){r.test(e.children[0])||(i=!1)})),i)&&s.find((function(t){return t.ID===e.ID})).children.forEach((function(e){!l.includes(e.ID)&&e.children.length>0&&(i=!1)}));var c=i?["全部".concat(e[a])]:t;return Object(n.a)({},e,{children:c})}))).length===t.length){var h=!0;u.forEach((function(e){r.test(e.children[0])||(h=!1)})),h&&(u="全部区域")}return u}function c(e,t){if(!e||0===e.length)return[];var a=JSON.parse(JSON.stringify(t)),s=Object(i.a)(new Set(e.map((function(e){return e.FirstLevelID})))),c=Object(i.a)(new Set(e.map((function(e){return e.SecondLevelID})))),l=Object(i.a)(new Set(e.map((function(e){return e.ProductID})))),o=a.filter((function(e){return s.includes(e.ID)}));if((o=(o=o.map((function(e){return Object(n.a)({},e,{children:e.children.filter((function(e){return c.includes(e.ID)}))})}))).map((function(e){var t=e.children.map((function(e){var t,a=!0;return e.children.forEach((function(e){l.includes(e.ID)||(a=!1)})),a?a&&(t=["全部".concat(e.ClassName,"产品")]):t=e.children.filter((function(e){return l.includes(e.ID)})),Object(n.a)({},e,{children:t})})),i=!0;(t.forEach((function(e){r.test(e.children[0])||(i=!1)})),i)&&a.find((function(t){return t.ID===e.ID})).children.forEach((function(e){c.includes(e.ID)||(i=!1)}));var s=i?["全部".concat(e.ClassName,"产品")]:t;return Object(n.a)({},e,{children:s})}))).length===t.filter((function(e){return e.children.length>0})).length){var u=!0;o.forEach((function(e){r.test(e.children[0])||(u=!1)})),u&&(o="全部产品")}return o}},"3f2b":function(e,t,a){"use strict";var n=a("436f");a.n(n).a},"436f":function(e,t,a){},"578e":function(e,t,a){},6062:function(e,t,a){"use strict";var n=a("6d61"),i=a("6566");e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},"64dc":function(e,t,a){"use strict";var n=(a("4160"),a("caad"),a("2532"),a("159b"),a("2909")),i={props:{title:{type:String,default:"销售区域"},treeList:{type:Array,default:function(){return[]}},defaultProps:{type:Object,default:function(){return{children:"children",label:"ClassName"}}},defaultNodeKey:{type:String,default:"ID"},defaultCheckedKeys:{type:Array,default:function(){return[]}},handleChangeFunc:{type:Function,default:function(){}},watchValue:{},shouldDisabledList:{type:Array,default:function(){return[]}},showDisabled:{type:Boolean,default:!1},checkAllTitle:{type:String,default:"所有地区"},isDisabled:{type:Boolean,default:!1},isProduct:{type:Boolean,default:!1}},computed:{defaultExpandedKeys:function(){if(0===this.treeList.length||!this.treeList)return[];var e=[];return this.treeList.forEach((function(t){t.children.forEach((function(t){e.push(t.ID)}))})),e},treeListHasDisabled:function(){var e=this,t=JSON.parse(JSON.stringify(Object(n.a)(this.treeList))),a=this.watchValue;return t.forEach((function(t){var n=0;t.children.forEach((function(i){var r=0;i.children.forEach((function(n){e.shouldDisabledList.includes(n[e.defaultNodeKey])&&(Array.isArray(a)&&a.includes(n[e.defaultNodeKey])?(n.disabled=!1,i.disabled&&(i.disabled=!1),t.disabled&&(t.disabled=!1),e.localDisabled2CheckAll=!1):(n.disabled=!0,r+=1))})),i.children.length===r&&(i.disabled=!0,n+=1)})),t.children.length===n&&(t.disabled=!0)})),t},treeData:function(){return this.showDisabled?this.treeListHasDisabled:this.treeList},checkAllIndeterminate:function(){return this.defaultCheckedKeys.length>0&&this.defaultCheckedKeys.length<this.threeLevelKeys.length},AllKeys:function(){var e=[];return this.treeData.forEach((function(t){e.push(t.ID),t.children.forEach((function(t){e.push(t.ID),t.children.forEach((function(t){e.push(t.ID)}))}))})),e},threeLevelKeys:function(){var e=[];return this.treeData.forEach((function(t){t.children.forEach((function(t){t.children.forEach((function(t){e.push(t.ID)}))}))})),e},isCheckAllDisabled:function(){var e=[];return this.treeData.forEach((function(t){t.children.forEach((function(t){t.children.forEach((function(t){e.push(t.ID)}))}))})),(this.isDisabled||e.length===this.shouldDisabledList.length)&&this.localDisabled2CheckAll},checkAllComputed:{get:function(){return this.defaultCheckedKeys.length===this.threeLevelKeys.length},set:function(e){!e&&this.canFalse?this.checkAll=!1:this.checkAllIndeterminate?(this.checkAll=!1,this.canFalse=!1):(this.checkAll=!0,this.canFalse=!0)}}},methods:{check:function(e,t){var a=t.checkedNodes,n=t.checkedKeys;this.handleChangeFunc(a,n),this.setCheckAllListAndStatus(n)},renderContent:function(e,t){var a=this,n=t.node,i=t.data;if(n.level>1)return n.label.length>5?e("el-tooltip",{class:"el-tree-node__label",attrs:{effect:"dark",content:n.label,placement:"top-start"}},[e("span",[n.label])]):e("span",{class:"el-tree-node__label"},[n.label]);var r=n.expanded?"收起":"展开",s=n.expanded?"close el-icon-caret-bottom":"el-icon-caret-bottom";return e("span",{class:"el-tree-node__label"},[e("span",{class:"title"},[n.label]),e("em",{class:"mp-el-tree-node-collapse-btn",on:{click:function(e){return a.expandLevel1(n,i,r,e)}}},[r]),e("span",{class:"icon-box",on:{click:function(e){return e.stopPropagation()}}},[e("em",{on:{click:function(e){return a.expandLevel1(n,i,r,e)}}},[e("i",{class:s})])])])},expandLevel1:function(e,t,a,n){n.stopPropagation(),e.expanded=!e.expanded},handleCheckAllChange:function(){if(this.checkAll){this.$refs.treeComp.setCheckedNodes(this.treeData),this.selectKeys=this.AllKeys;var e=this.$refs.treeComp.getCheckedNodes(),t=this.$refs.treeComp.getCheckedKeys();this.handleChangeFunc(e,t)}else this.$refs.treeComp.setCheckedKeys([]),this.selectKeys=[],this.handleChangeFunc([],[])},setCheckAllListAndStatus:function(e){this.selectKeys=e,this.selectKeys.length===this.AllKeys.length?this.checkAll=!0:!0===this.checkAll&&(this.checkAll=!1)},clearTreeData:function(){this.$refs.treeComp.setCheckedKeys([]),this.selectKeys=[]}},data:function(){return{checkAll:!1,selectKeys:[],localDisabled2CheckAll:!0,canFalse:!0}},watch:{watchValue:{handler:function(e){var t=this;this.localDisabled2CheckAll=!0,this.$nextTick((function(){if("number"==typeof e)t.$refs.treeComp.setCheckedKeys([]),t.selectKeys=[],t.checkAll=!1;else if(Array.isArray(e)){t.$refs.treeComp.setCheckedKeys(e);var a=t.$refs.treeComp.getCheckedKeys();t.setCheckAllListAndStatus(a);var n=t.$refs.treeComp.getCheckedNodes();t.handleChangeFunc(n,a)}}))},immediate:!0},defaultCheckedKeys:function(e){e&&Array.isArray(e)&&0===e.length&&this.selectKeys.length>0?(this.$refs.treeComp.setCheckedKeys([]),this.selectKeys=[],this.checkAll=!1):!this.watchValue&&e&&Array.isArray(e)&&e.length>0&&e.length!==this.selectKeys.length&&(this.$refs.treeComp.setCheckedKeys(e),this.selectKeys=e)}}},r=(a("047a"),a("2877")),s=Object(r.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"mp-common-comps-tree-comp-wrap",class:e.isProduct?"isProduct":""},[a("header",[e._v(" "+e._s(e.title)),e.title?a("span",[e._v("：")]):e._e()]),a("div",{staticClass:"content mp-scroll-wrap"},[a("el-checkbox",{attrs:{disabled:e.isCheckAllDisabled,indeterminate:e.checkAllIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAllComputed,callback:function(t){e.checkAllComputed=t},expression:"checkAllComputed"}},[e._v(" "+e._s(e.checkAllTitle)+" ")]),a("el-tree",{ref:"treeComp",staticClass:"mp-scroll-wrap",attrs:{data:e.treeData,"show-checkbox":"","icon-class":"","node-key":e.defaultNodeKey,"default-expanded-keys":e.defaultExpandedKeys,"default-checked-keys":e.defaultCheckedKeys,props:e.defaultProps,"auto-expand-parent":!1,"expand-on-click-node":!1,"check-on-click-node":!0,"render-content":e.renderContent},on:{check:e.check}})],1)])}),[],!1,null,null,null);t.a=s.exports},6566:function(e,t,a){"use strict";var n=a("9bf2").f,i=a("7c73"),r=a("e2cc"),s=a("0366"),c=a("19aa"),l=a("2266"),o=a("7dd0"),u=a("2626"),h=a("83ab"),d=a("f183").fastKey,m=a("69f3"),f=m.set,p=m.getterFor;e.exports={getConstructor:function(e,t,a,o){var u=e((function(e,n){c(e,u,t),f(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),h||(e.size=0),null!=n&&l(n,e[o],e,a)})),m=p(t),D=function(e,t,a){var n,i,r=m(e),s=v(e,t);return s?s.value=a:(r.last=s={index:i=d(t,!0),key:t,value:a,previous:n=r.last,next:void 0,removed:!1},r.first||(r.first=s),n&&(n.next=s),h?r.size++:e.size++,"F"!==i&&(r.index[i]=s)),e},v=function(e,t){var a,n=m(e),i=d(t);if("F"!==i)return n.index[i];for(a=n.first;a;a=a.next)if(a.key==t)return a};return r(u.prototype,{clear:function(){for(var e=m(this),t=e.index,a=e.first;a;)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete t[a.index],a=a.next;e.first=e.last=void 0,h?e.size=0:this.size=0},delete:function(e){var t=this,a=m(t),n=v(t,e);if(n){var i=n.next,r=n.previous;delete a.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),a.first==n&&(a.first=i),a.last==n&&(a.last=r),h?a.size--:t.size--}return!!n},forEach:function(e){for(var t,a=m(this),n=s(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:a.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!v(this,e)}}),r(u.prototype,a?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return D(this,0===e?0:e,t)}}:{add:function(e){return D(this,e=0===e?0:e,e)}}),h&&n(u.prototype,"size",{get:function(){return m(this).size}}),u},setStrong:function(e,t,a){var n=t+" Iterator",i=p(t),r=p(n);o(e,t,(function(e,t){f(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=r(this),t=e.kind,a=e.last;a&&a.removed;)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?"keys"==t?{value:a.key,done:!1}:"values"==t?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),u(t)}}},"6d61":function(e,t,a){"use strict";var n=a("23e7"),i=a("da84"),r=a("94ca"),s=a("6eeb"),c=a("f183"),l=a("2266"),o=a("19aa"),u=a("861d"),h=a("d039"),d=a("1c7e"),m=a("d44e"),f=a("7156");e.exports=function(e,t,a){var p=-1!==e.indexOf("Map"),D=-1!==e.indexOf("Weak"),v=p?"set":"add",I=i[e],g=I&&I.prototype,y=I,b={},C=function(e){var t=g[e];s(g,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(D&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return D&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(D&&!u(e))&&t.call(this,0===e?0:e)}:function(e,a){return t.call(this,0===e?0:e,a),this})};if(r(e,"function"!=typeof I||!(D||g.forEach&&!h((function(){(new I).entries().next()})))))y=a.getConstructor(t,e,p,v),c.REQUIRED=!0;else if(r(e,!0)){var k=new y,S=k[v](D?{}:-0,1)!=k,A=h((function(){k.has(1)})),x=d((function(e){new I(e)})),L=!D&&h((function(){for(var e=new I,t=5;t--;)e[v](t,t);return!e.has(-0)}));x||((y=t((function(t,a){o(t,y,e);var n=f(new I,t,y);return null!=a&&l(a,n[v],n,p),n}))).prototype=g,g.constructor=y),(A||L)&&(C("delete"),C("has"),p&&C("get")),(L||S)&&C(v),D&&g.clear&&delete g.clear}return b[e]=y,n({global:!0,forced:y!=I},b),m(y,e),D||a.setStrong(y,e,p),y}},"6df8":function(e,t,a){"use strict";var n=a("1cd1");a.n(n).a},b515:function(e,t,a){"use strict";a.r(t);var n=(a("99af"),a("4de4"),a("7db0"),a("4160"),a("caad"),a("d81d"),a("fb6a"),a("a434"),a("ac1f"),a("2532"),a("5319"),a("1276"),a("159b"),a("96cf"),a("1da1")),i=a("2909"),r=a("3835"),s=a("5530"),c=a("2f62"),l=a("9477"),o=a("286f"),u=a("64dc"),h=a("09f8"),d=a("edeb"),m=a("3628"),f=a("3eca"),p={name:"SchemaItemSet",components:{ContionCommonComp:l.a,TreeComp:u.a,normalBtnFull:h.a,normalBtn:d.a},computed:Object(s.a)({},Object(c.e)("timelimit",["SchemaItemData","TimeLimitData","setPageType"]),{},Object(c.e)("common",["adAreaList"]),{},Object(c.c)("common",["subExpressList","allAdAreaTreeList"]),{areaShowTextArr:function(){if(0===this.allAdAreaTreeList.length||!this.SchemaItemData)return[];var e="Name",t=Object(o.a)(this.SchemaItemData.AreaList,this.allAdAreaTreeList,e),a=[];return"全部区域"===t?["全部区域"]:(t.forEach((function(t){if(o.c.test(t.children[0]))a.push("".concat(t[e]));else{var n="".concat(t[e],"：[");t.children.forEach((function(t,a){a>0&&(n+="、"),o.c.test(t.children[0])?n+="".concat(t[e],"全部区域 "):(n+="".concat(t[e],": "),t.children.forEach((function(t,a){n+=0===a?"".concat(t[e]):"、".concat(t[e])})))})),n+=" ]",a.push(n)}})),a)},ExpressCheckAll:{get:function(){return this.SchemaItemData.ExpressList.length>0&&this.SchemaItemData.ExpressList.length===this.subExpressList.length},set:function(e){var t=e?this.subExpressList:[];this.$store.commit("timelimit/changeSchemaItemData",["ExpressList",t])}},ExpressCheckList:{get:function(){return this.SchemaItemData.ExpressList.map((function(e){return e.ID}))},set:function(e){var t=e.map((function(e){return{ID:e}}));this.$store.commit("timelimit/changeSchemaItemData",["ExpressList",t])}},LatestPayTime:{get:function(){if(!this.SchemaItemData)return"";var e=this.SchemaItemData.LatestPayTime,t=e.First,a=e.Second;if(!t&&0!==t||!a&&0!==a)return"";var n="0".concat(t).slice(-2),i="0".concat(a).slice(-2);return"".concat(n,":").concat(i)},set:function(e){if(e){var t=e.split(":"),a=Object(r.a)(t,2),n=a[0],i=a[1];this.$store.commit("timelimit/changeSchemaItemData",["LatestPayTime",{First:n,Second:i}])}}},isIndeterminate:function(){return 0!==this.SchemaItemData.ExpressList.length&&this.subExpressList.length!==this.SchemaItemData.ExpressList.length&&this.SchemaItemData.ExpressList.length<this.subExpressList.length},defaultCheckedKeys:function(){return this.SellAreaArray.map((function(e){return e.CountyID}))},DurationDay:{get:function(){return this.SchemaItemData?this.SchemaItemData.ProduceDurationDay:""},set:function(e){var t=e.replace(/[^\d]/g,"");this.$store.commit("timelimit/changeSchemaItemData",["ProduceDurationDay",t]);var a=this.SchemaItemData.ProduceDuration?Math.floor(this.SchemaItemData.ProduceDuration%24):0;this.$store.commit("timelimit/changeSchemaItemData",["ProduceDuration",+a+24*+t])}},DurationHour:{get:function(){return this.SchemaItemData?this.SchemaItemData.ProduceDurationHour:""},set:function(e){var t=e.replace(/[^\d]/g,"");t>=24&&(t=23),this.$store.commit("timelimit/changeSchemaItemData",["ProduceDurationHour",t]);var a=this.SchemaItemData.ProduceDuration?Math.floor(this.SchemaItemData.ProduceDuration/24):0;this.$store.commit("timelimit/changeSchemaItemData",["ProduceDuration",24*+a+ +t])}},DeliveryDurationDay:{get:function(){return this.SchemaItemData?this.SchemaItemData.DeliveryDurationDay:""},set:function(e){var t=e.replace(/[^\d]/g,"");this.$store.commit("timelimit/changeSchemaItemData",["DeliveryDurationDay",t]);var a=this.SchemaItemData.DeliveryDuration?Math.floor(this.SchemaItemData.DeliveryDuration%24):0;this.$store.commit("timelimit/changeSchemaItemData",["DeliveryDuration",+a+24*+t])}},DeliveryDurationHour:{get:function(){return this.SchemaItemData?this.SchemaItemData.DeliveryDurationHour:""},set:function(e){var t=e.replace(/[^\d]/g,"");t>=24&&(t=23),this.$store.commit("timelimit/changeSchemaItemData",["DeliveryDurationHour",t]);var a=this.SchemaItemData.DeliveryDuration?Math.floor(this.SchemaItemData.DeliveryDuration/24):0;this.$store.commit("timelimit/changeSchemaItemData",["DeliveryDuration",24*+a+ +t])}},ProductIncrement:{get:function(){return this.SchemaItemData?this.SchemaItemData.ProductIncrement:""},set:function(e){var t=e.replace(/[^\d]/g,"");this.$store.commit("timelimit/changeSchemaItemData",["ProductIncrement",t])}},IncludeExpress:{get:function(){return this.SchemaItemData?this.SchemaItemData.IncludeExpress:0},set:function(e){this.$store.commit("timelimit/changeSchemaItemData",["IncludeExpress",e])}},ProductIncrementDuration:{get:function(){return this.SchemaItemData?this.SchemaItemData.ProductIncrementDuration:""},set:function(e){var t=e.replace(/[^\d]/g,"");this.$store.commit("timelimit/changeSchemaItemData",["ProductIncrementDuration",t])}},CraftPeriodType:{get:function(){return this.SchemaItemData?this.SchemaItemData.CraftPeriodType:0},set:function(e){this.$store.commit("timelimit/changeSchemaItemData",["CraftPeriodType",e])}},CraftIncrement:{get:function(){return this.SchemaItemData?this.SchemaItemData.CraftIncrement:0},set:function(e){var t=e.replace(/[^\d]/g,"");this.$store.commit("timelimit/changeSchemaItemData",["CraftIncrement",t])}},CraftIncrementDuration:{get:function(){return this.SchemaItemData?this.SchemaItemData.CraftIncrementDuration:0},set:function(e){var t=e.replace(/[^\d]/g,"");this.$store.commit("timelimit/changeSchemaItemData",["CraftIncrementDuration",t])}},Level2AreaList:function(){return 0===this.adAreaList.length?[]:this.adAreaList.filter((function(e){return 2===e.Level}))},allSubAreaList:function(){if(this.allAdAreaTreeList&&this.allAdAreaTreeList.length>0){var e=[];return this.allAdAreaTreeList.forEach((function(t){t.children.forEach((function(a){a.children.forEach((function(n){var i={RegionalID:t.ID,CityID:a.ID,CountyID:n.ID};e.push(i)}))}))})),e}return[]},defaultBeginTime:function(){return new Date(new Date(new Date((new Date).setHours(20)).setMinutes(0)).setSeconds(0))},subExpressIDList:function(){return this.subExpressList&&0!==this.subExpressList.length?this.subExpressList.map((function(e){return e.ID})):[]},PropertyList:function(){return this.TimeLimitData&&this.TimeLimitData.SchemaPropertyList||[]}}),data:function(){return{loading:!0,IncludeLimitArea:!0,SellAreaArray:[],showAddressDialog:!1}},methods:{onAreaBtnClick:function(){this.SellAreaArray=this.SchemaItemData.AreaList,this.IncludeLimitArea=this.SchemaItemData.IncludeLimitArea,this.showAddressDialog=!0},handleAreaDialogClose:function(){this.showAddressDialog=!1,this.$refs.TreeComp.clearTreeData()},handleAreaChangeFunc:function(e){var t=this,a=e.filter((function(e){return 2===e.Level})),n=e.filter((function(e){return 3===e.Level})).map((function(e){var n=e.ParentID,i=a.find((function(e){return e.ID===n}));i||(i=t.Level2AreaList.find((function(e){return e.ID===n})));var r=i?i.ParentID:"";return{CountyID:e.ID,CityID:n,RegionalID:r}}));this.SellAreaArray=n},handleAreaDialogSave:function(){var e=this;if(this.showAddressDialog)if(0===this.SellAreaArray.length&&this.IncludeLimitArea)this.messageBox.failSingleError("保存失败","[ 未选择区域 ]");else if(this.SellAreaArray.length<=2e3)this.setSchemaItemData(this.SellAreaArray,this.IncludeLimitArea);else{this.messageBox.warnCancelBox("当前生效方式区域选中较多!","点击确定系统将会自动切换相反生效方式",(function(){var t=e.getContraryAreaList(e.SellAreaArray);e.setSchemaItemData(t,!e.IncludeLimitArea)}))}},setSchemaItemData:function(e,t){this.$store.commit("timelimit/changeSchemaItemData",["AreaList",e]),this.$store.commit("timelimit/changeSchemaItemData",["IncludeLimitArea",t]),this.handleAreaDialogClose()},getContraryAreaList:function(e){if(!e||0===e.length)return[];var t=e.map((function(e){return e.CountyID}));return this.allSubAreaList.filter((function(e){return!t.includes(e.CountyID)}))},onSubmitClick:function(){var e=this,t=m.a.check(this.SchemaItemData);if(!0===t){var a=this.$refs.oLeftComp.getConditonResult();if(!a)return;this.$store.commit("timelimit/changeSchemaItemData",["Constraint",a.Constraint]);var n=[];"new"!==this.$route.params.EditIndex?(n=Object(i.a)(this.TimeLimitData.SchemaList)).splice(this.$route.params.EditIndex,1,this.SchemaItemData):n=[this.SchemaItemData].concat(Object(i.a)(this.TimeLimitData.SchemaList)),n=n.map((function(t){var a=t.ExpressList.filter((function(t){return e.subExpressIDList.includes(t.ID)}));return Object(s.a)({},t,{ExpressList:a})})),this.$store.commit("timelimit/setTimeLimitData",["SchemaList",n]),this.onGoBackClick()}else"string"==typeof t&&this.messageBox.failSingleError("保存失败","[ ".concat(t," ]"))},onGoBackClick:function(){this.$goback()},getSchemaPropertyList:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.TimeLimitData.SchemaPropertyList&&0!==e.TimeLimitData.SchemaPropertyList.length){t.next=8;break}return a=e.TimeLimitData.ProductList,n={UseModule:41},1===a.length&&(n.ProductID=a[0].ID),t.next=6,f.d.getPropertyList(n);case 6:(i=t.sent)&&e.$store.commit("timelimit/setTimeLimitData",["SchemaPropertyList",i]);case 8:e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.TimeLimitData&&this.TimeLimitData.ProductList&&0!==this.TimeLimitData.ProductList.length?this.getSchemaPropertyList():this.onGoBackClick()}},D=(a("6df8"),a("2877")),v=Object(D.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?e._e():a("section",{staticClass:"mp-erp-timelimit-page-schema-item-set-page-wrap"},[a("ContionCommonComp",{ref:"oLeftComp",attrs:{PropertyList:e.PropertyList,ComparePropertyList:e.PropertyList,showPriority:!1,leftWidth:"40%",leftText:"其它条件：",curEditData:e.SchemaItemData,rightTitle:" "},scopedSlots:e._u([{key:"leftHeader",fn:function(){return[a("section",{staticClass:"top"},[a("div",[a("span",{staticClass:"title"},[e._v("指定区域：")]),a("div",{staticClass:"content-item"},[a("span",{staticClass:"blue-span",on:{click:e.onAreaBtnClick}},[e._v("选择区域")]),e.areaShowTextArr&&e.areaShowTextArr.length>0?a("span",[e._v(" [ "),e.SchemaItemData.IncludeLimitArea?a("i",{staticClass:"is-success"},[e._v("只限右侧区域生效")]):a("i",{staticClass:"is-pink"},[e._v("排除右侧已选区域")]),e._v(" ] -- ")]):e._e(),e.areaShowTextArr&&e.areaShowTextArr.length>0?a("el-tooltip",{attrs:{placement:"top-start",enterable:!1,transition:"none"}},[a("div",{attrs:{slot:"content"},slot:"content"},e._l(e.areaShowTextArr,(function(t,n){return a("p",{key:t+"-"+n},[e._v(" "+e._s(t)+" ")])})),0),a("span",[e._v(e._s(e.areaShowTextArr.join("、")))])]):e._e(),e.areaShowTextArr&&0===e.areaShowTextArr.length&&!e.SchemaItemData.IncludeLimitArea?a("span",[e._v(" 全部区域生效 ")]):e._e()],1)]),a("div",[a("span",{staticClass:"title"},[e._v("配送方式：")]),e.subExpressList.length>0?a("div",{staticClass:"content-item"},[a("p",[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},model:{value:e.ExpressCheckAll,callback:function(t){e.ExpressCheckAll=t},expression:"ExpressCheckAll"}},[e._v("全选")])],1),a("el-checkbox-group",{model:{value:e.ExpressCheckList,callback:function(t){e.ExpressCheckList=t},expression:"ExpressCheckList"}},e._l(e.subExpressList,(function(t){return a("el-checkbox",{key:t.ID,attrs:{label:t.ID}},[e._v(e._s(t.Name))])})),1)],1):e._e()]),a("div",[a("span",{staticClass:"title"},[e._v("付款时间：")]),a("div",{staticClass:"content-item"},[a("el-time-picker",{attrs:{editable:!1,"value-format":"HH:mm","picker-options":{format:"HH:mm"},"default-value":e.defaultBeginTime,placeholder:"20:00"},model:{value:e.LatestPayTime,callback:function(t){e.LatestPayTime=t},expression:"LatestPayTime"}}),a("span",[e._v("之前")])],1)])])]},proxy:!0}],null,!1,2297826381)},[a("section",{staticClass:"right-area"},[a("div",[a("span",{staticClass:"title"},[e._v("生产工期：")]),a("div",{staticClass:"content-item"},[a("el-input",{model:{value:e.DurationDay,callback:function(t){e.DurationDay=t},expression:"DurationDay"}}),a("span",[e._v("天")]),a("el-input",{attrs:{max:24},model:{value:e.DurationHour,callback:function(t){e.DurationHour=t},expression:"DurationHour"}}),a("span",[e._v("小时")])],1)]),a("div",[a("span",{staticClass:"title"},[a("i",[e._v("( 选填 ) ")]),e._v("数量递增：")]),a("div",{staticClass:"content-item"},[a("span",[e._v("产品数量每增加")]),a("el-input",{model:{value:e.ProductIncrement,callback:function(t){e.ProductIncrement=t},expression:"ProductIncrement"}}),a("span",[e._v("工期增加")]),a("el-input",{model:{value:e.ProductIncrementDuration,callback:function(t){e.ProductIncrementDuration=t},expression:"ProductIncrementDuration"}}),a("span",[e._v("小时")])],1)]),a("div",[a("span",{staticClass:"title"},[e._v("工艺工期：")]),a("div",{staticClass:"content-item"},[a("p",[a("el-radio-group",{model:{value:e.CraftPeriodType,callback:function(t){e.CraftPeriodType=t},expression:"CraftPeriodType"}},[a("el-radio",{attrs:{label:0}},[e._v("不额外增加")]),a("el-radio",{attrs:{label:1}},[e._v("累加工艺工期")]),a("el-radio",{attrs:{label:2}},[e._v("仅增加最长工艺工期")]),a("el-radio",{attrs:{label:3}},[e._v("按工艺种类递增")])],1)],1),3===e.CraftPeriodType?a("p",[a("span",[e._v("每增加")]),a("el-input",{model:{value:e.CraftIncrement,callback:function(t){e.CraftIncrement=t},expression:"CraftIncrement"}}),e._v("种工艺， "),a("span",[e._v("工期增加")]),a("el-input",{model:{value:e.CraftIncrementDuration,callback:function(t){e.CraftIncrementDuration=t},expression:"CraftIncrementDuration"}}),a("span",[e._v("小时")])],1):e._e()])]),a("div",[a("span",{staticClass:"title"},[e._v("运送时间：")]),a("div",{staticClass:"content-item"},[a("el-radio",{attrs:{label:!0},model:{value:e.IncludeExpress,callback:function(t){e.IncludeExpress=t},expression:"IncludeExpress"}},[e._v("有运送时间")]),a("el-radio",{attrs:{label:!1},model:{value:e.IncludeExpress,callback:function(t){e.IncludeExpress=t},expression:"IncludeExpress"}},[e._v("无运送时间")])],1)]),e.IncludeExpress?a("div",{staticClass:"delivery-set-box"},[a("span",{staticClass:"title"},[e._v("配送工期：")]),a("div",{staticClass:"content-item"},[a("el-input",{model:{value:e.DeliveryDurationDay,callback:function(t){e.DeliveryDurationDay=t},expression:"DeliveryDurationDay"}}),a("span",[e._v("天")]),a("el-input",{attrs:{max:24},model:{value:e.DeliveryDurationHour,callback:function(t){e.DeliveryDurationHour=t},expression:"DeliveryDurationHour"}}),a("span",[e._v("小时")])],1)]):e._e()])]),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"mp-img-style-header area-dialog-wrap",attrs:{title:"选择区域",visible:e.showAddressDialog,width:"750px",modal:!1,top:"8vh","before-close":e.handleAreaDialogClose},on:{"update:visible":function(t){e.showAddressDialog=t}}},[e.showAddressDialog?a("section",[a("div",{staticClass:"mp-switch"},[a("span",{class:e.IncludeLimitArea?"active":"",on:{click:function(){return e.IncludeLimitArea=!0}}},[e._v("生效选中区域")]),a("span",{class:e.IncludeLimitArea?"":"active",on:{click:function(){return e.IncludeLimitArea=!1}}},[e._v("生效不选中区域")])]),a("tree-comp",{ref:"TreeComp",attrs:{title:"行政区域",treeList:e.allAdAreaTreeList,defaultCheckedKeys:e.defaultCheckedKeys,handleChangeFunc:e.handleAreaChangeFunc,checkAllTitle:"所有地区",defaultProps:{children:"children",label:"Name"}}})],1):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("normal-btn-full",{attrs:{title:"确定"},nativeOn:{click:function(t){return e.handleAreaDialogSave(t)}}}),a("normalBtn",{attrs:{title:"取消"},nativeOn:{click:function(t){return e.handleAreaDialogClose(t)}}})],1)]),a("footer",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitClick}},[e._v("确定")]),a("el-button",{on:{click:e.onGoBackClick}},[a("i",{staticClass:"el-icon-d-arrow-left"}),e._v(" 返回")])],1)],1)}),[],!1,null,null,null);t.default=v.exports},bb2f:function(e,t,a){var n=a("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},e668:function(e,t,a){"use strict";var n=a("24de");a.n(n).a},edeb:function(e,t,a){"use strict";var n={props:{title:{type:String,default:"关闭"}}},i=(a("e668"),a("2877")),r=Object(i.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"normal-btn"},[e._v(e._s(e.title))])}),[],!1,null,null,null);t.a=r.exports},f183:function(e,t,a){var n=a("d012"),i=a("861d"),r=a("5135"),s=a("9bf2").f,c=a("90e3"),l=a("bb2f"),o=c("meta"),u=0,h=Object.isExtensible||function(){return!0},d=function(e){s(e,o,{value:{objectID:"O"+ ++u,weakData:{}}})},m=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,o)){if(!h(e))return"F";if(!t)return"E";d(e)}return e[o].objectID},getWeakData:function(e,t){if(!r(e,o)){if(!h(e))return!0;if(!t)return!1;d(e)}return e[o].weakData},onFreeze:function(e){return l&&m.REQUIRED&&h(e)&&!r(e,o)&&d(e),e}};n[o]=!0}}]);