(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-07a4ab0c"],{"0e4a":function(e,t,i){},"2d13":function(e,t,i){"use strict";var a=i("f33a");i.n(a).a},"32ea":function(e,t,i){"use strict";i.r(t);var a=i("5530"),s=i("57d5"),n=i("2f62"),r=(i("99af"),i("4de4"),i("7db0"),i("a15b"),i("d81d"),i("3835")),c=(i("96cf"),i("1da1")),o=i("2387"),l=(i("d3b7"),i("25f0"),i("d4ec")),u=i("ade3"),m=function e(t){if(Object(l.a)(this,e),Object(u.a)(this,"ID",""),Object(u.a)(this,"Name",""),Object(u.a)(this,"ProductID",""),Object(u.a)(this,"IsOwnPrice",!0),Object(u.a)(this,"BasePriceID",""),Object(u.a)(this,"ReferencePriceList",[]),Object(u.a)(this,"NumberSwapList",[]),Object(u.a)(this,"MakeupList",[]),Object(u.a)(this,"CostList",[]),Object(u.a)(this,"SolutionList",[]),Object(u.a)(this,"ResultList",[]),Object(u.a)(this,"IsIncludeIncreasedArea",!1),Object(u.a)(this,"AreaList",[]),Object(u.a)(this,"IsIncludeIncreasedGrade",!1),Object(u.a)(this,"GradeList",[]),t&&"[object Object]"===Object.prototype.toString.call(t)){var i=t.ID,a=t.Name,s=t.ProductID,n=t.IsOwnPrice,r=t.BasePriceID,c=t.ReferencePriceList,o=t.NumberSwapList,m=t.MakeupList,p=t.CostList,d=t.SolutionList,h=t.ResultList,f=t.IsIncludeIncreasedArea,P=t.AreaList,g=t.GradeList,v=t.IsIncludeIncreasedGrade;i&&(this.ID=i),a&&(this.Name=a),s&&(this.ProductID=s),"boolean"==typeof n&&(this.IsOwnPrice=n),r&&(this.BasePriceID=r),c&&c.length>0&&(this.ReferencePriceList=c),o&&o.length>0&&(this.NumberSwapList=o),m&&m.length>0&&(this.MakeupList=m),p&&p.length>0&&(this.CostList=p),d&&d.length>0&&(this.SolutionList=d),h&&h.length>0&&(this.ResultList=h),f&&(this.IsIncludeIncreasedArea=f),P&&P.length>0&&(this.AreaList=P),g&&g.length>0&&(this.GradeList=g),v&&(this.IsIncludeIncreasedGrade=v)}},p=i("bc5c"),d=(i("caad"),i("2532"),i("ad32")),h=i("2adb"),f={props:{selectedID:{type:String,default:""}},computed:Object(a.a)({},Object(n.e)("priceManage",["ApplyRangeTemplateList"])),data:function(){return{visible:!1}},methods:{onSelectClick:function(e){this.$emit("select",e),this.visible=!1}}},P=(i("7a66"),i("2877")),g=Object(P.a)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-popover",{attrs:{placement:"right-start",width:"330","popper-class":"mp-erp-price-manage-price-save-range-temp-select-wrap mp-scroll-wrap"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("div",{staticClass:"content"},[e._l(e.ApplyRangeTemplateList,(function(t){return i("div",{key:t.ID},[i("span",{class:{active:e.selectedID===t.ID},on:{click:function(i){return e.onSelectClick(t)}}},[e._v(e._s(t.Name))])])})),e.ApplyRangeTemplateList&&0!==e.ApplyRangeTemplateList.length?e._e():i("div",{staticClass:"empty"},[i("p",{staticClass:"tips-box is-pink"},[i("i",{staticClass:"el-icon-warning"}),e._v(" 暂无模板，请先添加！")])])],2),i("span",{staticClass:"blue-span is-font-size-12",attrs:{slot:"reference"},slot:"reference"},[e._v("选择模板")])])}),[],!1,null,null,null).exports,v={props:{visible:{type:Boolean,default:!1},EditData:{type:Object,default:null},productTitle:{type:String,default:""},OpenType:{type:String,default:"save"}},components:{CommonDialogComp:d.a,NewAreaTreeSpreadComp:h.a,RangeTemplateSelector:g},computed:Object(a.a)({},Object(n.c)("common",["allAreaTreeList"]),{},Object(n.e)("common",["userRankListNoneEmpty"])),data:function(){return{title:"添加价格",ruleForm:{ID:"",Name:"",Range:{IsIncludeIncreased:!1,List:[]},GradeList:[]},selectedTempID:""}},methods:{onSubmit:function(){if(this.formDataChecker()){var e=this.ruleForm,t=e.ID,i=e.Name,a=e.Range,s=e.GradeList,n=a.IsIncludeIncreased,r={ID:t,Name:i,AreaList:a.List,IsIncludeIncreasedArea:n,GradeList:this.userRankListNoneEmpty.filter((function(e){return s.includes(e.CategoryID)})).map((function(e){return{ID:e.CategoryID,Name:e.CategoryName}}))};this.$emit("submit",r)}},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){},initEditData:function(){this.title=this.EditData?"编辑价格":"添加价格","copy"===this.OpenType&&(this.title="拷贝价格");var e=this.EditData?this.EditData.ID:"",t=this.EditData?this.EditData.Name:"",i=!!this.EditData&&this.EditData.IsIncludeIncreasedArea,a=this.EditData?this.EditData.AreaList:[],s=this.EditData?this.EditData.GradeList.map((function(e){return e.ID})):[];this.ruleForm.ID=e,this.ruleForm.Name=t,this.ruleForm.Range.IsIncludeIncreased=i,this.ruleForm.Range.List=a,this.ruleForm.GradeList=s},formDataChecker:function(){return this.ruleForm.Name?!!(0!==this.ruleForm.Range.List.length||this.ruleForm.Range.IsIncludeIncreased||this.ruleForm.GradeList&&0!==this.ruleForm.GradeList.length)||(this.messageBox.failSingleError("保存失败","适用区域与适用等级价格必须至少要选择一种"),!1):(this.messageBox.failSingleError("保存失败","请输入价格名称"),!1)},handleRabfeTempSelect:function(e){if(e){var t=e.ID,i=e.AreaList,a=e.IsIncludeIncreasedArea;this.ruleForm.Range.IsIncludeIncreased=a,this.ruleForm.Range.List=i,this.selectedTempID=t}}}},b=(i("e203"),Object(P.a)(v,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CommonDialogComp",{staticClass:"mp-erp-comps-price-module-price-item-save-dialog-comp-wrap",attrs:{width:"800px",top:"8vh",title:e.title,visible:e.visible},on:{"update:visible":function(t){e.visible=t},submit:e.onSubmit,cancle:e.onCancle,open:e.onOpen,closed:e.onClosed}},[i("div",{staticClass:"header"},[i("p",[i("span",{staticClass:"label"},[e._v("产品：")]),i("span",[e._v(e._s(e.productTitle))])]),i("p",[i("span",{staticClass:"label"},[e._v("分组名称：")]),i("el-input",{attrs:{size:"small",maxlength:"10","show-word-limit":""},model:{value:e.ruleForm.Name,callback:function(t){e.$set(e.ruleForm,"Name","string"==typeof t?t.trim():t)},expression:"ruleForm.Name"}})],1)]),i("div",{staticClass:"content"},[i("p",{staticClass:"mp-common-title-wrap"},[i("span",[e._v("适用区域")]),i("RangeTemplateSelector",{attrs:{selectedID:e.selectedTempID},on:{select:e.handleRabfeTempSelect}})],1),i("NewAreaTreeSpreadComp",{attrs:{list:e.allAreaTreeList},model:{value:e.ruleForm.Range,callback:function(t){e.$set(e.ruleForm,"Range",t)},expression:"ruleForm.Range"}}),i("p",{staticClass:"mp-common-title-wrap",staticStyle:{"margin-top":"25px"}},[i("span",[e._v("适用等级价格")])]),i("el-checkbox-group",{model:{value:e.ruleForm.GradeList,callback:function(t){e.$set(e.ruleForm,"GradeList",t)},expression:"ruleForm.GradeList"}},e._l(e.userRankListNoneEmpty,(function(t){return i("el-checkbox",{key:t.CategoryID,attrs:{label:t.CategoryID}},[e._v(e._s(t.CategoryName))])})),1)],1),i("div",{staticClass:"footer"},[i("p",{staticClass:"tips-box is-pink"},[i("i",{staticClass:"el-icon-warning"}),e._v("注：新加区域指后续如果有新增加的区域是否自动适用。选中则自动适用，不选中则不会自动适用。")])])])}),[],!1,null,null,null)).exports,I={props:{visible:{type:Boolean,default:!1},curPrice:{type:Object,default:null},PriceList:{type:Array,default:function(){return[]}},productTitle:{type:String,default:""}},components:{CommonDialogComp:d.a},data:function(){return{title:"添加价格",ruleForm:{ID:"",ProductID:"",IsOwnPrice:!0,BasePriceID:"",ReferencePriceList:[]}}},computed:{curSelectedPrice:function(){var e=this;return this.PriceList&&0!==this.PriceList.length&&this.ruleForm.BasePriceID&&this.PriceList.find((function(t){return t.ID===e.ruleForm.BasePriceID}))||null},canSelectPriceList:function(){var e=this;return this.PriceList&&0!==this.PriceList.length?this.PriceList.filter((function(t){return t.IsOwnPrice&&t.ID!==e.curPrice.ID})):[]},disabled:function(){return!(this.ruleForm.IsOwnPrice||0!==this.canSelectPriceList.length&&this.curSelectedPrice&&0!==this.ruleForm.ReferencePriceList.length)}},methods:{onSubmit:function(){this.formDataChecker()&&this.$emit("submit",this.ruleForm)},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){},initEditData:function(){if(this.curPrice){var e=this.curPrice,t=e.ID,i=e.ProductID,a=e.IsOwnPrice,s=e.BasePriceID,n=e.ReferencePriceList;this.ruleForm.ID=t,this.ruleForm.ProductID=i,this.ruleForm.IsOwnPrice=a,this.ruleForm.BasePriceID=s,this.ruleForm.ReferencePriceList=n}},formDataChecker:function(){var e=this;if(this.ruleForm.IsOwnPrice)return!0;if(this.PriceList.filter((function(e){return!e.IsOwnPrice})).map((function(e){return e.BasePriceID})).includes(this.ruleForm.ID))return this.messageBox.failSingleError("保存失败","当前价格已被其它价格条目引用为基础价格"),!1;if(!this.ruleForm.BasePriceID)return this.messageBox.failSingleError("保存失败","请选择基础价格"),!1;if(0===this.ruleForm.ReferencePriceList.length)return this.messageBox.failSingleError("保存失败","请设置价格比例"),!1;var t=this.ruleForm.ReferencePriceList.find((function(t){return!e.$utils.getValueIsOrNotNumber(t.Percent)}));return t?(this.messageBox.failSingleError("保存失败","价格比例不能为空且必须为数字"),!1):(t=this.ruleForm.ReferencePriceList.find((function(e){return e.Percent<0})))?(this.messageBox.failSingleError("保存失败","价格比例不能小于0"),!1):!(t=this.ruleForm.ReferencePriceList.find((function(e){return e.Percent>100})))||(this.messageBox.failSingleError("保存失败","价格比例不能大于100%"),!1)}},watch:{curSelectedPrice:{handler:function(e){this.visible&&e&&(Array.isArray(e.SolutionList)?e.ID!==this.curPrice.BasePriceID?this.ruleForm.ReferencePriceList=e.SolutionList.map((function(e){return{Solution:{ID:e.ID,Name:e.Name},Percent:""}})):this.ruleForm.ReferencePriceList=this.curPrice.ReferencePriceList:this.ruleForm.ReferencePriceList=[])}}}},D=(i("2d13"),Object(P.a)(I,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CommonDialogComp",{staticClass:"mp-erp-comps-price-module-price-is-own-price-set-dialog-comp-wrap",attrs:{width:"800px",top:"8vh",title:"设置报价方式",visible:e.visible,disabled:e.disabled},on:{"update:visible":function(t){e.visible=t},submit:e.onSubmit,cancle:e.onCancle,open:e.onOpen,closed:e.onClosed}},[e.curPrice?i("div",{staticClass:"header"},[i("p",[i("span",{staticClass:"label"},[e._v("产品名称：")]),i("span",[e._v(e._s(e.productTitle))])]),i("p",[i("span",{staticClass:"label"},[e._v("价格名称：")]),i("span",[e._v(e._s(e.curPrice.Name))])])]):e._e(),e.curPrice?i("el-radio-group",{model:{value:e.ruleForm.IsOwnPrice,callback:function(t){e.$set(e.ruleForm,"IsOwnPrice",t)},expression:"ruleForm.IsOwnPrice"}},[i("el-radio",{attrs:{label:!0}},[e._v("单独设置")]),i("el-radio",{attrs:{label:!1}},[e._v("按比列算价")])],1):e._e(),e.curPrice?i("div",{directives:[{name:"show",rawName:"v-show",value:!e.ruleForm.IsOwnPrice,expression:"!ruleForm.IsOwnPrice"}],staticClass:"content"},[i("p",{staticClass:"mp-common-title-wrap"},[i("span",[e._v("选择基础价格")])]),i("el-radio-group",{model:{value:e.ruleForm.BasePriceID,callback:function(t){e.$set(e.ruleForm,"BasePriceID",t)},expression:"ruleForm.BasePriceID"}},e._l(e.canSelectPriceList,(function(t){return i("el-radio",{key:t.ID,attrs:{label:t.ID}},[e._v(e._s(t.Name))])})),1),0===e.canSelectPriceList.length?i("div",{staticClass:"none-list"},[i("p",{staticClass:"tips-box remark is-pink"},[i("i",{staticClass:"el-icon-warning"}),e._v(" 无可用基础价格")])]):e._e(),e.curSelectedPrice?[i("p",{staticClass:"mp-common-title-wrap",staticStyle:{"margin-top":"25px"}},[i("span",[e._v("设置比例")])]),i("div",{staticClass:"result mp-scroll-wrap"},[e.curSelectedPrice.SolutionList&&0!==e.curSelectedPrice.SolutionList.length?i("ul",e._l(e.ruleForm.ReferencePriceList,(function(t){return i("li",{key:t.Solution.ID},[i("span",[e._v(e._s(t.Solution.Name))]),i("span",[e._v("X")]),i("el-input",{model:{value:t.Percent,callback:function(i){e.$set(t,"Percent","string"==typeof i?i.trim():i)},expression:"it.Percent"}}),i("span",[e._v("%")])],1)})),0):i("p",{staticClass:"tips-box remark is-pink"},[i("i",{staticClass:"el-icon-warning"}),e._v(" 该基础价格无报价方案 ")])])]:e._e()],2):e._e()],1)}),[],!1,null,null,null)).exports,L={props:{itemData:{type:Object,default:null}},components:{TipsSpanButton:o.a,PriceItemSaveDialog:b,CtrlMenus:p.a,IsOwnPriceSetDialog:D},computed:Object(a.a)({},Object(n.c)("common",["twoLevelsProductClassify"]),{},Object(n.e)("priceManage",["condition4PriceManageList","needScrollToExtend"]),{ClassifyText:function(){if(!this.itemData)return"";var e=this.itemData.ClassifyList;return e&&Array.isArray(e)&&0!==e.length?e.map((function(e){return"".concat(e.FirstLevel.Name,"-").concat(e.SecondLevel.Name)})).join("，"):""},canSetPartList:function(){return this.itemData&&0!==this.itemData.PartList.length?this.itemData.PartList.filter((function(e){return e.UseTimes&&e.UseTimes.MaxValue>1})):[]},subConditionTitleText:function(){return this.canSetPartList.length>0?"":"仅有可多次使用的部件时才可设置子条件"},localPriceList:function(){var e=this;return this.itemData&&Array.isArray(this.itemData.PriceList)?this.itemData.PriceList.map((function(t){return Object(a.a)({},t,{ProportionName:e.getProportionName(t,e.itemData.PriceList)})})):[]}}),data:function(){return{extend:!1,curData:null,visible:!1,isOwnPriceVisible:!1,areaOpenType:"save"}},methods:{onExtendClick:function(){this.extend=!this.extend,this.extend?sessionStorage.setItem("lastExtendProductID4Price",this.itemData.ID):sessionStorage.removeItem("lastExtendProductID4Price")},onHeadrClick:function(){this.$emit("setActive",this.itemData.ID)},onPriceItemSaveClick:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"save";this.$store.dispatch("common/getAreaList"),this.$store.dispatch("common/getUserClassify"),this.$store.dispatch("priceManage/getApplyRangeTemplateList"),this.curData=e?JSON.parse(JSON.stringify(e)):null,this.areaOpenType=t,this.visible=!0},handleSubmit:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function i(){var s,n,r,c,o,l,u;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(s=e.Name,n=e.ID,!t.itemData.PriceList.find((function(e){return e.Name===s&&!(e.ID===n&&"save"===t.areaOpenType)}))){i.next=5;break}return t.messageBox.failSingleError("保存失败","已存在相同的价格名称"),i.abrupt("return");case 5:if(r=Object(a.a)({},e,{ProductID:t.itemData.ID}),"copy"!==t.areaOpenType){i.next=10;break}return c=function(){t.visible=!1,t.curData=null,sessionStorage.setItem("lastExtendProductID4Price",t.itemData.ID),t.$store.dispatch("priceManage/getPriceManageList",t.condition4PriceManageList.Page)},t.$store.dispatch("priceManage/getPriceItemCopy",[r,c]),i.abrupt("return");case 10:return i.next=12,t.api.getProductPriceSave(r).catch((function(){}));case 12:(o=i.sent)&&1e3===o.data.Status&&(l=n?"编辑成功":"添加成功",u=function(){if(e.ID){var i=Object(a.a)({},t.curData,{},r,{ID:o.data.Data});t.$store.commit("priceManage/setPriceItemSave",[i,"edit"])}else{var s=new m(Object(a.a)({},r,{ID:o.data.Data}));t.$store.commit("priceManage/setPriceItemSave",[s,"add"])}t.visible=!1,t.curData=null,t.extend=!0},t.messageBox.successSingle(l,u,u));case 14:case"end":return i.stop()}}),i)})))()},onPriceItemRemoveClick:function(e){var t=this;this.messageBox.warnCancelBox("确定删除该条价格吗?","价格名称：[ ".concat(e.Name," ]"),(function(){t.$store.dispatch("priceManage/getPriceItemRemove",e)}))},onIsOwnPriceSetClick:function(e){this.curData=e?JSON.parse(JSON.stringify(e)):null,this.isOwnPriceVisible=!0},IsOwnSetSubmitHandler:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=function(){t.isOwnPriceVisible=!1},t.$store.dispatch("priceManage/getPriceModeSetup",[e,a]);case 2:case"end":return i.stop()}}),i)})))()},getFullName:function(){var e=this.itemData,t=e.Name,i=e.ClassifyList,a="";if(i&&i.length>0){var s=Object(r.a)(i,1)[0].FirstLevel;s&&s.Name&&(a="".concat(s.Name," - "))}return a+=t},jumpToPage:function(e,t){var i={name:this.getFullName(),id:this.itemData.ID};t&&(i=Object(a.a)({},t,{},i)),this.$router.push({name:e,params:i})},onPriceItemSetMenuClick:function(e,t,i){this.$store.commit("priceManage/setCurPriceItem",e),this.jumpToPage(t,i)},getProportionName:function(e,t){var i=e.BasePriceID,a=e.IsOwnPrice,s=e.ReferencePriceList;if(a)return"";var n="未知价格",r="";if(i){var c=t.find((function(e){return e.ID===i}));n=c?c.Name:"未知价格"}return Array.isArray(s)&&(r=s.map((function(e){var t=e.Percent,i=e.Solution;return"".concat(i.Name," × ").concat(t,"%")})).join(" ")),"按 ".concat(n," ").concat(r," 计算")}},mounted:function(){var e=this,t=sessionStorage.getItem("lastExtendProductID4Price");t&&t===this.itemData.ID&&(this.extend=!0,this.$nextTick((function(){if(e.needScrollToExtend){var t=document.querySelector(".mp-erp-price-manage-table-comp-wrap");t.scrollTop=e.$refs.oWrap.offsetTop-t.offsetTop-10,e.$store.commit("priceManage/setNeedScrollToExtend",!1)}})))}},C=(i("5479"),Object(P.a)(L,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.itemData?i("section",{ref:"oWrap",staticClass:"mp-erp-price-manage-table-item-comp-wrap",class:e.extend?"extend":""},[i("header",{on:{click:e.onHeadrClick}},[i("div",{staticClass:"classify-box"},[i("span",{attrs:{title:e.ClassifyText}},[e._v(e._s(e.ClassifyText))])]),i("div",{staticClass:"title-box"},[i("span",{staticClass:"name",attrs:{title:e.itemData.Name}},[e._v(e._s(e.itemData.Name))])]),i("div",{staticClass:"price-count"},[i("span",[e._v(e._s(e.itemData.PriceList?e.itemData.PriceList.length:0)+"种报价")])]),i("div",{staticClass:"img-menu-box"},[i("span",{on:{click:function(t){return e.onPriceItemSaveClick(null)}}},[i("i"),e._v("添加价格 ")])]),i("div",{staticClass:"text-menu-box"},[i("TipsSpanButton",{attrs:{text:"拼版控制"},nativeOn:{click:function(t){return e.jumpToPage("MakeupCtrl")}}}),i("TipsSpanButton",{attrs:{disabled:0===e.canSetPartList.length,text:"子条件"},nativeOn:{click:function(t){return e.jumpToPage("subConditionList")}}}),i("TipsSpanButton",{attrs:{text:"计算公式"},nativeOn:{click:function(t){e.jumpToPage("PriceFormulaList",{timer:Date.now()})}}})],1),i("div",{staticClass:"extend-box",class:e.itemData.PriceList&&e.itemData.PriceList.length>0?"":"disabled",on:{click:e.onExtendClick}},[e.extend?i("span",[e._v("隐藏")]):i("span",[e._v("展开")]),e.extend?i("i",{staticClass:"el-icon-caret-top"}):i("i",{staticClass:"el-icon-caret-bottom"})])]),i("ul",e._l(e.localPriceList,(function(t){return i("li",{key:t.PartID},[i("div",{staticClass:"mode"},[i("span",{staticClass:"separate"},[t.IsOwnPrice?i("i",[e._v("单独设置")]):i("i",{attrs:{title:t.ProportionName}},[e._v(e._s(t.ProportionName)+" ")])]),i("TipsSpanButton",{attrs:{text:"设置报价方式"},nativeOn:{click:function(i){return e.onIsOwnPriceSetClick(t)}}})],1),t.IsOwnPrice?i("div",{staticClass:"menus"},[i("TipsSpanButton",{attrs:{text:"数值转换"},nativeOn:{click:function(i){return e.onPriceItemSetMenuClick(t,"NumberSwapList")}}}),i("TipsSpanButton",{attrs:{text:"拼版方案选择"},nativeOn:{click:function(i){return e.onPriceItemSetMenuClick(t,"MakeupSolutionSet")}}},[i("span",[e._v("拼版方案选择（"),i("i",{class:t.MakeupList.filter((function(e){return e.Solution})).length<7?"is-pink":""},[e._v(e._s(t.MakeupList.filter((function(e){return e.Solution})).length))]),e._v("/"+e._s(t.MakeupList?t.MakeupList.length:0)+"）")])]),i("TipsSpanButton",{attrs:{text:"工艺费"},nativeOn:{click:function(i){return e.onPriceItemSetMenuClick(t,"CraftPriceSetPage")}}}),i("TipsSpanButton",{attrs:{text:"价格表"},nativeOn:{click:function(i){return e.onPriceItemSetMenuClick(t,"QuotationList",{isQuotation:!0})}}},[i("span",{staticStyle:{"min-width":"75px"}},[e._v("价格表（"+e._s(t.PriceTableList?t.PriceTableList.length:0)+"）")])]),i("TipsSpanButton",{attrs:{text:"报价方案"},nativeOn:{click:function(i){e.onPriceItemSetMenuClick(t,"QuotationScheme",{timer:Date.now()})}}},[i("span",{staticStyle:{"min-width":"88px"}},[e._v("报价方案（"+e._s(t.SolutionList?t.SolutionList.length:0)+"）")])]),i("TipsSpanButton",{attrs:{text:"报价结果"},nativeOn:{click:function(i){return e.onPriceItemSetMenuClick(t,"QuotationResult")}}},[i("span",{class:{disabled:!t.SolutionList||0===t.SolutionList.length},staticStyle:{"min-width":"88px"}},[e._v("报价结果（"+e._s(t.ResultList?t.ResultList.length:0)+"）")])])],1):e._e(),i("div",{staticClass:"name"},[i("span",[e._v("价格名称：")]),i("span",{attrs:{title:t.Name}},[e._v(e._s(t.Name))])]),i("div",{staticClass:"date"},[i("span",[t.CreateTime?[e._v(e._s(e._f("format2LangTypeDate")(t.CreateTime)))]:[e._v("刚刚添加")]],2)]),i("div",{staticClass:"ctrl"},[i("CtrlMenus",{attrs:{showList:["edit","del","copy"]},on:{copy:function(i){return e.onPriceItemSaveClick(t,"copy")},edit:function(i){return e.onPriceItemSaveClick(t)},remove:function(i){return e.onPriceItemRemoveClick(t)}}})],1)])})),0),i("PriceItemSaveDialog",{attrs:{productTitle:e.itemData.Name,visible:e.visible,EditData:e.curData,OpenType:e.areaOpenType},on:{"update:visible":function(t){e.visible=t},submit:e.handleSubmit}}),i("IsOwnPriceSetDialog",{attrs:{productTitle:e.itemData.Name,visible:e.isOwnPriceVisible,curPrice:e.curData,PriceList:e.itemData.PriceList},on:{"update:visible":function(t){e.isOwnPriceVisible=t},submit:e.IsOwnSetSubmitHandler}})],1):e._e()}),[],!1,null,null,null)).exports,S={props:{listData:{type:Array,default:function(){return[]}}},components:{PriceTableItemComp:C},computed:Object(a.a)({},Object(n.e)("priceManage",["isPriceDataLoading"])),data:function(){return{activeID:""}},methods:{setActive:function(e){this.activeID=e}}},O=(i("edb5"),Object(P.a)(S,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"mp-erp-price-manage-table-comp-wrap"},[a("div",{staticClass:"content"},[e.isPriceDataLoading||0!==e.listData.length?e._e():a("div",{staticClass:"empty-box"},[a("img",{attrs:{src:i("5731"),alt:""}}),a("p",{staticClass:"is-font-size-12 is-gray"},[e._v("暂无产品")])]),e._l(e.listData,(function(t){return a("PriceTableItemComp",{key:t.ProductID,class:{active:e.activeID===t.ID},attrs:{itemData:t},on:{setActive:e.setActive}})}))],2)])}),[],!1,null,null,null)).exports,k=i("8aa1"),x=i("ebb2"),_={name:"PriceManageListPage",components:{SearchInputComp:s.a,PriceTableComp:O,Count:k.a,NewProductClassifySelectComp:x.a},computed:Object(a.a)({},Object(n.e)("priceManage",["condition4PriceManageList","PriceManageList","PriceManageListNumber","isPriceDataLoading"]),{ProductClass:{get:function(){return this.condition4PriceManageList.ProductClass},set:function(e){this.$store.commit("priceManage/setCondition4PriceManageList",[["ProductClass",""],e]),this.getPriceManageList()}},noPriceChecked:{get:function(){return this.condition4PriceManageList.NoPrice},set:function(e){this.$store.commit("priceManage/setCondition4PriceManageList",[["NoPrice",""],e]),this.getPriceManageList()}}}),data:function(){return{}},methods:{getPriceManageList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$store.dispatch("priceManage/getPriceManageList",e)},setObjForListData:function(e){this.$store.commit("priceManage/setCondition4PriceManageList",e)},clearCondition:function(){this.$store.commit("priceManage/clearCondition4PriceManageList")},handlePageChange:function(e){this.getPriceManageList(e)},jumpAreaTempPage:function(){this.$router.push("/AreaTemplate")},jumpMakeupRulePage:function(){this.$router.push("/MakeupRule")}},mounted:function(){this.getPriceManageList()}},y=(i("c46b"),Object(P.a)(_,(function(){var e=this,t=this,i=t.$createElement,a=t._self._c||i;return a("section",{staticClass:"mp-erp-product-price-manage-list-page-wrap"},[a("header",[a("div",{staticClass:"left"},[a("el-button",{staticClass:"mp-common-btn-styles",attrs:{type:"primary"},on:{click:t.jumpAreaTempPage}},[t._v("适用范围模板")]),a("el-button",{staticClass:"mp-common-btn-styles",attrs:{type:"primary"},on:{click:t.jumpMakeupRulePage}},[t._v("拼版规则设置")]),a("NewProductClassifySelectComp",{model:{value:t.ProductClass,callback:function(e){t.ProductClass=e},expression:"ProductClass"}}),a("el-checkbox",{model:{value:t.noPriceChecked,callback:function(e){t.noPriceChecked=e},expression:"noPriceChecked"}},[t._v("仅显示无报价产品")])],1),a("search-input-comp",{staticClass:"search-section",attrs:{typeList:[["KeyWords",""]],title:"",placeholder:"请输入产品内部名称",requestFunc:t.getPriceManageList,changePropsFunc:t.setObjForListData,word:t.condition4PriceManageList.KeyWords,searchWatchKey:t.PriceManageList,resetWords:"清空所有筛选条件"},on:{reset:function(){return e.clearCondition()}}})],1),a("main",[a("PriceTableComp",{attrs:{listData:t.PriceManageList}})],1),a("footer",[a("Count",{attrs:{watchPage:t.condition4PriceManageList.Page,handlePageChange:t.handlePageChange,count:t.PriceManageListNumber,center:"",pageSize:t.condition4PriceManageList.PageSize}})],1)])}),[],!1,null,null,null));t.default=y.exports},"3e4a":function(e,t,i){},5479:function(e,t,i){"use strict";var a=i("938b");i.n(a).a},"7a66":function(e,t,i){"use strict";var a=i("b27c");i.n(a).a},"938b":function(e,t,i){},a39b:function(e,t,i){},b27c:function(e,t,i){},c46b:function(e,t,i){"use strict";var a=i("0e4a");i.n(a).a},e203:function(e,t,i){"use strict";var a=i("a39b");i.n(a).a},edb5:function(e,t,i){"use strict";var a=i("3e4a");i.n(a).a},f33a:function(e,t,i){}}]);