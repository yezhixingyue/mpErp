(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-03aa1875"],{"202f":function(t,e,a){"use strict";var n=a("6e42");a.n(n).a},2227:function(t,e,a){"use strict";var n=a("d319");a.n(n).a},"468e":function(t,e,a){"use strict";var n=a("4aae");a.n(n).a},"4aae":function(t,e,a){},"4d47":function(t,e,a){"use strict";var n=a("6385");a.n(n).a},5731:function(t,e){t.exports="data:image/png;base64,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"},6385:function(t,e,a){},"6e42":function(t,e,a){},ad32:function(t,e,a){"use strict";var n={model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},title:{type:String,default:"提示"},width:{default:"30%"},top:{type:String,default:"15vh"},showSubmit:{type:Boolean,default:!0},submitText:{type:String,default:"保存"},dangerText:{type:String,default:"重新生成"},cancelText:{type:String,default:"取消"},disabled:{type:Boolean,default:!1},showDanger:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},data:function(){return{checkList:[]}},methods:{onCancleClick:function(){this.$emit("cancle")},onSubmitClick:function(t){this.dialogVisible&&("BUTTON"===t.target.nodeName?t.target.blur():"BUTTON"===t.target.parentNode.nodeName&&t.target.parentNode.blur(),this.$emit("submit"))},onDangerClick:function(){this.$emit("danger")},onOpen:function(){this.$emit("open")},onOpened:function(){this.$emit("opened")},onClose:function(){this.$emit("close")},onClosed:function(){this.$emit("closed")}}},i=(a("468e"),a("2877")),s=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"mp-img-style-header mp-erp-common-dialog-comp-wrap",attrs:{title:t.title,visible:t.dialogVisible,"close-on-click-modal":!1,width:t.width,top:t.top,modal:!1,"before-close":t.onCancleClick},on:{"update:visible":function(e){t.dialogVisible=e},open:t.onOpen,opened:t.onOpened,close:t.onClose,closed:t.onClosed}},[t._t("default"),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.showSubmit?a("el-button",{attrs:{type:"primary",loading:t.loading,disabled:t.disabled},on:{click:t.onSubmitClick}},[t._v(t._s(t.loading?"加载中":t.submitText))]):t._e(),t.showDanger?a("el-button",{attrs:{type:"danger"},on:{click:t.onDangerClick}},[t._v(t._s(t.dangerText))]):t._e(),a("el-button",{on:{click:t.onCancleClick}},[t._v(t._s(t.cancelText))])],1)],2)}),[],!1,null,null,null);e.a=s.exports},d319:function(t,e,a){},ef42:function(t,e,a){"use strict";a.r(e);var n=(a("7db0"),a("c740"),a("a434"),a("96cf"),a("1da1")),i=a("5530"),s=a("2f62"),o=a("ad32"),r=a("2adb"),l={props:{visible:{type:Boolean,default:!1},EditData:{type:Object,default:null}},components:{CommonDialogComp:o.a,NewAreaTreeSpreadComp:r.a},computed:Object(i.a)({},Object(s.c)("common",["allAreaTreeList"]),{},Object(s.e)("common",["areaList"])),data:function(){return{title:"新建模板",ruleForm:{ID:"",Name:"",Range:{IsIncludeIncreased:!1,List:[]}}}},methods:{onSubmit:function(){if(this.formDataChecker()){var t=this.ruleForm,e=t.ID,a=t.Name,n=t.Range,i=n.IsIncludeIncreased,s={ID:e,Name:a,AreaList:n.List,IsIncludeIncreasedArea:i};this.$emit("submit",s)}},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){},initEditData:function(){this.title=this.EditData?"编辑模板":"新建模板";var t=this.EditData?this.EditData.ID:"",e=this.EditData?this.EditData.Name:"",a=!!this.EditData&&this.EditData.IsIncludeIncreasedArea,n=this.EditData?this.EditData.AreaList:[];this.ruleForm.ID=t,this.ruleForm.Name=e,this.ruleForm.Range.IsIncludeIncreased=a,this.ruleForm.Range.List=n},formDataChecker:function(){return this.ruleForm.Name?!(0===!this.ruleForm.Range.List.length&&!this.ruleForm.Range.IsIncludeIncreased&&(this.messageBox.failSingleError("保存失败","请选择适用区域"),1)):(this.messageBox.failSingleError("保存失败","请输入模板名称"),!1)}}},c=(a("2227"),a("2877")),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CommonDialogComp",{staticClass:"mp-erp-comps-price-module-area-template-save-dialog-comp-wrap",attrs:{width:"800px",top:"8vh",title:t.title,visible:t.visible},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[a("div",{staticClass:"header"},[a("span",{staticClass:"label"},[t._v("模板名称：")]),a("el-input",{attrs:{size:"small",maxlength:"10","show-word-limit":""},model:{value:t.ruleForm.Name,callback:function(e){t.$set(t.ruleForm,"Name","string"==typeof e?e.trim():e)},expression:"ruleForm.Name"}})],1),a("div",{staticClass:"content"},[a("p",{staticClass:"mp-common-title-wrap"},[t._v("适用区域")]),a("NewAreaTreeSpreadComp",{attrs:{list:t.allAreaTreeList},model:{value:t.ruleForm.Range,callback:function(e){t.$set(t.ruleForm,"Range",e)},expression:"ruleForm.Range"}})],1),a("div",{staticClass:"footer"},[a("p",{staticClass:"tips-box is-pink"},[a("i",{staticClass:"el-icon-warning"}),t._v("注：新加区域指后续如果有新增加的区域是否自动适用。选中则自动适用，不选中则不会自动适用。")])])])}),[],!1,null,null,null).exports,m=a("bc5c"),p=a("c31e"),d=(a("99af"),a("a15b"),a("d81d"),a("b0c0"),a("53ca")),f={props:{list:{}},computed:{showContent:function(){return"string"==typeof this.list?this.list:this.list.map((function(t){return"string"==typeof t?t:"object"===Object(d.a)(t)?"".concat(t.name,"：").concat(t.list.join("；")):""})).join("、")},tooltipList:function(){return"string"==typeof this.list?[this.list]:this.list}}},g=(a("4d47"),Object(c.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tooltip",{attrs:{effect:"light","popper-class":"common-property-condition-text-tips-box",placement:"bottom-start","visible-arrow":!1}},[a("div",{attrs:{slot:"content"},slot:"content"},t._l(t.tooltipList,(function(e,n){return a("div",{key:n},["string"==typeof e?a("p",[t._v(t._s(e))]):a("div",[a("p",[t._v(t._s(e.name)+"：")]),t._l(e.list,(function(e,n){return a("p",{key:n,staticClass:"mp-tree-table-tooltip-item"},[t._v(t._s(e)+"；")])}))],2)])})),0),a("div",{staticStyle:{"text-overflow":"ellipsis",overflow:"hidden"}},[t._v(" 适用区域："+t._s(t.showContent)+" ")])])}),[],!1,null,null,null)).exports,b={name:"AreaTemplate",components:{AreaTempSaveDialog:u,CtrlMenus:m.a,TableItemShowComp:g},data:function(){return{curEditData:null,visible:!1,dataList:[],loading:!0,allDataLoading:!0}},computed:Object(i.a)({},Object(s.c)("common",["allAreaTreeList"])),methods:{setAreaTemplateHandler:function(t){this.curEditData=t?JSON.parse(JSON.stringify(t)):null,this.visible=!0},onGobackClick:function(){this.$goback()},handleSubmit:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function a(){var n,s,o,r,l;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.Name,s=t.ID,!e.dataList.find((function(t){return t.Name===n&&t.ID!==s}))){a.next=5;break}return e.messageBox.failSingleError("保存失败","已存在相同的模板名称"),a.abrupt("return");case 5:return a.next=7,e.api.getApplyRangeTemplateSave(t).catch((function(){}));case 7:(o=a.sent)&&1e3===o.data.Status&&(r=t.ID?"编辑成功":"添加成功",l=function(){if(t.ID){var a=e.dataList.findIndex((function(e){return e.ID===t.ID}));a>-1&&e.dataList.splice(a,1,t)}else e.dataList.unshift(Object(i.a)({},t,{ID:o.data.Data}));e.visible=!1,e.curEditData=null,e.$store.commit("priceManage/setApplyRangeTemplateList",[[],!1])},e.messageBox.successSingle(r,l,l));case 9:case"end":return a.stop()}}),a)})))()},getDataList:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.getApplyRangeTemplateList().catch((function(){}));case 2:a=e.sent,t.loading=!1,a&&1e3===a.data.Status&&(t.dataList=a.data.Data);case 5:case"end":return e.stop()}}),e)})))()},onRemoveClick:function(t,e){var a=this;this.messageBox.warnCancelBox("确定删除该条范围模板吗","模板名称：[ ".concat(t.Name," ]"),(function(){a.getApplyRangeTemplateRemove(t,e)}))},getApplyRangeTemplateRemove:function(t,e){var a=this,i=t.ID;return Object(n.a)(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.api.getApplyRangeTemplateRemove(i).catch((function(){}));case 2:(n=t.sent)&&1e3===n.data.Status&&(s=function(){a.dataList.splice(e,1)},a.messageBox.successSingle("删除成功",s,s));case 4:case"end":return t.stop()}}),t)})))()},getAreaContent:function(t){var e={List:t.AreaList,IsIncludeIncreased:t.IsIncludeIncreasedArea};return Object(p.e)(e,this.allAreaTreeList)}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.getDataList(),e.next=3,t.$store.dispatch("common/getAreaList");case 3:t.allDataLoading=!1;case 4:case"end":return e.stop()}}),e)})))()}},h=(a("202f"),Object(c.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mp-price-manage-page-area-template-page-wrap"},[n("header",[t._m(0),n("div",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.setAreaTemplateHandler(null)}}},[t._v("新建模板")])],1)]),n("main",{staticClass:"mp-scroll-wrap"},[n("AreaTempSaveDialog",{attrs:{visible:t.visible,EditData:t.curEditData},on:{"update:visible":function(e){t.visible=e},submit:t.handleSubmit}}),t.allDataLoading?t._e():n("ul",[t._l(t.dataList,(function(e,a){return n("li",{key:e.ID},[n("div",{staticClass:"content"},[t._v(t._s(e.Name))]),n("div",{staticClass:"area"},[n("TableItemShowComp",{attrs:{list:t.getAreaContent(e)}})],1),n("CtrlMenus",{on:{edit:function(a){return t.setAreaTemplateHandler(e)},remove:function(n){return t.onRemoveClick(e,a)}}})],1)})),t.loading||0!==t.dataList.length?t._e():n("li",{staticClass:"empty-box"},[n("img",{attrs:{src:a("5731"),alt:""}}),n("p",[t._v("暂无数据")])])],2)],1),n("footer",[n("el-button",{staticClass:"goback",on:{click:t.onGobackClick}},[n("i",{staticClass:"el-icon-d-arrow-left"}),t._v(" 返回")])],1)])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"mp-common-title-wrap is-black"},[a("span",[t._v("设置适用范围模板")])])}],!1,null,null,null));e.default=h.exports}}]);