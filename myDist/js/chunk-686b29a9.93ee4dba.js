(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-686b29a9"],{"568a":function(t,e,i){"use strict";i.r(e);var c=(i("99af"),i("7db0"),i("c740"),i("d81d"),i("a434"),i("b0c0"),i("ac1f"),i("5319"),i("96cf"),i("1da1")),n=i("5530"),r=i("2f62"),a={data:function(){return{ProductID:"",PartID:"",ProductName:"",titleType:"",checkedFileList:[]}},components:{ContionCommonComp:i("9477").a},computed:Object(n.a)({},Object(r.e)("productManage",["ProductManageList","ProductModuleKeyIDList","ProductFilePropertyList","curEditFileData"]),{},Object(r.e)("common",["FileDataList"]),{curProduct:function(){var t=this;return this.ProductID?this.ProductManageList.find((function(e){return e.ID===t.ProductID})):null},curPart:function(){var t=this;return this.PartID&&this.curProduct?this.curProduct.PartList.find((function(e){return e.ID===t.PartID})):null},checkedFileIDs:function(){return Array.isArray(this.checkedFileList)&&0!==this.checkedFileList.length?this.checkedFileList.map((function(t){return t.File.ID})):[]}}),methods:{getPositionID:function(){if(this.$route.params){var t=this.$route.params,e=t.ProductID,i=t.PartID,c=t.name,n=t.type;e&&i&&c&&n?(this.ProductID=e,this.PartID="null"!==i?i:"",this.ProductName=c,this.titleType=n):this.onGoBackClick()}else this.onGoBackClick()},selectChange:function(t){var e=this.checkedFileList.findIndex((function(e){return e.File.ID===t.ID}));e>-1?this.checkedFileList.splice(e,1):this.checkedFileList.push({File:t,IsRequired:!1})},getIsRequiredByID:function(t){var e=this.checkedFileList.find((function(e){return e.File.ID===t}));return!!e&&e.IsRequired},requiredChange:function(t){var e=this.checkedFileList.find((function(e){return e.File.ID===t}));e&&(e.IsRequired=!e.IsRequired)},onGoBackClick:function(){this.$router.replace("/ProductFileList/".concat(this.ProductID,"/").concat(this.PartID?this.PartID:"null","/").concat(this.ProductName,"/").concat(this.titleType,"/").concat(Date.now()))},onSubmitClick:function(){var t=this.$refs.oLeftCondition.getConditonResult();if(t)if(this.checkedFileList&&0!==this.checkedFileList.length){var e=t.ID,i=t.Priority,c=t.Constraint,n=this.checkedFileList;if(n){var r={ID:e,Priority:i,Constraint:c,FileList:n,ProductID:this.ProductID};this.ProductFileSubmitHandler(r)}}else this.messageBox.failSingleError("保存失败","请勾选想要设置的文件类目")},ProductFileSubmitHandler:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function i(){var c,r,a,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.api.getProductFileSave(t).catch((function(){}));case 2:(c=i.sent)&&c.data&&1e3===c.data.Status&&(r=t.ID||0===t.ID,a=function(){e.$store.commit("productManage/setProductFileSave",[Object(n.a)({},t,{ID:c.data.Data}),r]),e.onGoBackClick()},s=r?"编辑成功":"添加成功",e.messageBox.successSingle(s,a,a));case 4:case"end":return i.stop()}}),i)})))()}},mounted:function(){if(this.getPositionID(),this.$store.dispatch("common/getFileInfoList"),this.curEditFileData){var t=this.curEditFileData.FileList;Array.isArray(t)&&0!==t.length&&(this.checkedFileList=JSON.parse(JSON.stringify(t)))}}},s=(i("59bd"),i("2877")),o=Object(s.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mp-erp-product-list-page-product-file-set-page-wrap"},[i("header",[i("span",[t._v("当前"+t._s(t.titleType)+"：")]),i("span",[t._v(t._s(t.ProductName))])]),i("main",[i("ContionCommonComp",{ref:"oLeftCondition",attrs:{PropertyList:t.ProductFilePropertyList,curEditData:t.curEditFileData}},[i("span",[t._v("文件类目：")]),i("ul",{staticClass:"file-list"},t._l(t.FileDataList,(function(e){return i("li",{key:e.ID},[i("el-checkbox",{attrs:{value:t.checkedFileIDs.includes(e.ID)},on:{change:function(i){return t.selectChange(e)}}},[t._v(t._s(e.Name))]),t.checkedFileIDs.includes(e.ID)?i("el-checkbox",{attrs:{value:t.getIsRequiredByID(e.ID)},on:{change:function(i){return t.requiredChange(e.ID)}}},[t._v("必须上传")]):t._e()],1)})),0)])],1),i("footer",[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitClick}},[t._v("保存")]),i("el-button",{on:{click:t.onGoBackClick}},[i("i",{staticClass:"el-icon-d-arrow-left"}),t._v(" 返回")])],1)])}),[],!1,null,null,null);e.default=o.exports},"59bd":function(t,e,i){"use strict";var c=i("e7ca");i.n(c).a},e7ca:function(t,e,i){}}]);