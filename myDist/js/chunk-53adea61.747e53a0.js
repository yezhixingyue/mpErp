(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-53adea61"],{"59a8":function(t,e,n){},aacc:function(t,e,n){"use strict";n.r(e);var a={components:{CommonElementSetPageComp:(n("b0c0"),n("ac1f"),n("5319"),n("c362")).a},data:function(){return{PositionID:"",ProductName:"",titleType:""}},methods:{getPositionID:function(){if(this.$route.params){var t=this.$route.params,e=t.id,n=t.name,a=t.type;e&&n&&a?(this.PositionID=e,this.ProductName=n,this.titleType=a):this.onGoBackClick()}else this.onGoBackClick()},onGoBackClick:function(){this.$router.replace("/ProductManageList")}},mounted:function(){this.getPositionID()}},i=(n("b2f2"),n("2877")),o=Object(i.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mp-erp-product-list-page-product-element-set-comp-wrap"},[n("header",[n("span",[t._v("当前"+t._s(t.titleType)+"：")]),n("span",[t._v(t._s(t.ProductName))])]),t.PositionID?n("CommonElementSetPageComp",{attrs:{PositionID:t.PositionID}}):t._e(),n("footer",[n("el-button",{on:{click:t.onGoBackClick}},[t._v("返回")])],1)],1)}),[],!1,null,null,null);e.default=o.exports},b2f2:function(t,e,n){"use strict";var a=n("59a8");n.n(a).a},c362:function(t,e,n){"use strict";var a=(n("4de4"),n("7db0"),n("c740"),n("4160"),n("caad"),n("d81d"),n("a434"),n("2532"),n("159b"),n("5530")),i=n("2909"),o=(n("96cf"),n("1da1")),r=n("05f6"),s={props:{PositionID:{type:String,default:""},GroupID:{type:String,default:""},showGroup:{type:Boolean,default:!0},canRemove:{type:Function,default:null}},data:function(){return{ElementDataList:[],ElementGroupDataList:[],isLoadingElement:!1,isLoadingGroup:!1}},components:{CommonElementSetComp:r.a},methods:{handleEditSubmitSuccess:function(t){var e=t.saveType,n=t.editData,a=t.ID,i=n,o="编辑"===e;if(o){if(o){var r=this.ElementDataList.findIndex((function(t){return t.ID===i.ID}));r>=0&&this.ElementDataList.splice(r,1,i)}}else i.ID=a,this.ElementDataList.push(i);this.$emit("elementSave",{isEdit:o,data:i})},onElementRemove:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var a,o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.canRemove||e.canRemove(t)){n.next=3;break}return n.abrupt("return");case 3:if(!(e.ElementGroupDataList&&e.ElementGroupDataList.length>0)){n.next=10;break}if(a=[],e.ElementGroupDataList.forEach((function(t){return a.push.apply(a,Object(i.a)(t.ElementList))})),!a.find((function(e){return e.ID===t}))){n.next=10;break}return e.messageBox.failSingleError("删除失败","该元素在界面元素组中已使用"),n.abrupt("return");case 10:return n.next=12,e.api.getElementRemove(t).catch((function(){}));case 12:(o=n.sent)&&200===o.status&&1e3===o.data.Status&&(r=function(){e.ElementDataList=e.ElementDataList.filter((function(e){return e.ID!==t})),e.$emit("elementRemove",t)},e.messageBox.successSingle("删除成功",r,r));case 14:case"end":return n.stop()}}),n)})))()},getElementList:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoadingElement=!0,e.next=3,t.api.getElementList({groupID:t.GroupID,positionID:t.PositionID}).catch((function(){}));case 3:(n=e.sent)&&200===n.status&&1e3===n.data.Status&&(t.ElementDataList=n.data.Data),t.isLoadingElement=!1;case 6:case"end":return e.stop()}}),e)})))()},handleGroupSaveSuccess:function(t){var e=this,n=t.saveType,a=t.editData,i=t.ID,o=a,r=function(){var t=o.ElementList.map((function(t){return t.ID}));e.ElementDataList.forEach((function(e){var n=e;t.includes(e.ID)?!n||n.Group&&n.Group.ID===i||(n.Group={ID:i,Name:o.Name}):n.Group&&n.Group.ID===i&&(n.Group=null)}))};if("添加"===n)o.ID=i,this.ElementGroupDataList.push(o),r(),this.$emit("elementGroupSave",{isEdit:!1,data:o});else if("编辑"===n){var s=this.ElementGroupDataList.findIndex((function(t){return t.ID===o.ID}));s>=0&&(this.ElementGroupDataList.splice(s,1,o),r(),this.$emit("elementGroupSave",{isEdit:!0,data:o}))}},onElementGroupRemove:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.api.getElementGroupRemove(t).catch((function(){}));case 2:(a=n.sent)&&200===a.status&&1e3===a.data.Status&&(i=function(){e.ElementGroupDataList.find((function(e){return e.ID===t})).ElementList.forEach((function(t){var n=e.ElementDataList.find((function(e){return e.ID===t.ID}));n&&(n.Group=null)})),e.ElementGroupDataList=e.ElementGroupDataList.filter((function(e){return e.ID!==t})),e.$emit("elementGroupRemove",t)},e.messageBox.successSingle("删除成功",i,i));case 4:case"end":return n.stop()}}),n)})))()},getElementGroupList:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoadingGroup=!0,e.next=3,t.api.getElementGroupList(t.PositionID).catch((function(){}));case 3:(n=e.sent)&&200===n.status&&1e3===n.data.Status&&(t.ElementGroupDataList=n.data.Data),t.isLoadingGroup=!1;case 6:case"end":return e.stop()}}),e)})))()},handleSortSuccess:function(t){var e=t.ID,n=t.ElementList,i=this.ElementGroupDataList.find((function(t){return t.ID===e}));i&&(i.ElementList=i.ElementList.map((function(t){var e=n.find((function(e){return e.ID===t.ID}));return e?Object(a.a)({},t,{Index:e.Index}):Object(a.a)({},t)})))},fetchData:function(){this.getElementList(),this.showGroup&&this.getElementGroupList(),this.$emit("copyGroupSuccess")}},mounted:function(){this.getElementList(),this.showGroup&&this.getElementGroupList()}},u=n("2877"),c=Object(u.a)(s,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("CommonElementSetComp",{attrs:{ElementDataList:t.ElementDataList,ElementGroupDataList:t.ElementGroupDataList,isLoadingElement:t.isLoadingElement,isLoadingGroup:t.isLoadingGroup,PositionID:t.PositionID,showGroup:t.showGroup},on:{saveElement:t.handleEditSubmitSuccess,removeElement:t.onElementRemove,saveElementGroup:t.handleGroupSaveSuccess,removeElementGroup:t.onElementGroupRemove,sortGroupElementList:t.handleSortSuccess,copyGroupSuccess:t.fetchData}})}),[],!1,null,null,null);e.a=c.exports}}]);