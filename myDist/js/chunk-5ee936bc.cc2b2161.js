(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5ee936bc"],{"0d59":function(t,e,i){"use strict";var a=i("9bf8");i.n(a).a},"39d8":function(t,e,i){"use strict";var a=i("5651");i.n(a).a},"3a9e":function(t,e,i){},"4c44":function(t,e,i){"use strict";var a=i("94d4");i.n(a).a},5651:function(t,e,i){},5816:function(t,e,i){},"710e":function(t,e,i){"use strict";var a=i("c68d");i.n(a).a},"7b2c":function(t,e,i){"use strict";var a=i("5816");i.n(a).a},"7e27":function(t,e,i){"use strict";i.r(e);var a=(i("4de4"),i("7db0"),i("c740"),i("4160"),i("caad"),i("a15b"),i("d81d"),i("a434"),i("b0c0"),i("ac1f"),i("2532"),i("5319"),i("159b"),i("96cf"),i("1da1")),n=i("5530"),s=i("2f62"),r=i("6e84"),o=(i("99af"),i("2909")),u=i("ad32"),l={model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},value:{type:Object,default:null},usableCraftList:{type:Array,default:null},CraftConditionList:{type:Array,default:null}},components:{CommonDialogComp:u.a},data:function(){return{title:"",ruleForm:null}},computed:{selectList:function(){var t=this;return this.ruleForm.List&&0!==this.ruleForm.List.length?this.ruleForm.List.map((function(e){return t.usableCraftList.find((function(t){return t.ID===e}))})).filter((function(t){return t})):[]},optionList:function(){var t={ID:"",Name:"不选中"};if(!this.selectList||0===this.selectList.length)return[t];var e=this.selectList.filter((function(t){return t&&(!t.ElementList||0===t.ElementList.length)}));return[t].concat(Object(o.a)(e))},CraftConditionIDs:function(){var t=this;if(!this.CraftConditionList||0===this.CraftConditionList.length)return[];var e=[];return this.CraftConditionList.forEach((function(i){t.ruleForm&&t.ruleForm.ID===i.ID||e.push.apply(e,Object(o.a)(i.List))})),e},curCanSelectUsableCraftList:function(){var t=this;return this.usableCraftList&&0!==this.usableCraftList.length?0===this.CraftConditionIDs.length?this.usableCraftList:this.usableCraftList.filter((function(e){return!t.CraftConditionIDs.includes(e.ID)})):[]},DefaultCraft:{get:function(){var t=this.ruleForm.DefaultCraft;return this.optionList.map((function(t){return t.ID})).filter((function(t){return t})).includes(t)?t:""},set:function(t){this.ruleForm.DefaultCraft=t}}},methods:{onSubmit:function(){if(this.ruleForm)if(this.ruleForm.List.length<2)this.messageBox.failSingleError("保存失败","请选中且至少选中2个工艺");else if(this.ruleForm.IsRequired&&this.ruleForm.DefaultCraft&&!this.ruleForm.List.includes(this.ruleForm.DefaultCraft))this.messageBox.failSingleError("保存失败","当前选中的初始选中工艺不在所选工艺列表中");else{var t=Object(n.a)({},this.ruleForm,{DefaultCraft:this.ruleForm.IsRequired?this.ruleForm.DefaultCraft:""});this.$emit("change",t)}},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.ruleForm=null,this.title=""},initEditData:function(){if(this.value){this.title="编辑单选工艺";var t=this.value,e=t.ID,i=t.IsRequired,a=t.DefaultCraft,n=t.List;this.ruleForm={ID:e,IsRequired:i,DefaultCraft:a,List:Object(o.a)(n)}}else this.title="添加单选工艺",this.ruleForm={ID:"",IsRequired:!1,DefaultCraft:"",List:[]}}}},c=(i("d93d"),i("2877")),f=Object(c.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CommonDialogComp",{staticClass:"mp-erp-comps-pruduct-module-single-craft-set-dialog-comp-wrap",attrs:{width:"800px",top:"12vh",title:t.title,visible:t.visible,disabled:t.curCanSelectUsableCraftList.length<2},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[t.ruleForm?i("el-checkbox-group",{model:{value:t.ruleForm.List,callback:function(e){t.$set(t.ruleForm,"List",e)},expression:"ruleForm.List"}},t._l(t.usableCraftList,(function(e){return i("el-checkbox",{key:e.ID,attrs:{label:e.ID,title:e.Name,disabled:t.CraftConditionIDs.includes(e.ID)}},[t._v(t._s(e.Name))])})),1):t._e(),t.ruleForm?i("div",{staticClass:"select-type"},[i("el-checkbox",{attrs:{disabled:t.curCanSelectUsableCraftList.length<2},model:{value:t.ruleForm.IsRequired,callback:function(e){t.$set(t.ruleForm,"IsRequired",e)},expression:"ruleForm.IsRequired"}},[t._v("必选")]),i("div",[t.ruleForm&&t.ruleForm.IsRequired?[i("span",[t._v("初始选中：")]),i("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.DefaultCraft,callback:function(e){t.DefaultCraft=e},expression:"DefaultCraft"}},t._l(t.optionList,(function(t){return i("el-option",{key:t.ID,attrs:{label:t.Name,value:t.ID}})})),1)]:t._e()],2)],1):t._e(),t.curCanSelectUsableCraftList.length<2?i("p",{staticClass:"tips-box"},[i("i",{staticClass:"el-icon-warning"}),t._v(" 当前可选工艺数量少于2，不支持单选工艺设置")]):t._e()],1)}),[],!1,null,null,null).exports,d={props:{usableCraftList:{type:Array,default:null},CraftConditionList:{type:Array,default:null}},components:{SingleSelectCraftSetDialog:f},data:function(){return{visible:!1,singleCraftData:null}},computed:{curEditData:{get:function(){return this.singleCraftData},set:function(t){this.$emit("submit",t)}}},methods:{onSingleCraftSaveClick:function(t){this.singleCraftData=t,this.visible=!0},getSingleCraftNames:function(t){var e=this;return t&&Array.isArray(t)&&0!==t.length&&this.usableCraftList&&Array.isArray(this.usableCraftList)&&0!==this.usableCraftList.length?t.map((function(t){return e.usableCraftList.find((function(e){return e.ID===t}))})).filter((function(t){return t})).map((function(t){return t.Name})).join("、"):""},getDefaultCraftName:function(t){if(!t)return"未设置";var e=this.usableCraftList.filter((function(t){return t&&(!t.ElementList||0===t.ElementList.length)})).find((function(e){return e.ID===t}));return e?e.Name:"未设置"},onItemRemove:function(t){var e=this;this.messageBox.warnCancelBox("确定删除该单选工艺设置吗","该设置共包含有".concat(t.List.length,"种工艺"),(function(){e.$emit("remove",t)}))}}},m=(i("7ea3"),Object(c.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mp-erp-product-module-craft-set-page-left-content-wrap"},[i("header",[i("span",{staticClass:"mp-common-title-wrap"},[t._v("单选工艺")]),i("span",{staticClass:"blue-span",class:t.usableCraftList&&t.usableCraftList.length>0?"":"disabled",on:{click:function(e){return t.onSingleCraftSaveClick(null)}}},[t._v("+ 添加")])]),i("main",[i("SingleSelectCraftSetDialog",{attrs:{usableCraftList:t.usableCraftList,CraftConditionList:t.CraftConditionList,visible:t.visible},on:{"update:visible":function(e){t.visible=e}},model:{value:t.curEditData,callback:function(e){t.curEditData=e},expression:"curEditData"}}),t.usableCraftList&&t.usableCraftList.length>0&&t.CraftConditionList?i("ul",t._l(t.CraftConditionList,(function(e){return i("li",{key:e.ID},[i("div",{staticClass:"names",attrs:{title:t.getSingleCraftNames(e.List)}},[t._v(t._s(t.getSingleCraftNames(e.List)))]),i("div",{staticClass:"required"},[t._v(t._s(e.IsRequired?"必选":""))]),i("div",{staticClass:"select"},[e.IsRequired?[i("span",[t._v("初始选中：")]),i("span",{attrs:{title:t.getDefaultCraftName(e.DefaultCraft)}},[t._v(t._s(t.getDefaultCraftName(e.DefaultCraft)))])]:t._e()],2),i("div",{staticClass:"ctrl"},[i("span",{on:{click:function(i){return t.onSingleCraftSaveClick(e)}}},[i("i"),t._v(" 编辑")]),i("span",{staticClass:"del-btn",on:{click:function(i){return t.onItemRemove(e)}}},[i("i"),t._v(" 删除")])])])})),0):t._e()],1)])}),[],!1,null,null,null)).exports,p={model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},value:{type:Array,default:null}},components:{CommonDialogComp:u.a},data:function(){return{checkList:[]}},computed:{},methods:{onSubmit:function(){this.checkList.find((function(t){return!t.HiddenToCustomer}))?this.$emit("change",this.checkList):this.messageBox.failSingleError("保存失败","不能设置全部工艺均对客户隐藏")},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.checkList=[]},initEditData:function(){this.checkList=JSON.parse(JSON.stringify(this.value))}}},C=(i("7b2c"),Object(c.a)(p,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CommonDialogComp",{staticClass:"mp-erp-comps-pruduct-module-craft-hidden-set-dialog-comp-wrap",attrs:{width:"800px",top:"12vh",title:"设置客户隐藏",visible:t.visible},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},t._l(t.checkList,(function(e){return i("el-checkbox",{key:e.ID,attrs:{title:e.Name},model:{value:e.HiddenToCustomer,callback:function(i){t.$set(e,"HiddenToCustomer",i)},expression:"it.HiddenToCustomer"}},[t._v(t._s(e.Name))])})),1)}),[],!1,null,null,null)).exports,h=(i("13d5"),i("fb6a"),i("d3b7"),i("25f0"),i("6062"),i("3ca3"),i("ddb0"),{model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},value:{type:Array,default:null},usableCraftList:{type:Array,default:null}},components:{CommonDialogComp:u.a},data:function(){return{checkList:[],submitList:[]}},computed:{isIndeterminate:function(){return 0!==this.checkList.length&&this.checkList.length!==this.canSelectList.length},checkAll:{get:function(){return this.checkList.length>0&&this.checkList.length===this.canSelectList.length},set:function(t){this.checkList=t?this.canSelectList.map((function(t){return t.ID})):[]}},selectedIds:function(){return this.submitList&&Array.isArray(this.submitList)&&0!==this.submitList.length?this.submitList.reduce((function(t,e){return[].concat(Object(o.a)(t),Object(o.a)(e.List))}),[]):[]},canSelectList:function(){var t=this;return this.usableCraftList&&0!==this.usableCraftList.lenght?0===this.selectedIds.length?this.usableCraftList:this.usableCraftList.filter((function(e){return!t.selectedIds.includes(e.ID)})):[]}},methods:{onSubmit:function(){var t=this;if(!(this.canSelectList.length>0&&this.usableCraftList&&this.usableCraftList.length>0))if(this.submitList.find((function(t){return!t.Name})))this.messageBox.failSingleError("保存失败","分组名称必填，请检查");else{var e=this.submitList.findIndex((function(e){return!t.$utils.checkName(e.Name)}));if(e>-1)this.messageBox.failSingleError("保存失败","第".concat(e+1,"行分组名称输入不符合规范，请检查"));else{var i=this.submitList.map((function(t){return t.Name})),a=Object(o.a)(new Set(i));i.length>a.length?this.messageBox.failSingleError("保存失败","存在重复分组名称，请检查"):this.$emit("change",this.submitList)}}},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.checkList=[],this.submitList=[]},initEditData:function(){this.submitList=JSON.parse(JSON.stringify(this.value))},joinGroup:function(){if(0!==this.checkList.length){var t={IsNameHidden:!1,List:this.checkList,ID:"",Name:"",key:Math.random().toString(36).slice(-8)};this.submitList.push(t),this.checkList=[]}},getItemNames:function(t){var e=this;return t&&0!==t.length?t.map((function(t){var i=e.usableCraftList.find((function(e){return e.ID===t}));return i?i.Name:""})).filter((function(t){return t})).join("、"):""},onOptionItemRemove:function(t){this.submitList.splice(t,1)}}}),b=(i("0d59"),Object(c.a)(h,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CommonDialogComp",{staticClass:"mp-erp-comps-pruduct-module-craft-grouping-set-dialog-comp-wrap",attrs:{width:"800px",top:"12vh",title:"设置分组",visible:t.visible,disabled:t.canSelectList.length>0&&t.usableCraftList&&t.usableCraftList.length>0},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[i("el-checkbox",{attrs:{indeterminate:t.isIndeterminate,disabled:0===t.canSelectList.length},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),i("span",{staticClass:"tips-box"},[t._v("（ 需要所有工艺都设置入分组后，才可保存！）")]),t.usableCraftList?i("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.usableCraftList,(function(e){return i("el-checkbox",{key:e.ID,attrs:{label:e.ID,disabled:t.selectedIds.includes(e.ID),title:e.Name}},[t._v(t._s(e.Name))])})),1):t._e(),i("p",{staticClass:"btn"},[i("el-button",{staticClass:"border-blue-btn",attrs:{size:"small",disabled:0===t.checkList.length},on:{click:t.joinGroup}},[t._v("+ 加入分组")])],1),i("section",{staticClass:"table"},[i("header",[i("span",[t._v("名称")]),i("span",[t._v("界面隐藏名称")]),i("span",[t._v("包含工艺")])]),i("main",t._l(t.submitList,(function(e,a){return i("div",{key:e.key||e.ID},[i("el-input",{attrs:{maxlength:"10",size:"small"},model:{value:e.Name,callback:function(i){t.$set(e,"Name","string"==typeof i?i.trim():i)},expression:"it.Name"}}),i("el-checkbox",{model:{value:e.IsNameHidden,callback:function(i){t.$set(e,"IsNameHidden",i)},expression:"it.IsNameHidden"}},[t._v("隐藏")]),i("span",{staticClass:"list-name",attrs:{title:t.getItemNames(e.List)}},[t._v(t._s(t.getItemNames(e.List)))]),i("span",{staticClass:"del-btn",on:{click:function(e){return t.onOptionItemRemove(a)}}},[i("i"),t._v(" 删除")])],1)})),0)])],1)}),[],!1,null,null,null)).exports,L={props:{usableCraftList:{type:Array,default:null},CraftGroupList:{type:Array,default:null}},components:{DisplayHiddenCraftSetDialog:C,DisplayCraftGroupingSetDialog:b},data:function(){return{DisplayHiddenVisible:!1,DisplayGroupingVisible:!1}},computed:{curHiddenCraftData:{get:function(){return this.usableCraftList},set:function(t){this.$emit("setHiddenCraftList",t)}},HiddenCraftTextList:function(){return this.usableCraftList&&0!==this.usableCraftList.length?this.usableCraftList.filter((function(t){return t.HiddenToCustomer})).map((function(t){return t.Name})).join("、"):""},curGroupCraftData:{get:function(){return this.CraftGroupList},set:function(t){this.$emit("setGroupCraftList",t)}}},methods:{getItemNames:function(t){var e=this;return t&&0!==t.length?t.map((function(t){var i=e.usableCraftList.find((function(e){return e.ID===t}));return i?i.Name:""})).filter((function(t){return t})).join("、"):""}}},v=(i("4c44"),Object(c.a)(L,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mp-erp-product-module-craft-set-page-right-content-wrap"},[i("div",{staticClass:"display-hidden"},[i("span",{staticClass:"mp-common-title-wrap is-black"},[t._v("客户界面隐藏")]),i("span",{staticClass:"blue-span is-font-size-13",class:t.usableCraftList&&t.usableCraftList.length>0?"":"disabled",on:{click:function(e){t.DisplayHiddenVisible=!0}}},[t._v("设置隐藏")]),i("span",{staticClass:"hide-text",attrs:{title:t.HiddenCraftTextList}},[t._v(t._s(t.HiddenCraftTextList))])]),i("div",{staticClass:"display-grouping"},[i("p",[i("span",{staticClass:"mp-common-title-wrap is-black"},[t._v("显示分组")]),i("span",{staticClass:"blue-span is-font-size-13",class:t.usableCraftList&&t.usableCraftList.length>0?"":"disabled",on:{click:function(e){t.DisplayGroupingVisible=!0}}},[t._v("设置分组")])]),t._l(t.CraftGroupList,(function(e){return i("div",{key:e.key||e.ID},[i("span",[t._v(t._s(e.Name)+" "),i("i",{class:{"is-success":!e.IsNameHidden}},[t._v("（"+t._s(e.IsNameHidden?"隐藏名称":"显示名称")+"）")])]),i("span",{staticClass:"list-name",attrs:{title:t.getItemNames(e.List)}},[t._v(t._s(t.getItemNames(e.List)))])])})),t.usableCraftList&&t.usableCraftList.length>0&&t.CraftGroupList&&0===t.CraftGroupList.length?i("div",{staticClass:"empty is-pink"},[t._v(" 显示分组未设置 ！ ")]):t._e()],2),i("DisplayHiddenCraftSetDialog",{attrs:{visible:t.DisplayHiddenVisible},on:{"update:visible":function(e){t.DisplayHiddenVisible=e}},model:{value:t.curHiddenCraftData,callback:function(e){t.curHiddenCraftData=e},expression:"curHiddenCraftData"}}),i("DisplayCraftGroupingSetDialog",{attrs:{visible:t.DisplayGroupingVisible,usableCraftList:t.usableCraftList},on:{"update:visible":function(e){t.DisplayGroupingVisible=e}},model:{value:t.curGroupCraftData,callback:function(e){t.curGroupCraftData=e},expression:"curGroupCraftData"}})],1)}),[],!1,null,null,null)).exports,g={model:{prop:"value",event:"change"},props:{itemData:{type:Object,default:null},value:{type:Array,default:function(){return[]}}},data:function(){return{extend:!0}},computed:{},methods:{change:function(t){this.$emit("change",t)}}},D=(i("710e"),Object(c.a)(g,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.itemData?i("div",{staticClass:"mp-erp-comps-pruduct-module-usable-craft-select-dialog-comp-content-item-wrap"},[i("div",{staticClass:"header"},[i("span",{staticClass:"mp-common-title-wrap"},[t._v(t._s(t.itemData.ClassName))]),i("div",{staticClass:"extend-box",on:{click:function(e){t.extend=!t.extend}}},[t.extend?i("span",[t._v("收起")]):i("span",[t._v("展开")]),t.extend?i("i",{staticClass:"el-icon-arrow-up"}):i("i",{staticClass:"el-icon-arrow-down"})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.extend,expression:"extend"}],staticClass:"content"},t._l(t.itemData.children,(function(e){return i("el-checkbox",{key:e.ID,attrs:{value:t.value.includes(e.ID),title:e.Name},on:{change:function(i){return t.change(e)}}},[t._v(" "+t._s(e.Name)+" ")])})),1)]):t._e()}),[],!1,null,null,null)).exports,I={props:{visible:{type:Boolean,default:!1},usableCraftList:{type:Array,default:function(){return[]}}},components:{CommonDialogComp:u.a,CraftSelectFoldItem:D},data:function(){return{allCraftDataList:[],activeName:"0",localCraftList:[]}},computed:Object(n.a)({},Object(s.c)("common",["twoLevelsCraftClassify"]),{CraftLevelData:function(){return this.$utils.getTreeDataFromListAndClassifyData(this.allCraftDataList,this.twoLevelsCraftClassify)},selectedIDs:function(){return this.localCraftList&&0!==this.localCraftList.length?this.localCraftList.map((function(t){return t.ID})):[]},foldItemData:{get:function(){return this.selectedIDs},set:function(t){if(t){var e=t.ID;this.selectedIDs.includes(e)?this.localCraftList=this.localCraftList.filter((function(t){return t.ID!==e})):this.localCraftList.push(t)}}}}),methods:{onSubmit:function(){this.$emit("submit",this.localCraftList)},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.localCraftList=[],this.activeName="0",this.allCraftDataList=[]},getAllCraftDataList:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.allCraftDataList.length>0)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.api.getCraftListData({Page:1,PageSize:1e5,FieldType:2}).catch((function(){}));case 4:(i=e.sent)&&i.data&&1e3===i.data.Status&&(t.allCraftDataList=i.data.Data);case 6:case"end":return e.stop()}}),e)})))()},initEditData:function(){this.$store.dispatch("common/getCraftClassifyData"),this.getAllCraftDataList(),this.localCraftList=JSON.parse(JSON.stringify(this.usableCraftList))}}},k=(i("d7c9"),Object(c.a)(I,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CommonDialogComp",{staticClass:"mp-erp-comps-pruduct-module-usable-craft-set-dialog-comp-wrap",attrs:{width:"800px",top:"8vh",title:"设置可用工艺",visible:t.visible},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[i("el-tabs",{attrs:{type:"card",size:"small"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.CraftLevelData,(function(e,a){return i("el-tab-pane",{key:e.ID,attrs:{label:e.ClassName,name:""+a}},[i("div",{staticClass:"list-content"},t._l(e.children,(function(e){return i("CraftSelectFoldItem",{key:e.ID,attrs:{itemData:e},model:{value:t.foldItemData,callback:function(e){t.foldItemData=e},expression:"foldItemData"}})})),1)])})),1)],1)}),[],!1,null,null,null)).exports,S=i("ede4"),x={name:"ProductCraftSetPage",components:{LRWidthDragAutoChangeComp:r.a,ContentLeft:m,ContentRight:v,UsableCraftSetDialog:k,MaterialSortDialog:S.a},data:function(){return{ProductID:"",PartID:"",ProductName:"",titleType:"",CraftList:[],CraftConditionList:[],CraftGroupList:[],craftVisible:!1,sortVisible:!1}},computed:Object(n.a)({},Object(s.e)("productManage",["ProductManageList","ProductModuleKeyIDList"]),{curProduct:function(){var t=this;return this.ProductID?this.ProductManageList.find((function(e){return e.ID===t.ProductID})):null},curPart:function(){var t=this;return this.PartID&&this.curProduct?this.curProduct.PartList.find((function(e){return e.ID===t.PartID})):null},usableCraftText:function(){return this.CraftList&&0!==this.CraftList.length?this.CraftList.map((function(t){return t.Name})).join("、"):""},SortListData:{get:function(){return this.CraftList&&Array.isArray(this.CraftList)&&0!==this.CraftList.length?this.CraftList.map((function(t){return{ID:t.ID,Name:t.Name}})):[]},set:function(t){t&&0!==t.length&&this.onSortSubmit(t)}},CraftListIDs:function(){return Array.isArray(this.CraftList)&&0!==this.CraftList.length?this.CraftList.map((function(t){return t.ID})):[]}}),methods:{getPositionID:function(){if(this.$route.params){var t=this.$route.params,e=t.ProductID,i=t.PartID,a=t.name,n=t.type;e&&i&&a&&n?(this.ProductID=e,this.PartID="null"!==i?i:"",this.ProductName=a,this.titleType=n,this.getProductOrPartCraftData()):this.onGoBackClick()}else this.onGoBackClick()},getProductOrPartCraftData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["Craft","CraftCondition","CraftDisplayGroup"];return Object(a.a)(regeneratorRuntime.mark((function i(){var a,n,s,r,o,u,l,c,f;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.PartID?t.PartID:t.ProductID,n=t.PartID?t.api.getPartModuleData:t.api.getProductModuleData,s=t.$utils.getIDFromListByNames(e,t.ProductModuleKeyIDList),r={ID:a,List:s},i.next=6,n(r).catch((function(){}));case 6:(o=i.sent)&&o.data&&1e3===o.data.Status&&(u=o.data.Data,l=u.CraftList,c=u.CraftConditionList,f=u.CraftGroupList,e.includes("Craft")&&l&&(t.CraftList=l),e.includes("CraftCondition")&&c&&(t.CraftConditionList=c),e.includes("CraftDisplayGroup")&&f&&(t.CraftGroupList=f));case 8:case"end":return i.stop()}}),i)})))()},onGoBackClick:function(){this.$router.replace("/ProductManageList")},onUsableCraftSetSubmit:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function i(){var a,n,s,r,o,u;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.ProductID,n=e.PartID,s=t.map((function(t){return t.ID})),r={ProductID:a,PartID:n,List:s},i.next=5,e.api.getProductCraftUsableSet(r).catch((function(){}));case 5:(o=i.sent)&&o.data&&1e3===o.data.Status&&(u=function(){e.CraftList=t,e.craftVisible=!1,e.handleCraftListChange4CraftConditionList(),e.handleCraftListChange4CraftGroupList()},e.messageBox.successSingle("设置成功",u,u));case 7:case"end":return i.stop()}}),i)})))()},handleCraftListChange4CraftConditionList:function(){var t=this;this.CraftConditionList.forEach((function(e){e.List=e.List.filter((function(e){return t.CraftListIDs.includes(e)}))})),this.CraftConditionList=this.CraftConditionList.filter((function(t){return t.List.length>0}))},handleCraftListChange4CraftGroupList:function(){var t=this;this.CraftGroupList.forEach((function(e){e.List=e.List.filter((function(e){return t.CraftListIDs.includes(e)}))})),this.CraftGroupList=this.CraftGroupList.filter((function(t){return t.List.length>0}))},onSortSubmit:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function i(){var a,n,s,r,o,u;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.ProductID,n=e.PartID,s=t.map((function(t){return t.ID})),r={ProductID:a,PartID:n,TypeList:s},i.next=5,e.api.getProductCraftOrder(r).catch((function(){}));case 5:(o=i.sent)&&o.data&&1e3===o.data.Status&&(u=function(){var t=[],i=JSON.parse(JSON.stringify(e.CraftList));s.forEach((function(e){i.forEach((function(a,n){a&&a.ID===e&&(t.push(a),i.splice(n,1,null))}))})),e.CraftList=t,e.sortVisible=!1},e.messageBox.successSingle("保存排序成功",u,u));case 7:case"end":return i.stop()}}),i)})))()},onSingleCraftSaveSubmit:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function i(){var a,s,r,o,u,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.ProductID,s=e.PartID,r=Object(n.a)({ProductID:a,PartID:s},t),i.next=4,e.api.getProductCraftConditionSave(r).catch((function(){}));case 4:(o=i.sent)&&o.data&&1e3===o.data.Status&&(u=!!t.ID,l=u?"编辑单选工艺成功":"添加单选工艺成功",c=function(){if(u){var t=e.CraftConditionList.findIndex((function(t){return t.ID===r.ID}));t>-1&&e.CraftConditionList.splice(t,1,r)}else e.CraftConditionList.push(Object(n.a)({},r,{ID:o.data.Data}));e.$refs.oLeft.visible=!1},e.messageBox.successSingle(l,c,c));case 6:case"end":return i.stop()}}),i)})))()},onSingleCraftRemove:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function i(){var a,n,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return");case 2:return a=t.ID,i.next=5,e.api.getProductCraftConditionRemove(a).catch((function(){}));case 5:(n=i.sent)&&n.data&&1e3===n.data.Status&&(s=function(){var t=e.CraftConditionList.findIndex((function(t){return t.ID===a}));t>-1&&e.CraftConditionList.splice(t,1)},e.messageBox.successSingle("删除成功",s,s));case 7:case"end":return i.stop()}}),i)})))()},setHiddenCraftList:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function i(){var a,n,s,r,o,u;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t&&0!==t.length){i.next=2;break}return i.abrupt("return");case 2:return a=e.ProductID,n=e.PartID,s=t.filter((function(t){return t.HiddenToCustomer})).map((function(t){return t.ID})),r={ProductID:a,PartID:n,List:s},i.next=7,e.api.getProductCraftSetHidden(r).catch((function(){}));case 7:(o=i.sent)&&o.data&&1e3===o.data.Status&&(u=function(){e.CraftList=t,e.$refs.oRight.DisplayHiddenVisible=!1},e.messageBox.successSingle("设置成功",u,u));case 9:case"end":return i.stop()}}),i)})))()},setGroupCraftList:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function i(){var a,n,s,r,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t&&0!==t.length){i.next=2;break}return i.abrupt("return");case 2:return a=e.ProductID,n=e.PartID,s={ProductID:a,PartID:n,List:t},i.next=6,e.api.getProductCraftSetGroup(s).catch((function(){}));case 6:(r=i.sent)&&r.data&&1e3===r.data.Status&&(o=function(){e.CraftGroupList=t,e.$refs.oRight.DisplayGroupingVisible=!1},e.messageBox.successSingle("设置成功",o,o));case 8:case"end":return i.stop()}}),i)})))()}},mounted:function(){this.getPositionID()}},y=(i("39d8"),Object(c.a)(x,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mp-erp-product-list-page-craft-set-comp-wrap"},[i("header",[i("span",[t._v("当前"+t._s(t.titleType)+"：")]),i("span",[t._v(t._s(t.ProductName))]),i("p",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.craftVisible=!0}}},[t._v("设置可用工艺")]),i("span",{staticClass:"text",attrs:{title:t.usableCraftText}},[t._v(t._s(t.usableCraftText))]),i("span",{staticClass:"blue-span",class:t.CraftList&&t.CraftList.length>0?"":"disabled",on:{click:function(e){t.sortVisible=!0}}},[t._v("设置排序")])],1)]),i("main",[t.curProduct?i("LRWidthDragAutoChangeComp",{attrs:{leftWidth:"50%"},scopedSlots:t._u([{key:"left",fn:function(){return[i("ContentLeft",{ref:"oLeft",attrs:{usableCraftList:t.CraftList,CraftConditionList:t.CraftConditionList},on:{submit:t.onSingleCraftSaveSubmit,remove:t.onSingleCraftRemove}})]},proxy:!0},{key:"right",fn:function(){return[i("ContentRight",{ref:"oRight",attrs:{usableCraftList:t.CraftList,CraftGroupList:t.CraftGroupList},on:{setHiddenCraftList:t.setHiddenCraftList,setGroupCraftList:t.setGroupCraftList}})]},proxy:!0}],null,!1,272721363)}):t._e(),i("UsableCraftSetDialog",{attrs:{usableCraftList:t.CraftList,visible:t.craftVisible},on:{"update:visible":function(e){t.craftVisible=e},submit:t.onUsableCraftSetSubmit}}),i("MaterialSortDialog",{attrs:{title:"可用工艺排序",visible:t.sortVisible},on:{"update:visible":function(e){t.sortVisible=e}},model:{value:t.SortListData,callback:function(e){t.SortListData=e},expression:"SortListData"}})],1),i("footer",[i("el-button",{on:{click:t.onGoBackClick}},[t._v("返回")])],1)])}),[],!1,null,null,null));e.default=y.exports},"7ea3":function(t,e,i){"use strict";var a=i("3a9e");i.n(a).a},"94d4":function(t,e,i){},"9bf8":function(t,e,i){},c68d:function(t,e,i){},d270:function(t,e,i){},d7c9:function(t,e,i){"use strict";var a=i("e9a0");i.n(a).a},d93d:function(t,e,i){"use strict";var a=i("d270");i.n(a).a},e9a0:function(t,e,i){}}]);