(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2a5ba2e5"],{"1c24e":function(t,e,a){"use strict";a.r(e);var r=(a("7db0"),a("caad"),a("d81d"),a("fb6a"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("2532"),a("5319"),a("96cf"),a("1da1")),i=a("5530"),n=a("2f62"),c=a("b76a"),s={name:"ProductDisplaySortPage",data:function(){return{ProductID:"",PartID:"",ProductName:"",titleType:"",materialName:"",DisplayList:[]}},components:{draggable:a.n(c).a},computed:Object(i.a)({},Object(n.e)("productManage",["ProductManageList","ProductModuleKeyIDList"]),{curProduct:function(){var t=this;return this.ProductID?this.ProductManageList.find((function(e){return e.ID===t.ProductID})):null},curPart:function(){var t=this;return this.PartID&&this.curProduct?this.curProduct.PartList.find((function(e){return e.ID===t.PartID})):null}}),methods:{getPositionID:function(){if(this.$route.params){var t=this.$route.params,e=t.ProductID,a=t.PartID,r=t.name,i=t.type,n=t.materialName;e&&a&&r&&i?(this.ProductID=e,this.PartID="null"!==a?a:"",this.ProductName=r,this.titleType=i,this.materialName=n,this.getProductOrderData()):this.onGoBackClick()}else this.onGoBackClick()},getProductOrderData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["Order"];return Object(r.a)(regeneratorRuntime.mark((function a(){var r,n,c,s,o,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.PartID?t.PartID:t.ProductID,n=t.PartID?t.api.getPartModuleData:t.api.getProductModuleData,c=t.$utils.getIDFromListByNames(e,t.ProductModuleKeyIDList),s={ID:r,List:c},a.next=6,n(s).catch((function(){}));case 6:(o=a.sent)&&o.data&&1e3===o.data.Status&&(u=o.data.Data.DisplayList,e.includes("Order")&&u&&(t.DisplayList=u.map((function(t){return Object(i.a)({},t,{key:Math.random().toString(36).slice(-8)})}))));case 8:case"end":return a.stop()}}),a)})))()},setDisplayOrderSubmit:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function a(){var r,n,c,s,o,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t&&0!==t.length){a.next=2;break}return a.abrupt("return");case 2:return r=e.ProductID,n=e.PartID,c=t.map((function(t,e){return Object(i.a)({},t,{Index:e})})),s={ProductID:r,PartID:n,List:c},a.next=7,e.api.getProductSetDisplayOrder(s).catch((function(){}));case 7:(o=a.sent)&&o.data&&1e3===o.data.Status&&(u=function(){e.onGoBackClick()},e.messageBox.successSingle("设置成功",u,u));case 9:case"end":return a.stop()}}),a)})))()},onGoBackClick:function(){this.$router.replace("/ProductManageList")},onSubmitClick:function(){this.setDisplayOrderSubmit(this.DisplayList)}},mounted:function(){this.getPositionID()}},o=(a("4052"),a("2877")),u=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"mp-erp-product-list-page-display-sort-set-comp-wrap"},[a("header",[a("span",[t._v("当前"+t._s(t.titleType)+"：")]),a("span",[t._v(t._s(t.ProductName))])]),a("main",[t._m(0),t.DisplayList?a("draggable",t._b({model:{value:t.DisplayList,callback:function(e){t.DisplayList=e},expression:"DisplayList"}},"draggable",{tag:"ul",animation:120},!1),t._l(t.DisplayList,(function(e){return a("li",{key:e.key},[t._v(t._s(e.Property.Name))])})),0):t._e()],1),a("footer",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitClick}},[t._v("保存")]),a("el-button",{on:{click:t.onGoBackClick}},[a("i",{staticClass:"el-icon-d-arrow-left"}),t._v(" 返回")])],1)])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"tips-box"},[a("i",{staticClass:"el-icon-warning"}),t._v(" 注：拖动排序")])}],!1,null,null,null);e.default=u.exports},"30fc":function(t,e,a){},4052:function(t,e,a){"use strict";var r=a("30fc");a.n(r).a}}]);