(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-568a27d2"],{1219:function(t,i,e){},"58a2":function(t,i,e){"use strict";e.r(i);var a=(e("99af"),e("a15b"),e("d81d"),e("b0c0"),e("d3b7"),e("ac1f"),e("3ca3"),e("5319"),e("ddb0"),e("3835")),s=(e("96cf"),e("1da1")),r=e("5530"),n=e("2f62"),o=(e("25f0"),e("d4ec")),c=e("ade3"),l=function t(i){if(Object(o.a)(this,t),Object(c.a)(this,"ID",""),Object(c.a)(this,"PriceID",""),Object(c.a)(this,"SolutionID",""),Object(c.a)(this,"Unit",""),Object(c.a)(this,"Constraint",null),Object(c.a)(this,"Priority",""),Object(c.a)(this,"XAxis",{Property:null,Operator:0,InputContent:"",IsCumsum:!1,List:[]}),Object(c.a)(this,"YAxis",{Property:null,Operator:0,InputContent:"",IsCumsum:!1,List:[]}),Object(c.a)(this,"ElementList",[]),Object(c.a)(this,"PriceList",[]),Object(c.a)(this,"FormulaList",[]),i&&"[object Object]"===Object.prototype.toString.call(i)){var e=i.ID,a=i.PriceID,s=i.SolutionID,r=i.Unit,n=i.Constraint,l=i.Priority,u=i.XAxis,p=i.YAxis,m=i.ElementList,P=i.PriceList,d=i.FormulaList;e&&(this.ID=e),a&&(this.PriceID=a),s&&(this.SolutionID=s),r&&(this.Unit=r),n&&(this.Constraint=n),(l||0===l)&&(this.Priority=l),u&&(this.XAxis=u),p&&(this.YAxis=p),Array.isArray(m)&&(this.ElementList=m),Array.isArray(P)&&(this.PriceList=P),Array.isArray(d)&&(this.FormulaList=d)}},u=e("a9e4"),p=e("ad32"),m={props:{visible:{type:Boolean,default:!1},saveData:{type:Object,default:null}},components:{CommonDialogComp:p.a},computed:{},data:function(){return{title:"添加费用",ruleForm:{}}},methods:{onSubmit:function(){return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.$refs.ruleForm.resetFields()},initEditData:function(){this.title=this.saveData.ID?"编辑费用":"添加费用"}}},P=(e("c3b9"),e("2877")),d=Object(P.a)(m,(function(){var t=this,i=t.$createElement;return(t._self._c||i)("CommonDialogComp",{staticClass:"mp-erp-comps-price-module-price-table-item-axis-prop-data-set-dialog-comp-wrap",class:t.showGroup?"show-group":"",attrs:{width:"700px",top:"15vh",title:t.title,visible:t.visible},on:{"update:visible":function(i){t.visible=i},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}})}),[],!1,null,null,null).exports,h={name:"CraftPriceTableItemSet",components:{FormulaPanelElementSelectDialog:u.a,AxisPropDataSetDialog:d},data:function(){return{productData:null,PriceID:"",PriceName:"",ProductID:"",ProductName:"",isQuotationPage:!1,checked:!1,PriceTableData:null,AxisPropVisible:!1,loading:!0,curAxisPropSetType:"",selectedElementIDs:[],AxisPropDataSetVisible:!1}},computed:Object(r.a)({},Object(n.e)("priceManage",["curSolutionItem","curEditPriceItemData","curPriceItem","curCraftPriceItemData","PriceItemPropertyList"]),{ConstraintContent:function(){if(!this.PriceTableData)return"";var t=this.PriceTableData.Constraint;return t&&Array.isArray(t.ItemList)&&0!==t.ItemList.length?"有条件，尚未编写显示":"条件为空"},XAxisProp:function(){var t,i;return null===(t=this.PriceTableData)||void 0===t||null===(i=t.XAxis)||void 0===i?void 0:i.Property},YAxisProp:function(){var t,i;return null===(t=this.PriceTableData)||void 0===t||null===(i=t.YAxis)||void 0===i?void 0:i.Property},FormDataUnit:function(){var t;return null===(t=this.PriceTableData)||void 0===t?void 0:t.Unit},OtherDataUnit:function(){var t;return null===(t=this.PriceTableData)||void 0===t?void 0:t.ElementList.map((function(t){return t.Unit?"".concat(t.Name,"（单位：").concat(t.Unit):"".concat(t.Name)})).join("、")}}),methods:{getInitDataFromRoutePath:function(){var t=this.$route.params.isQuotation;if(t||this.curPriceItem&&this.curCraftPriceItemData&&this.curCraftPriceItemData.Craft||this.curSolutionItem){var i=this.curPriceItem,e=i.ID,a=i.Name;this.PriceID=e,this.PriceName=a,this.ProductID=this.$route.params.id,this.ProductName=this.$route.params.name,t&&(this.isQuotationPage=t)}else this.onGoBackClick()},FetchInitDatas:function(){var t=this;return Object(s.a)(regeneratorRuntime.mark((function i(){var e,s,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Promise.all([t.$store.dispatch("priceManage/getProductCraftData",t.$route.params.id),t.$store.dispatch("priceManage/getPriceTablePropertyList",t.$route.params.id)]);case 2:e=i.sent,s=Object(a.a)(e,1),r=s[0],t.productData=r,t.loading=!1;case 7:case"end":return i.stop()}}),i)})))()},onGoBackClick:function(){var t=this.$route.params,i=this.isQuotationPage?"QuotationList":"CompositionCostOfCraft";this.$router.replace({name:i,params:t})},onAxisPropSetupClick:function(t){"X"===t&&this.XAxisProp?this.selectedElementIDs=[this.XAxisProp.StoredContent]:"Y"===t&&this.YAxisProp?this.selectedElementIDs=[this.YAxisProp.StoredContent]:this.selectedElementIDs=[],this.curAxisPropSetType=t,this.AxisPropVisible=!0},onAxisDataSetupClick:function(t){this.curAxisPropSetType=t,this.AxisPropDataSetVisible=!0},onTableItemDataSetClick:function(){},onAxisPropSelect:function(t){"X"===this.curAxisPropSetType&&(this.PriceTableData.XAxis.Property=t),"Y"===this.curAxisPropSetType&&(this.PriceTableData.YAxis.Property=t)},onExcelImportClick:function(){}},created:function(){this.PriceTableData=new l(this.curEditPriceItemData)},mounted:function(){this.getInitDataFromRoutePath(),this.FetchInitDatas()}},b=(e("6279"),Object(P.a)(h,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.PriceTableData?e("section",{staticClass:"mp-erp-price-module-price-table-common-set-page-wrap"},[e("header",[e("div",{staticClass:"title-box"},[e("h2",[t._v(t._s(t.$route.params.name))]),e("span",[t._v("价格名称："+t._s(t.curPriceItem?t.curPriceItem.Name:""))]),!t.isQuotationPage&&t.curCraftPriceItemData?e("span",[t._v("设置工艺："+t._s(t.curCraftPriceItemData.Craft.Name))]):t._e()]),e("div",{staticClass:"import"},[e("span",{staticClass:"mp-common-title-wrap black f-15"},[t._v(t._s(t.curSolutionItem.ShowName))]),e("div",[e("span",{staticClass:"blue-span",on:{click:t.onExcelImportClick}},[t._v("导入表")]),e("span",{staticClass:"condition"},[t._v(t._s(t.ConstraintContent))])])]),e("div",{staticClass:"setup"},[e("ul",{staticClass:"l"},[e("li",[e("span",{staticClass:"label"},[t._v("横轴：")]),e("span",{staticClass:"blue-span",class:{disabled:t.loading},on:{click:function(i){return t.onAxisPropSetupClick("X")}}},[t._v("设置")]),e("span",{staticClass:"content"},[t._v(t._s(t.XAxisProp?t.XAxisProp.DisplayContent.replace(/\[|\]/g,""):"未设置"))]),e("span",{staticClass:"blue-span",class:{disabled:!t.XAxisProp},on:{click:function(i){return t.onAxisDataSetupClick("X")}}},[t._v("设置数据")]),e("el-checkbox",{attrs:{disabled:!t.XAxisProp},model:{value:t.PriceTableData.XAxis.IsCumsum,callback:function(i){t.$set(t.PriceTableData.XAxis,"IsCumsum",i)},expression:"PriceTableData.XAxis.IsCumsum"}},[t._v("分段累加")])],1),e("li",[e("span",{staticClass:"label"},[t._v("竖轴：")]),e("span",{staticClass:"blue-span",class:{disabled:t.loading},on:{click:function(i){return t.onAxisPropSetupClick("Y")}}},[t._v("设置")]),e("span",{staticClass:"content"},[t._v(t._s(t.YAxisProp?t.YAxisProp.DisplayContent.replace(/\[|\]/g,""):"未设置"))]),e("span",{staticClass:"blue-span",class:{disabled:!t.YAxisProp},on:{click:function(i){return t.onAxisDataSetupClick("Y")}}},[t._v("设置数据")]),e("el-checkbox",{attrs:{disabled:!t.YAxisProp},model:{value:t.PriceTableData.YAxis.IsCumsum,callback:function(i){t.$set(t.PriceTableData.YAxis,"IsCumsum",i)},expression:"PriceTableData.YAxis.IsCumsum"}},[t._v("分段累加")])],1)]),e("div",{staticClass:"r"},[e("span",{staticClass:"label"},[t._v("数据：")]),e("span",{staticClass:"blue-span",on:{click:t.onTableItemDataSetClick}},[t._v("设置")]),e("div",[e("p",[t._v("数据单位："+t._s(t.FormDataUnit||"无"))]),e("p",[t._v("其他数据："+t._s(t.OtherDataUnit||"未设置"))])])])])]),e("main",[e("FormulaPanelElementSelectDialog",{attrs:{visible:t.AxisPropVisible,selectedElementIDs:t.selectedElementIDs,list:t.PriceItemPropertyList},on:{"update:visible":function(i){t.AxisPropVisible=i},submit:t.onAxisPropSelect}}),e("AxisPropDataSetDialog",{attrs:{":visible":t.AxisPropDataSetVisible},on:{"update::visible":function(i){t.AxisPropDataSetVisible=i}}})],1),e("footer",[e("el-button",{on:{click:t.onGoBackClick}},[e("i",{staticClass:"el-icon-d-arrow-left"}),t._v(" 返回")])],1)]):t._e()}),[],!1,null,null,null));i.default=b.exports},6279:function(t,i,e){"use strict";var a=e("1219");e.n(a).a},c3b9:function(t,i,e){"use strict";var a=e("f726");e.n(a).a},f726:function(t,i,e){}}]);