(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-10bdf5bc"],{"08e4":function(t,e,i){"use strict";var n=i("61b5");i.n(n).a},"2bab":function(t,e,i){"use strict";var n=(i("7db0"),i("caad"),i("2532"),{model:{prop:"value",event:"change"},props:{placeholder:{type:String,default:"请选择或输入数字"},InputContent:{type:String,default:""},Allow:{type:Boolean,default:!1},value:{}},computed:{options:function(){return this.InputContent?this.$utils.getNumberValueList(this.InputContent):[]},content:{get:function(){return this.value},set:function(t){this.$emit("change",t)}}},methods:{onBlur:function(t){this.$emit("change",t.target.value)}},mounted:function(){var t=this;if(this.Allow&&this.$refs.oSelect){var e=this.$refs.oSelect.onInputChange,i=this.$refs.oSelect.$children.find((function(t){return t.$el.className.includes("el-input")}));this.$refs.oSelect.onInputChange=function(){i&&t.$emit("change",i.value),e()}}}}),a=(i("75a9"),i("2877")),r=Object(a.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.InputContent?i("el-select",{ref:"oSelect",staticClass:"mp-erp-number-type-element-display-select-comp",attrs:{filterable:"","default-first-option":"","allow-create":t.Allow,placeholder:t.placeholder,size:"small"},nativeOn:{blur:function(e){return t.onBlur(e)},change:function(e){return t.onBlur(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}},t._l(t.options,(function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})})),1):i("el-input",{staticClass:"mp-erp-number-type-element-display-input-comp",attrs:{size:"small",maxlength:"9"},model:{value:t.content,callback:function(e){t.content="string"==typeof e?e.trim():e},expression:"content"}})}),[],!1,null,null,null);e.a=r.exports},3834:function(t,e,i){},"3baf":function(t,e,i){"use strict";var n=i("d544");i.n(n).a},"3d96":function(t,e,i){"use strict";var n={model:{prop:"value",event:"change"},props:{placeholder:{type:String,default:"请选择"},value:{},options:{type:Array,default:function(){return[]}},canRadio:{type:Boolean,default:!0},Allow:{type:Boolean,default:!1}},computed:{checkVal:{get:function(){return this.value},set:function(t){this.$emit("change",t)}}}},a=(i("a903"),i("2877")),r=Object(a.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return!t.canRadio||t.options.length>3?i("el-select",{staticClass:"mp-erp-option-type-element-display-select-comp",attrs:{placeholder:t.placeholder,filterable:"","default-first-option":"","allow-create":t.Allow,size:"small"},model:{value:t.checkVal,callback:function(e){t.checkVal=e},expression:"checkVal"}},t._l(t.options,(function(t){return i("el-option",{key:t.ID,attrs:{label:t.Name,value:t.ID}})})),1):i("el-radio-group",{model:{value:t.checkVal,callback:function(e){t.checkVal=e},expression:"checkVal"}},t._l(t.options,(function(e){return i("el-radio",{key:e.ID,attrs:{label:e.ID}},[t._v(t._s(e.Name))])})),1)}),[],!1,null,null,null);e.a=r.exports},"42e5":function(t,e,i){"use strict";var n=i("fbe9");i.n(n).a},"59d2":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return l})),i("7db0"),i("4160"),i("d3b7"),i("25f0"),i("159b");var n=i("5530"),a=i("d4ec"),r=i("bee2"),s=i("ade3"),o=function(t,e){var i="",n="";return t&&0!==t.length?e&&e.length>0&&(t[0].forEach((function(t){var n=e.find((function(e){return e.ID===t}));n&&(i+=n.DisplayContent)})),t.forEach((function(t,i){i>0&&t.forEach((function(t,i){var a=e.find((function(e){return e.ID===t}));a&&(0===i&&n&&(n+=" "),n+=a.DisplayContent)}))}))):e&&e.length>0&&(i=e[0].DisplayContent,e.forEach((function(t,e){e>0&&(n+=t.DisplayContent)}))),{lv1Title:i,itemContent:n}},l=function(){function t(e){if(Object(a.a)(this,t),Object(s.a)(this,"ID",""),Object(s.a)(this,"Name",""),Object(s.a)(this,"SingleLenRadio",!0),Object(s.a)(this,"SingleLength",""),Object(s.a)(this,"MinLength",""),Object(s.a)(this,"MaxLength",""),Object(s.a)(this,"LengthIncrement",""),Object(s.a)(this,"IsLengthSplit",!1),Object(s.a)(this,"SingleWidthRadio",!0),Object(s.a)(this,"SingleWidth",""),Object(s.a)(this,"MinWidth",""),Object(s.a)(this,"MaxWidth",""),Object(s.a)(this,"WidthIncrement",""),Object(s.a)(this,"IsWidthSplit",!1),e&&"[object Object]"===Object.prototype.toString.call(e)){var i=JSON.parse(JSON.stringify(e)),n=i.ID,r=i.Name,o=i.IsLengthSplit,l=i.IsWidthSplit,c=i.MinLength,u=i.MinWidth,p=i.MaxLength,h=i.MaxWidth,m=i.LengthIncrement,d=i.WidthIncrement;n&&(this.ID=n),r&&(this.Name=r),o&&(this.IsLengthSplit=o),l&&(this.IsWidthSplit=l),c||0===c?(this.SingleLenRadio=!1,this.MinLength=c,this.MaxLength=p,this.LengthIncrement=m):this.SingleLength=p,u||0===u?(this.SingleWidthRadio=!1,this.MinWidth=u,this.MaxWidth=h,this.WidthIncrement=d):this.SingleWidth=h}}return Object(r.a)(t,null,[{key:"formatSubmit",value:function(t){var e=Object(n.a)({},t);return e.SingleLenRadio&&(e.MaxLength=e.SingleLength,delete e.MinLength,delete e.LengthIncrement),e.SingleWidthRadio&&(e.MaxWidth=e.SingleWidth,delete e.MinWidth,delete e.WidthIncrement),delete e.SingleLenRadio,delete e.SingleLength,delete e.SingleWidthRadio,delete e.SingleWidth,e}}]),t}()},"61b5":function(t,e,i){},"63bf":function(t,e,i){},6543:function(t,e,i){"use strict";var n=i("dd28");i.n(n).a},"75a9":function(t,e,i){"use strict";var n=i("8012");i.n(n).a},"7fde":function(t,e,i){"use strict";var n=i("3834");i.n(n).a},8012:function(t,e,i){},"8a34":function(t,e,i){"use strict";i.r(e);var n=(i("99af"),i("4de4"),i("7db0"),i("c740"),i("4160"),i("caad"),i("d81d"),i("a434"),i("b0c0"),i("ac1f"),i("2532"),i("5319"),i("159b"),i("2909")),a=i("3835"),r=(i("96cf"),i("1da1")),s=i("5530"),o=i("6e84"),l=i("7775"),c=i("59d2"),u=i("2f62"),p=(i("13d5"),i("b64b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.itemData?i("div",{staticClass:"mp-erp-comps-pruduct-module-material-select-dialog-comp-content-item-wrap"},[i("div",{staticClass:"header"},[i("el-checkbox",{attrs:{indeterminate:t.isIndeterminateAll},model:{value:t.checkItemAll,callback:function(e){t.checkItemAll=e},expression:"checkItemAll"}},[t._v(t._s(t.itemData.Name))]),t.showContent?i("div",{staticClass:"extend-box",on:{click:function(e){t.extend=!t.extend}}},[t.extend?i("span",[t._v("收起")]):i("span",[t._v("展开")]),t.extend?i("i",{staticClass:"el-icon-arrow-up"}):i("i",{staticClass:"el-icon-arrow-down"})]):t._e()],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showContent&&t.extend,expression:"showContent && extend"}],staticClass:"content"},t._l(t.itemData.List,(function(e){return i("el-checkbox",{key:"item-check"+e.ID,attrs:{title:e.itemContent,value:t.checkedIDList.includes(e.ID)},on:{change:function(i){return t.change(e)}}},[t._v(" "+t._s(e.itemContent)+" ")])})),1)]):t._e()}),h={model:{prop:"value",event:"change"},props:{itemData:{type:Object,default:null},value:{type:Array,default:function(){return[]}}},data:function(){return{extend:!0}},computed:{showContent:function(){return!!this.itemData&&(this.itemData.List.length>1||!(1!==this.itemData.List.length||!this.itemData.List[0].itemContent))},itemDataIds:function(){return this.itemData?this.itemData.List.map((function(t){return t.ID})):[]},checkedIDList:function(){var t=this;return 0===this.itemDataIds.length||0===this.value.length?[]:this.value.filter((function(e){return t.itemDataIds.includes(e.ID)})).map((function(t){return t.ID}))},checkItemAll:{get:function(){return this.itemDataIds.length>0&&this.checkedIDList.length===this.itemDataIds.length},set:function(t){var e=t?this.itemData.List:[];this.$emit("change",[this.checkedIDList,e])}},isIndeterminateAll:function(){return this.checkedIDList.length>0&&this.checkedIDList.length<this.itemDataIds.length}},methods:{change:function(t){var e=this,i=!this.checkedIDList.includes(t.ID),a=this.itemData.List.filter((function(t){return e.checkedIDList.includes(t.ID)})),r=i?[].concat(Object(n.a)(a),[t]):a.filter((function(e){return e.ID!==t.ID}));this.$emit("change",[a.map((function(t){return t.ID})),r])}}},m=(i("bf5c"),i("2877")),d=Object(m.a)(h,p,[],!1,null,null,null).exports,f={model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},typeList:{type:Array,default:function(){return[]}},dataList:{type:Array,default:function(){return[]}},MaterialLocalList:{type:Array,default:function(){return[]}},checkedList:{type:Array,default:function(){return[]}},value:{type:Object,default:null}},components:{SelectContentItem:d},data:function(){return{activeType:"",list:[],isEdit:!1}},computed:{curTypeDataList:function(){var t=this;if(!this.activeType||!this.dataList||0===this.dataList.length)return[];var e=this.dataList.filter((function(e){return e.Type&&e.Type.ID===t.activeType})),i={};return e.forEach((function(t){var e=t.Type,n=e.UnionShowList,a=e.ElementList,r=Object(c.b)(n,a),o=r.lv1Title,l=r.itemContent;i[o]||(i[o]=[]),i[o].push(Object(s.a)({},t,{itemContent:l}))})),Object.keys(i).map((function(t){return{Name:t,List:i[t]}}))},curTypeItemList:function(){return this.curTypeDataList&&0!==this.curTypeDataList.length?this.curTypeDataList.map((function(t){return t.List})).reduce((function(t,e){return[].concat(Object(n.a)(t),Object(n.a)(e))})):[]},curTypeListIds:function(){return this.curTypeItemList&&0!==this.curTypeItemList.length?this.curTypeItemList.map((function(t){return t.ID})):[]},curCheckedList:function(){var t=this;return this.activeType&&0!==this.curTypeDataList.length&&0!==this.list.length?this.list.filter((function(e){return t.curTypeListIds.includes(e.ID)&&e.Type&&e.Type.ID===t.activeType})):[]},checkAll:{get:function(){return this.curTypeDataList.length>0&&this.curCheckedList.length===this.curTypeItemList.length},set:function(t){var e,i=this;this.list=this.list.filter((function(t){return t.Type&&t.Type.ID!==i.activeType})),t&&(e=this.list).push.apply(e,Object(n.a)(this.curTypeItemList))}},isIndeterminateAll:function(){return this.curCheckedList.length>0&&this.curCheckedList.length<this.curTypeItemList.length},itemCheckedList:{get:function(){return this.curCheckedList},set:function(t){var e,i=Object(a.a)(t,2),r=i[0],s=i[1];this.list=this.list.filter((function(t){return!r.includes(t.ID)})),(e=this.list).push.apply(e,Object(n.a)(s))}},canSelectTypeIDList:function(){if(!this.isEdit){var t=this.MaterialLocalList.map((function(t){return t.ID}));return this.typeList.filter((function(e){return!t.includes(e.ID)})).map((function(t){return t.ID}))}return this.value?[this.value.ID]:[]}},methods:{onSubmit:function(){this.curCheckedList&&0!==this.curCheckedList.length?this.$emit("change",[this.curCheckedList,this.activeType,this.isEdit]):this.messageBox.failSingle("未选中物料")},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.list=[],this.isEdit=!1,this.activeType=""},handleClose:function(){this.onCancle()},initEditData:function(){var t=this;this.typeList&&Array.isArray(this.typeList)?this.typeList.length>0&&(this.value?(this.isEdit=!0,this.activeType=this.value.ID,this.list=this.value.List):(this.isEdit=!1,this.$nextTick((function(){if(t.canSelectTypeIDList&&t.canSelectTypeIDList.length>0){var e=Object(a.a)(t.canSelectTypeIDList,1)[0];t.activeType=e}})))):this.onCancle()},onLabelClick:function(t){var e=t.ID;this.canSelectTypeIDList.includes(e)&&(this.activeType=e)}}},v=(i("f156"),Object(m.a)(f,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-drawer",{staticClass:"mp-erp-comps-pruduct-module-material-select-dialog-comp-wrap",attrs:{visible:t.visible,"show-close":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e},open:t.onOpen,closed:t.onClosed}},[i("span",{staticClass:"explain-title",attrs:{slot:"title"},on:{click:t.handleClose},slot:"title"},[i("i",{staticClass:"el-icon-arrow-right"}),t._v(" 物料选择 "),i("em",[t._v("（ 添加时只允许添加尚未被添加过的分类；编辑时只能编辑当前分类，不能调整为其它分类；一次保存只能保存一个分类 ）")])]),i("section",{staticClass:"drawer-content"},[i("aside",[i("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[i("div",t._l(t.typeList,(function(e){return i("span",{key:"aside"+e.ID,class:{active:t.activeType===e.ID,disabled:!t.canSelectTypeIDList.includes(e.ID)},attrs:{title:e.Name},on:{click:function(i){return t.onLabelClick(e)}}},[t._v(" "+t._s(e.Name)+" ")])})),0)])],1),i("div",{staticClass:"content"},[t.curTypeDataList.length>0?i("p",{staticClass:"check-all"},[i("el-checkbox",{attrs:{indeterminate:t.isIndeterminateAll},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")])],1):t._e(),t._l(t.curTypeDataList,(function(e,n){return i("SelectContentItem",{key:e.Name+n,attrs:{itemData:e},model:{value:t.itemCheckedList,callback:function(e){t.itemCheckedList=e},expression:"itemCheckedList"}})})),t.activeType&&0===t.curTypeDataList.length?i("p",{staticClass:"empty"},[i("i"),i("span",[t._v("所选分类暂无可用物料")])]):t._e(),t.activeType?t._e():i("p",{staticClass:"empty"},[i("i"),i("span",[t._v("请选择左侧物料类型")])])],2)]),i("footer",[i("el-button",{attrs:{type:"primary",disabled:!t.curCheckedList||0===t.curCheckedList.length},on:{click:t.onSubmit}},[t._v("保存")]),i("el-button",{on:{click:t.onCancle}},[t._v("取消")])],1)])}),[],!1,null,null,null)).exports,b=i("ede4"),g={props:{itemData:{type:Object,default:null}},data:function(){return{extend:!0}},computed:{showContent:function(){return!!this.itemData&&(this.itemData.List.length>1||!(1!==this.itemData.List.length||!this.itemData.List[0].itemContent))},checkItemAll:{get:function(){return!this.itemData.List.find((function(t){return!t.HiddenToCustomer}))&&this.itemData.List.length>0},set:function(t){var e=t?this.itemData.List:[];this.$emit("change",e)}},isIndeterminateAll:function(){var t=this.itemData.List.find((function(t){return!t.HiddenToCustomer})),e=this.itemData.List.find((function(t){return t.HiddenToCustomer}));return!(!t||!e)}},methods:{change:function(t){var e=t.ID;this.$emit("change",e)}}},S=(i("7fde"),Object(m.a)(g,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.itemData?i("div",{staticClass:"mp-erp-comps-pruduct-module-material-hidden-drawer-comp-content-item-wrap"},[i("div",{staticClass:"header"},[i("el-checkbox",{attrs:{indeterminate:t.isIndeterminateAll},model:{value:t.checkItemAll,callback:function(e){t.checkItemAll=e},expression:"checkItemAll"}},[t._v(t._s(t.itemData.Name))]),t.showContent?i("div",{staticClass:"extend-box",on:{click:function(e){t.extend=!t.extend}}},[t.extend?i("span",[t._v("收起")]):i("span",[t._v("展开")]),t.extend?i("i",{staticClass:"el-icon-arrow-up"}):i("i",{staticClass:"el-icon-arrow-down"})]):t._e()],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showContent&&t.extend,expression:"showContent && extend"}],staticClass:"content"},t._l(t.itemData.List,(function(e){return i("el-checkbox",{key:"item-hidden"+e.ID,attrs:{value:e.HiddenToCustomer,title:e.itemContent},on:{change:function(i){return t.change(e)}}},[t._v(" "+t._s(e.itemContent)+" ")])})),1)]):t._e()}),[],!1,null,null,null)).exports,C={model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},value:{type:Array,default:function(){return[]}}},components:{SetHiddenContentItem:S},data:function(){return{list:[]}},methods:{onSubmit:function(){var t=[];this.list.forEach((function(e){e.ShowList.forEach((function(e){e.List.forEach((function(e){e.HiddenToCustomer&&t.push(e.ID)}))}))})),this.$emit("change",t)},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.list=[]},handleClose:function(){this.onCancle()},initEditData:function(){this.list=JSON.parse(JSON.stringify(this.value))},change:function(t,e,i){var n=this.list[e].ShowList[i];if(n&&n.List){if("string"==typeof t){var a=n.List.find((function(e){return e.ID===t}));a&&(a.HiddenToCustomer=!a.HiddenToCustomer)}Array.isArray(t)&&(n.List=n.List.map((function(e){return Object(s.a)({},e,{HiddenToCustomer:t.length>0})})))}}}},L=(i("08e4"),Object(m.a)(C,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-drawer",{staticClass:"mp-erp-comps-pruduct-module-material-hidden-drawer-comp-wrap",attrs:{visible:t.visible,"show-close":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e},open:t.onOpen,closed:t.onClosed}},[i("span",{staticClass:"explain-title",attrs:{slot:"title"},on:{click:t.handleClose},slot:"title"},[i("i",{staticClass:"el-icon-arrow-right"}),t._v(" 设置隐藏 ")]),i("section",{staticClass:"drawer-content"},[i("ul",t._l(t.list,(function(e,n){return i("li",{key:e.ID},[i("p",{staticClass:"mp-common-title-wrap"},[t._v(t._s(e.Name))]),i("div",t._l(e.ShowList,(function(e,a){return i("SetHiddenContentItem",{key:e.Name+a,attrs:{itemData:e},on:{change:function(e){return t.change(e,n,a)}}})})),1)])})),0)]),i("footer",[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),i("el-button",{on:{click:t.onCancle}},[t._v("取消")])],1)])}),[],!1,null,null,null)).exports,I={props:{curProduct:{type:Object,default:null},curPart:{type:Object,default:null},MaterialList:{type:Array,default:function(){return[]}}},components:{MaterialSelectDialog:v,MaterialSortDialog:b.a,MaterialHiddenDrawer:L},data:function(){return{title:"",isTitleEditing:!1,MaterialSaveVisible:!1,curEditMaterialData:null,MaterialSortVisible:!1,MaterialHiddentVisible:!1}},computed:Object(s.a)({},Object(u.e)("basicSet",["MaterialTypeList"]),{},Object(u.e)("common",["MaterialAllList"]),{MaterialDisplayName:function(){return this.curProduct?this.curPart?this.curPart.MaterialDisplayName:this.curProduct.MaterialDisplayName:""},MaterialSelectDialogSetData:{get:function(){return this.curEditMaterialData},set:function(t){var e=Object(a.a)(t,3),i=e[0],n=e[1],r=e[2];this.$emit("MaterialSaveSubmit",[n,i,r])}},MaterialLocalList:function(){if(!this.MaterialList||!Array.isArray(this.MaterialList)||0===this.MaterialList.length)return[];var t=[];return this.MaterialList.forEach((function(e){var i=e.Type,n=i.ID,a=i.Name,r=i.UnionShowList,o=i.ElementList,l=Object(c.b)(r,o),u=l.lv1Title,p=l.itemContent,h=t.find((function(t){return t.ID===n})),m=Object(s.a)({},e,{FirstName:u,itemContent:p});h?h.List.push(m):t.push({ID:n,Name:a,List:[m]})})),t=t.map((function(t){var e=[];return t.List.forEach((function(t){var i=e.find((function(e){return t.FirstName===e.Name}));i?i.List.push(t):e.push({Name:t.FirstName,List:[t]})})),Object(s.a)({},t,{ShowList:e})}))},MaterialIsHiddenList:function(){return this.MaterialLocalList.map((function(t){return Object(s.a)({},t,{ShowList:t.ShowList.map((function(t){return Object(s.a)({},t,{List:t.List.filter((function(t){return t.HiddenToCustomer}))})})).filter((function(t){return t.List.length>0}))})})).filter((function(t){return t.ShowList.length>0}))},MaterialSortListData:{get:function(){return this.MaterialLocalList&&Array.isArray(this.MaterialLocalList)&&0!==this.MaterialLocalList.length?this.MaterialLocalList.map((function(t){return{ID:t.ID,Name:t.Name}})):[]},set:function(t){t&&0!==t.length&&this.$emit("MaterialSortSubmit",t)}},MaterialHiddentListData:{get:function(){return this.MaterialLocalList},set:function(t){t.length!==this.MaterialList.length?this.$emit("MaterialSetHiddenSubmit",t):this.messageBox.failSingle("不能全选，应至少保留一种物料类型")}}}),methods:{initData:function(){this.$store.dispatch("basicSet/getMaterialTypeList"),this.$store.dispatch("common/getMaterialAllList")},onTitleEditClick:function(){this.title=this.MaterialDisplayName,this.isTitleEditing=!0},onTitleSaveClick:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var i,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.title!==t.MaterialDisplayName){e.next=3;break}return t.messageBox.failSingle("物料提示名称未发生变化"),e.abrupt("return");case 3:if(t.title){e.next=6;break}return t.messageBox.failSingle("请输入物料提示名称"),e.abrupt("return");case 6:if(l.f.test(t.title)){e.next=9;break}return t.messageBox.failSingle("名称仅支持中文、英文(全角/半角)、+-_(全角/半角)、数字等"),e.abrupt("return");case 9:i=function(){t.isTitleEditing=!1},n=t.curProduct.ID,a=t.curPart?t.curPart.ID:"",t.$store.dispatch("productManage/getMaterialDisplayNameChange",[n,a,t.title,i]);case 13:case"end":return e.stop()}}),e)})))()},onMaterialSaveClick:function(t){this.MaterialTypeList&&0!==this.MaterialTypeList.length?(this.curEditMaterialData=t,this.MaterialSaveVisible=!0):this.messageBox.failSingle("尚无物料相关设置，请先到物料管理里面进行设置")},onMaterialRemoveClick:function(t){var e=this;this.messageBox.warnCancelBox("确定删除该类物料吗?","物料种类：[ ".concat(t.Name," ]"),(function(){e.$emit("MaterialTypeRemove",t)}))}},mounted:function(){this.initData()}},D=(i("bb2e"),Object(m.a)(I,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mp-erp-product-page-material-size-comp-left-conten-wrap"},[i("header",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.onMaterialSaveClick(null)}}},[t._v("+添加物料")]),i("span",{staticClass:"title"},[t._v("物料提示名称：")]),t.isTitleEditing?[i("el-input",{attrs:{size:"mini",maxlength:"10","show-word-limit":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onTitleSaveClick(e)}},model:{value:t.title,callback:function(e){t.title="string"==typeof e?e.trim():e},expression:"title"}}),i("span",{staticClass:"blue-span menu",on:{click:t.onTitleSaveClick}},[t._v("保存")]),i("span",{staticClass:"red-span menu",on:{click:function(e){t.isTitleEditing=!1}}},[t._v("取消")]),i("span",{staticClass:"tip"},[t._v("（可回车保存）")])]:[i("span",{staticClass:"value"},[t._v(t._s(this.MaterialDisplayName))]),i("span",{staticClass:"blue-span menu",on:{click:t.onTitleEditClick}},[t._v("编辑名称")])]],2),i("main",[i("MaterialSelectDialog",{attrs:{visible:t.MaterialSaveVisible,MaterialLocalList:t.MaterialLocalList,dataList:t.MaterialAllList,typeList:t.MaterialTypeList},on:{"update:visible":function(e){t.MaterialSaveVisible=e}},model:{value:t.MaterialSelectDialogSetData,callback:function(e){t.MaterialSelectDialogSetData=e},expression:"MaterialSelectDialogSetData"}}),i("ul",{staticClass:"material-list"},t._l(t.MaterialLocalList,(function(e){return i("li",{key:e.ID},[i("p",[t._v(t._s(e.Name))]),i("div",{staticClass:"sub-list"},t._l(e.ShowList,(function(e){return i("span",{key:e.Name},[t._v(t._s(e.Name)+"（"+t._s(e.List.length)+"种） ")])})),0),i("div",{staticClass:"menu"},[i("span",{on:{click:function(i){return t.onMaterialSaveClick(e)}}},[i("i",{staticClass:"edit"}),t._v(" 编辑")]),i("span",{on:{click:function(i){return t.onMaterialRemoveClick(e)}}},[i("i"),t._v(" 删除")])])])})),0),i("p",{staticClass:"sort"},[t.MaterialLocalList.length>1?i("span",{staticClass:"blue-span",on:{click:function(e){t.MaterialSortVisible=!0}}},[t._v("一级组合排序")]):t._e()]),i("MaterialSortDialog",{attrs:{visible:t.MaterialSortVisible},on:{"update:visible":function(e){t.MaterialSortVisible=e}},model:{value:t.MaterialSortListData,callback:function(e){t.MaterialSortListData=e},expression:"MaterialSortListData"}}),t.MaterialList.length>0?i("div",{staticClass:"material-hidden-list"},[i("p",[i("span",{staticClass:"mp-common-title-wrap"},[t._v("客户界面隐藏")]),i("span",{staticClass:"blue-span",on:{click:function(e){t.MaterialHiddentVisible=!0}}},[t._v("设置隐藏")])])]):t._e(),i("MaterialHiddenDrawer",{attrs:{visible:t.MaterialHiddentVisible},on:{"update:visible":function(e){t.MaterialHiddentVisible=e}},model:{value:t.MaterialHiddentListData,callback:function(e){t.MaterialHiddentListData=e},expression:"MaterialHiddentListData"}}),i("ul",{staticClass:"material-list"},t._l(t.MaterialIsHiddenList,(function(e){return i("li",{key:e.ID},[i("p",[t._v(t._s(e.Name))]),i("div",{staticClass:"sub-list"},t._l(e.ShowList,(function(e){return i("span",{key:e.Name},[t._v(t._s(e.Name)+"（"+t._s(e.List.length)+"种） ")])})),0)])})),0)],1)])}),[],!1,null,null,null)).exports,y=i("ad32"),k={model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},value:{type:Object,default:null},PositionID:{type:String,default:""}},components:{CommonDialogComp:y.a},data:function(){return{ElementGroup:[],loading:!1,ruleForm:null}},computed:{canUseGroupData:function(){return 0===this.ElementGroup.length?[]:this.ElementGroup.filter((function(t){var e=t.ElementList,i=t.UseTimes,n=i.MinValue,a=i.MaxValue;return 1===n&&1===a&&!e.find((function(t){var e=t.Type,i=t.OptionAttribute;return!(3!==e&&(2!==e||!i||0!==i.OptionList.length&&i.IsRadio))}))}))}},methods:{onSubmit:function(){var t=this;if(this.ruleForm.GroupInfo.ID)if(this.value&&this.value.GroupInfo&&this.ruleForm.GroupInfo.ID===this.value.GroupInfo.ID&&this.ruleForm.AllowCustomize===this.value.AllowCustomize&&this.ruleForm.AllowCustomerCustomize===this.value.AllowCustomerCustomize&&this.ruleForm.IsCheckedCustomize===this.value.IsCheckedCustomize&&this.ruleForm.IsCheckedCustomerCustomize===this.value.IsCheckedCustomerCustomize)this.messageBox.failSingle("未发生更改，可选择关闭");else if(this.value&&this.value.GroupInfo&&this.ruleForm.GroupInfo.ID!==this.value.GroupInfo.ID){this.messageBox.warnCancelBox("当前已设置尺寸组","如果更改尺寸组，则所有固定尺寸将被清空，确定更改吗？",(function(){var e=t.canUseGroupData.find((function(e){return e.ID===t.ruleForm.GroupInfo.ID}))||t.ruleForm.GroupInfo,i=Object(s.a)({},t.ruleForm,{GroupInfo:e,SizeList:[]});t.$emit("change",i)}))}else{var e=this.canUseGroupData.find((function(e){return e.ID===t.ruleForm.GroupInfo.ID}))||this.ruleForm.GroupInfo,i=Object(s.a)({},this.ruleForm,{GroupInfo:e});this.$emit("change",i)}else this.messageBox.failSingle("请选择元素组")},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.ElementGroup=[],this.ruleForm=null},initEditData:function(){if(this.value&&this.value.GroupInfo){var t=this.value,e=t.AllowCustomize,i=t.AllowCustomerCustomize,n=t.IsCheckedCustomize,a=t.IsCheckedCustomerCustomize,r=t.GroupInfo,s=t.SizeList;this.ruleForm={AllowCustomize:e,AllowCustomerCustomize:i,IsCheckedCustomize:n,IsCheckedCustomerCustomize:a,GroupInfo:{ID:r.ID},SizeList:s}}else this.ruleForm={AllowCustomize:!1,AllowCustomerCustomize:!1,IsCheckedCustomize:!1,IsCheckedCustomerCustomize:!1,GroupInfo:{ID:""},SizeList:[]};this.getElementGroupData()},getElementGroupData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.PositionID){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,e.next=5,t.api.getElementGroupList(t.PositionID).catch((function(){}));case 5:i=e.sent,t.loading=!1,i&&i.data&&1e3===i.data.Status&&(t.ElementGroup=i.data.Data);case 8:case"end":return e.stop()}}),e)})))()}}},z=(i("dbdd"),Object(m.a)(k,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CommonDialogComp",{staticClass:"mp-erp-comps-pruduct-module-size-group-set-dialog-comp-wrap",attrs:{width:"650px",top:"18vh",title:"设置尺寸组",cancelText:"关闭",visible:t.visible,disabled:0===t.ElementGroup.length||0===t.canUseGroupData.length},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[0!==t.ElementGroup.length||t.loading?0!==t.canUseGroupData.length||t.loading?t.ruleForm&&!t.loading?[i("el-radio-group",{model:{value:t.ruleForm.GroupInfo.ID,callback:function(e){t.$set(t.ruleForm.GroupInfo,"ID",e)},expression:"ruleForm.GroupInfo.ID"}},t._l(t.canUseGroupData,(function(e){return i("el-radio",{key:e.ID,attrs:{label:e.ID}},[t._v(t._s(e.Name))])})),1),i("div",{staticClass:"footer"},[i("el-checkbox",{model:{value:t.ruleForm.AllowCustomize,callback:function(e){t.$set(t.ruleForm,"AllowCustomize",e)},expression:"ruleForm.AllowCustomize"}},[t._v("允许自定义尺寸")]),i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.ruleForm.AllowCustomize,expression:"ruleForm.AllowCustomize"}],model:{value:t.ruleForm.AllowCustomerCustomize,callback:function(e){t.$set(t.ruleForm,"AllowCustomerCustomize",e)},expression:"ruleForm.AllowCustomerCustomize"}},[t._v("允许客户自定义")]),i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.ruleForm.AllowCustomize,expression:"ruleForm.AllowCustomize"}],model:{value:t.ruleForm.IsCheckedCustomize,callback:function(e){t.$set(t.ruleForm,"IsCheckedCustomize",e)},expression:"ruleForm.IsCheckedCustomize"}},[t._v("默认选中自定义")]),i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.ruleForm.AllowCustomize&&t.ruleForm.AllowCustomerCustomize,expression:"ruleForm.AllowCustomize && ruleForm.AllowCustomerCustomize"}],model:{value:t.ruleForm.IsCheckedCustomerCustomize,callback:function(e){t.$set(t.ruleForm,"IsCheckedCustomerCustomize",e)},expression:"ruleForm.IsCheckedCustomerCustomize"}},[t._v("客户默认选中自定义")])],1)]:t._e():i("p",{staticClass:"is-origin"},[i("i",{staticClass:"el-icon-warning"}),i("span",{staticStyle:{"font-size":"13px","letter-spacing":"1px"}},[t._v("当前产品或部件尚没有合适的元素组可设置（1. 元素组使用次数须为1-1，2. 不能包含开关元素， 3. 不能包含选项数量为0的选择项元素）")])]):i("p",{staticClass:"empty-element-group is-pink"},[i("i",{staticClass:"el-icon-warning"}),i("span",[t._v("当前产品或部件尚未设置元素组，请先设置元素组才可添加!")])])],2)}),[],!1,null,null,null)).exports,x=(i("a15b"),i("fb6a"),i("d3b7"),i("25f0"),i("6062"),i("3ca3"),i("ddb0"),i("53ca")),w=i("2bab"),M=i("3d96"),_=i("247a"),O=function(t,e){if(!t&&0!==t)return{msg:"值未设置",result:!1};var i=e.Type,n=e.NumbericAttribute,a=e.OptionAttribute,r=e.HiddenToCustomer;if(1===i){var s=n.AllowDecimal,o=n.SectionList,l=n.InputContent,c=n.Allow,u=n.AllowCustomer;if(!Object(_.g)(+t,!s))return{msg:"输入值错误，请输入正确的数字类型（".concat(s?"允许小数":"不允许小数","）"),result:!1};if(o&&Array.isArray(o)&&o.length>0){var p=Object(_.e)(l);if(p.includes("".concat(t)))return{msg:"",result:!0};if(!c&&!p.includes("".concat(t)))return{msg:"值不正确，不允许自定义，请从".concat(p,"中取值"),result:!1};if(!u&&!r&&!p.includes("".concat(t)))return{msg:"值不正确，不允许客户自定义，请从".concat(p,"中取值"),result:!1};for(var h=!1,m=0;m<o.length;m+=1){var d=o[m],f=d.MinValue,v=d.MaxValue,b=d.IsGeneralValue,g=d.Increment;if(+t>f&&(+t<=v||-1===v)){if(h=!0,!b&&(+t-f)%g!=0)return{msg:"输入值不合法，（".concat(f,", ").concat(v,"]区间内应符合增量为").concat(g),result:!1};if(b)return{msg:"输入值不合法，（".concat(f,", ").concat(v,"]区间内应从").concat(p,"对应区间中取值"),result:!1}}}if(!h){return{msg:"输入值不合法，不在分段控制范围内",result:!1}}}return{msg:"",result:!0}}if(2===i){var S=a.Allow,C=a.OptionList.map((function(t){return t.ID}));return S||C.includes(t)?{msg:"",result:!0}:{msg:"该选项元素不允许自定义",result:!1}}return{msg:"",result:!0}},G={props:{visible:{type:Boolean,default:!1},SizeGroup:{type:Object,default:null}},components:{CommonDialogComp:y.a,NumberTypeItemComp:w.a,OptionTypeItemComp:M.a},data:function(){return{ElementList:[],SizeList:[],template:null}},computed:{autoWidth:function(){return this.SizeGroup&&0!==this.ElementList.length?"".concat(100/this.ElementList.length,"%"):"100%"}},methods:{onSubmit:function(){var t=this;if(0===this.SizeList.length)return this.setErrorAndReturn("至少需设置一行固定尺寸");var e=this.SizeList.findIndex((function(t){return!t.Name}));if(e>-1)return this.setErrorAndReturn("第".concat(e+1,"行未设置名称"));if((e=this.SizeList.findIndex((function(t){return!l.f.test(t.Name)})))>-1)return this.setErrorAndReturn("第".concat(e+1,"行名称不合法，名称仅支持中文、英文(全角/半角)、+-_(全角/半角)、数字等"));var i=this.SizeList.map((function(t){return t.Name}));if(i.length>Object(n.a)(new Set(i)).length)return this.setErrorAndReturn("存在重复名称，请检查");for(var a=0;a<this.SizeList.length;a+=1)for(var r=this.SizeList[a].List,s=function(e){var i=r[e],n=i.First,s=i.Second,o=t.ElementList.find((function(t){var e=t.ID;return n===e}));if(o){var l=O(s,o),c=l.result,u=l.msg;if(!c)return{v:t.setErrorAndReturn("第".concat(a+1,"行").concat(o.Name).concat(u))}}},o=0;o<r.length;o+=1){var c=s(o);if("object"===Object(x.a)(c))return c.v}var u=this.SizeList.map((function(t){return t.List})).map((function(t){return t.map((function(t){return t.Second})).join("")}));return u.length>Object(n.a)(new Set(u)).length?this.setErrorAndReturn("存在设置项重复，请检查"):(this.$emit("submit",this.SizeList),!0)},setErrorAndReturn:function(t){return this.messageBox.failSingleError("保存失败",t),!1},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.template=null},onAddClick:function(){var t=JSON.parse(JSON.stringify(this.template)),e=this.SizeList.length,i=Math.random().toString(36).slice(-10),n=Object(s.a)({},t,{Index:e,key:i});this.SizeList.push(n)},onOptionMove:function(t,e){var i=this.SizeList.splice(e,1),n=Object(a.a)(i,1)[0],r="up"===t?e-1:e+1;this.SizeList.splice(r,0,n),this.SizeList.forEach((function(t,e){t.Index=e}))},onItemRemove:function(t){this.SizeList.splice(t,1)},initEditData:function(){var t=this;this.SizeGroup&&this.SizeGroup.GroupInfo&&(this.ElementList=this.SizeGroup.GroupInfo.ElementList,this.SizeList=JSON.parse(JSON.stringify(this.SizeGroup.SizeList)),this.template={ID:"",Name:"",Index:0,HiddenToCustomer:!1,List:[]},this.ElementList.forEach((function(e){var i={First:e.ID,Second:""};t.template.List.push(i)})))}}},T=(i("42e5"),Object(m.a)(G,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CommonDialogComp",{staticClass:"mp-erp-comps-pruduct-module-general-size-set-dialog-comp-wrap",attrs:{width:"950px",top:"10vh",title:"设置固定尺寸",cancelText:"关闭",visible:t.visible,disabled:t.SizeList&&0===t.SizeList.length},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[i("p",{staticClass:"btn-box"},[i("el-button",{staticClass:"border-blue-btn",attrs:{size:"mini"},on:{click:t.onAddClick}},[t._v("+ 添加一行")])],1),t.SizeGroup&&t.ElementList.length>0?i("div",[i("div",{staticClass:"header"},[i("span",{staticStyle:{width:"150px","padding-right":"6px"}},[t._v("名称")]),i("div",t._l(t.ElementList,(function(e){return i("span",{key:e.ID,style:"width:"+t.autoWidth,attrs:{title:e.Name}},[t._v(t._s(e.Name)),e.Unit?i("i",[t._v("（"+t._s(e.Unit)+"）")]):t._e()])})),0),i("span",{staticStyle:{width:"90px"}},[t._v("客户隐藏")]),i("span",{staticStyle:{width:"210px"}},[t._v("操作")])]),i("ul",t._l(t.SizeList,(function(e,n){return i("li",{key:e.key||e.ID,staticClass:"content-item"},[i("el-input",{staticClass:"name",attrs:{maxlength:"20",size:"small"},model:{value:e.Name,callback:function(i){t.$set(e,"Name","string"==typeof i?i.trim():i)},expression:"item.Name"}}),i("ul",{staticClass:"flex-content"},t._l(t.ElementList,(function(n,a){return i("li",{key:n.ID,style:"width:"+t.autoWidth},[1===n.Type?i("NumberTypeItemComp",{attrs:{InputContent:"",Allow:n.NumbericAttribute.Allow},model:{value:e.List[a].Second,callback:function(i){t.$set(e.List[a],"Second",i)},expression:"item.List[i].Second"}}):t._e(),2===n.Type?i("OptionTypeItemComp",{attrs:{options:n.OptionAttribute.OptionList,Allow:n.OptionAttribute.Allow,canRadio:!1},model:{value:e.List[a].Second,callback:function(i){t.$set(e.List[a],"Second",i)},expression:"item.List[i].Second"}}):t._e()],1)})),0),i("el-checkbox",{model:{value:e.HiddenToCustomer,callback:function(i){t.$set(e,"HiddenToCustomer",i)},expression:"item.HiddenToCustomer"}},[t._v("隐藏")]),i("div",{staticClass:"ctrl"},[i("span",{staticClass:"del-btn",on:{click:function(e){return t.onItemRemove(n)}}},[i("i"),t._v(" 删除")]),i("div",[i("span",{directives:[{name:"show",rawName:"v-show",value:n<t.SizeList.length-1,expression:"index < SizeList.length - 1"}],on:{click:function(e){return t.onOptionMove("down",n)}}},[i("i",{staticClass:"el-icon-bottom"}),t._v(" 下移")])]),i("div",[i("span",{directives:[{name:"show",rawName:"v-show",value:n>0,expression:"index > 0"}],on:{click:function(e){return t.onOptionMove("up",n)}}},[i("i",{staticClass:"el-icon-top"}),t._v(" 上移")])])])],1)})),0)]):t._e()])}),[],!1,null,null,null)).exports,A={props:{curProduct:{type:Object,default:null},curPart:{type:Object,default:null},SizeGroup:{type:Object,default:null}},components:{SizeGroupSetDialog:z,GeneralSizeSetDialog:T},data:function(){return{SizeGroupVisible:!1,GeneralSizeVisible:!1}},computed:{curPositionID:function(){return this.curProduct?this.curPart?this.curPart.ID:this.curProduct.ID:""},localSizeGroup:{get:function(){return this.SizeGroup},set:function(t){this.$emit("SizeGroupSubmit",t)}}},methods:{onGeneralSizeSaveClick:function(){this.SizeGroup?this.GeneralSizeVisible=!0:this.messageBox.failSingle("请先设置尺寸组")},setSizeGroupClick:function(){this.SizeGroupVisible=!0},onGeneralSizeSaveSubmit:function(t){this.$emit("GeneralSizeSubmit",t)},getContentList:function(t,e){var i=this,a=t.map((function(t){var e=t.First,n=t.Second,a=i.SizeGroup.GroupInfo.ElementList;if(!a)return n;var r="",s=a.find((function(t){return t.ID===e}));if(s){r="".concat(s.Name,"：");var o=n;if(2===s.Type){var l=s.OptionAttribute.OptionList.find((function(t){return t.ID===n}));l&&(o=l.Name)}r+=o,s.Unit&&(r+=s.Unit)}else r=n;return r})),r=e?"客户隐藏":"客户显示";return a=[].concat(Object(n.a)(a),[r])},onItemRemove:function(t){var e=this,i=t.Name,n=t.ID;this.messageBox.warnCancelBox("确定删除该固定尺寸吗","尺寸名称：[ ".concat(i," ]"),(function(){e.$emit("GeneralSizeRemove",n)}))}}},j=(i("3baf"),Object(m.a)(A,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mp-erp-product-page-material-size-comp-right-conten-wrap"},[i("header",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onGeneralSizeSaveClick}},[t._v("设置固定尺寸")]),i("span",{staticClass:"label"},[t._v("尺寸组：")]),i("span",{staticClass:"name"},[t._v(t._s(t.SizeGroup&&t.SizeGroup.GroupInfo?t.SizeGroup.GroupInfo.Name:"未设置"))]),i("span",{staticClass:"blue-span",on:{click:t.setSizeGroupClick}},[t._v("设置尺寸组")])],1),i("main",[i("SizeGroupSetDialog",{attrs:{visible:t.SizeGroupVisible,PositionID:t.curPositionID},on:{"update:visible":function(e){t.SizeGroupVisible=e}},model:{value:t.localSizeGroup,callback:function(e){t.localSizeGroup=e},expression:"localSizeGroup"}}),i("GeneralSizeSetDialog",{attrs:{visible:t.GeneralSizeVisible,SizeGroup:t.SizeGroup},on:{"update:visible":function(e){t.GeneralSizeVisible=e},submit:t.onGeneralSizeSaveSubmit}}),t.SizeGroup&&t.SizeGroup.SizeList?i("ul",t._l(t.SizeGroup.SizeList,(function(e){return i("li",{key:e.ID},[i("span",{staticClass:"name"},[t._v(t._s(e.Name))]),i("div",{staticClass:"content"},t._l(t.getContentList(e.List,e.HiddenToCustomer),(function(e,n){return i("span",{key:e+n},[t._v(t._s(e))])})),0),i("span",{staticClass:"del-btn",on:{click:function(i){return t.onItemRemove(e)}}},[i("i"),t._v(" 删除")])])})),0):t._e()],1)])}),[],!1,null,null,null)).exports,P={name:"ProductSizeMaterialSetPage",components:{LRWidthDragAutoChangeComp:o.a,ContentLeft:D,ContentRight:j},data:function(){return{ProductID:"",PartID:"",ProductName:"",titleType:"",MaterialList:[],SizeGroup:null}},computed:Object(s.a)({},Object(u.e)("productManage",["ProductManageList","ProductModuleKeyIDList"]),{curProduct:function(){var t=this;return this.ProductID?this.ProductManageList.find((function(e){return e.ID===t.ProductID})):null},curPart:function(){var t=this;return this.PartID&&this.curProduct?this.curProduct.PartList.find((function(e){return e.ID===t.PartID})):null}}),methods:{getInitDataFromPath:function(){if(this.$route.params){var t=this.$route.params,e=t.ProductID,i=t.PartID,n=t.name,a=t.type;e&&i&&n&&a?(this.ProductID=e,this.PartID="null"!==i?i:"",this.ProductName=n,this.titleType=a,this.getMaterialSizeData()):this.onGoBackClick()}else this.onGoBackClick()},onGoBackClick:function(){this.$router.replace("/ProductManageList")},getMaterialSizeData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["Material","SizeGroup","GeneralSize"];return Object(r.a)(regeneratorRuntime.mark((function i(){var n,a,r,s,o,l,c,u;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.PartID?t.PartID:t.ProductID,a=t.PartID?t.api.getPartModuleData:t.api.getProductModuleData,r=t.$utils.getIDFromListByNames(e,t.ProductModuleKeyIDList),s={ID:n,List:r},i.next=6,a(s).catch((function(){}));case 6:(o=i.sent)&&o.data&&1e3===o.data.Status&&(l=o.data.Data,c=l.MaterialList,u=l.SizeGroup,e.includes("Material")&&c&&(t.MaterialList=c),e.includes("SizeGroup")&&u&&(t.SizeGroup=u));case 8:case"end":return i.stop()}}),i)})))()},onMaterialSaveSubmit:function(t){var e=this,i=Object(a.a)(t,3),s=i[0],o=i[1],l=i[2];return Object(r.a)(regeneratorRuntime.mark((function t(){var i,a,r,c,u,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.ProductID,a=e.PartID,r=o.map((function(t){return t.ID})),c={ProductID:i,PartID:a,TypeID:s,List:r},t.next=5,e.api.getProductMaterialSave(c).catch((function(){}));case 5:(u=t.sent)&&u.data&&1e3===u.data.Status&&(p=function(){if(l){var t,i=e.MaterialList.findIndex((function(t){return t.Type.ID===s}));e.MaterialList=e.MaterialList.filter((function(t){return t.Type.ID!==s})),(t=e.MaterialList).splice.apply(t,[i,0].concat(Object(n.a)(o)))}else{var a;(a=e.MaterialList).push.apply(a,Object(n.a)(o))}e.$refs.oLeft.MaterialSaveVisible=!1},e.messageBox.successSingle("保存成功",p,p));case 7:case"end":return t.stop()}}),t)})))()},onMaterialSortSubmit:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function i(){var n,a,r,s,o,l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.ProductID,a=e.PartID,r=t.map((function(t){return t.ID})),s={ProductID:n,PartID:a,TypeList:r},i.next=5,e.api.getProductMaterialOrder(s).catch((function(){}));case 5:(o=i.sent)&&o.data&&1e3===o.data.Status&&(l=function(){var t=[],i=JSON.parse(JSON.stringify(e.MaterialList));r.forEach((function(e){i.forEach((function(n,a){n&&n.Type.ID===e&&(t.push(n),i.splice(a,1,null))}))})),e.MaterialList=t,e.$refs.oLeft.MaterialSortVisible=!1},e.messageBox.successSingle("保存排序成功",l,l));case 7:case"end":return i.stop()}}),i)})))()},onMaterialSetHiddenSubmit:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function i(){var n,a,r,o,l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.ProductID,a=e.PartID,r={ProductID:n,PartID:a,List:t},i.next=4,e.api.getProductMaterialHiddenSet(r).catch((function(){}));case 4:(o=i.sent)&&o.data&&1e3===o.data.Status&&(l=function(){e.MaterialList=e.MaterialList.map((function(e){return Object(s.a)({},e,{HiddenToCustomer:t.includes(e.ID)})})),e.$refs.oLeft.MaterialHiddentVisible=!1},e.messageBox.successSingle("设置客户隐藏成功",l,l));case 6:case"end":return i.stop()}}),i)})))()},onMaterialTypeRemoveClick:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function i(){var n,a,r,s,o,l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=3;break}return i.abrupt("return");case 3:return n=t.ID,a=e.ProductID,r=e.PartID,s={productID:a,partID:r,typeID:n},i.next=8,e.api.getProductMaterialRemove(s).catch((function(){}));case 8:(o=i.sent)&&o.data&&1e3===o.data.Status&&(l=function(){e.MaterialList=e.MaterialList.filter((function(t){return t.Type.ID!==n}))},e.messageBox.successSingle("删除类型成功",l,l));case 10:case"end":return i.stop()}}),i)})))()},onSizeGroupSubmit:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function i(){var n,a,r,o,l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.ProductID,a=e.PartID,r=Object(s.a)({ProductID:n,PartID:a},t),i.next=4,e.api.getProductGroupSizeSet(r).catch((function(){}));case 4:(o=i.sent)&&o.data&&1e3===o.data.Status&&(l=function(){e.SizeGroup=JSON.parse(JSON.stringify(r)),e.$refs.oRight.SizeGroupVisible=!1},e.messageBox.successSingle("设置尺寸组成功",l,l));case 6:case"end":return i.stop()}}),i)})))()},onGeneralSizeSubmit:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function i(){var n,a,r,s,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.ProductID,a=e.PartID,r={ProductID:n,PartID:a,SizeList:t},i.next=4,e.api.getGeneralSizeSave(r).catch((function(){}));case 4:(s=i.sent)&&s.data&&1e3===s.data.Status&&(o=function(){e.getMaterialSizeData(["SizeGroup","GeneralSize"]),e.$refs.oRight.GeneralSizeVisible=!1},e.messageBox.successSingle("设置固定尺寸成功",o,o));case 6:case"end":return i.stop()}}),i)})))()},onGeneralSizeRemove:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function i(){var n,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.api.getGeneralSizeRemove(t).catch((function(){}));case 2:(n=i.sent)&&n.data&&1e3===n.data.Status&&(a=function(){e.SizeGroup.SizeList=e.SizeGroup.SizeList.filter((function(e){return e.ID!==t}))},e.messageBox.successSingle("删除成功",a,a));case 4:case"end":return i.stop()}}),i)})))()}},mounted:function(){this.getInitDataFromPath()}},E=(i("6543"),Object(m.a)(P,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mp-erp-product-list-page-size-material-set-comp-wrap"},[i("header",[i("span",[t._v("当前"+t._s(t.titleType)+"：")]),i("span",[t._v(t._s(t.ProductName))])]),i("main",[t.curProduct?i("LRWidthDragAutoChangeComp",{attrs:{leftWidth:"45%"},scopedSlots:t._u([{key:"left",fn:function(){return[i("ContentLeft",{ref:"oLeft",attrs:{curProduct:t.curProduct,curPart:t.curPart,MaterialList:t.MaterialList},on:{MaterialSaveSubmit:t.onMaterialSaveSubmit,MaterialSortSubmit:t.onMaterialSortSubmit,MaterialSetHiddenSubmit:t.onMaterialSetHiddenSubmit,MaterialTypeRemove:t.onMaterialTypeRemoveClick}})]},proxy:!0},{key:"right",fn:function(){return[i("ContentRight",{ref:"oRight",attrs:{curProduct:t.curProduct,curPart:t.curPart,SizeGroup:t.SizeGroup},on:{SizeGroupSubmit:t.onSizeGroupSubmit,GeneralSizeSubmit:t.onGeneralSizeSubmit,GeneralSizeRemove:t.onGeneralSizeRemove}})]},proxy:!0}],null,!1,2734791659)}):t._e()],1),i("footer",[i("el-button",{on:{click:t.onGoBackClick}},[t._v("返回")])],1)])}),[],!1,null,null,null));e.default=E.exports},"97cf":function(t,e,i){},a903:function(t,e,i){"use strict";var n=i("f24b");i.n(n).a},bb2e:function(t,e,i){"use strict";var n=i("63bf");i.n(n).a},bf5c:function(t,e,i){"use strict";var n=i("97cf");i.n(n).a},c05c:function(t,e,i){},d544:function(t,e,i){},dbdd:function(t,e,i){"use strict";var n=i("c05c");i.n(n).a},dd28:function(t,e,i){},ec34:function(t,e,i){},f156:function(t,e,i){"use strict";var n=i("ec34");i.n(n).a},f24b:function(t,e,i){},fbe9:function(t,e,i){}}]);