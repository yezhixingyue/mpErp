(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0dec3b16"],{"14e6":function(e,t,a){"use strict";var i=a("8c17");a.n(i).a},"426c":function(e,t,a){},"468e":function(e,t,a){"use strict";var i=a("4aae");a.n(i).a},"4aae":function(e,t,a){},5300:function(e,t,a){"use strict";var i=a("426c");a.n(i).a},8129:function(e,t,a){},"8c17":function(e,t,a){},a0f9:function(e,t,a){"use strict";var i=a("8129");a.n(i).a},ad32:function(e,t,a){"use strict";var i={model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},title:{type:String,default:"提示"},width:{default:"30%"},top:{type:String,default:"15vh"},showSubmit:{type:Boolean,default:!0},submitText:{type:String,default:"保存"},dangerText:{type:String,default:"重新生成"},cancelText:{type:String,default:"取消"},disabled:{type:Boolean,default:!1},showDanger:{type:Boolean,default:!1}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},data:function(){return{checkList:[]}},methods:{onCancleClick:function(){this.$emit("cancle")},onSubmitClick:function(){this.dialogVisible&&this.$emit("submit")},onDangerClick:function(){this.$emit("danger")},onOpen:function(){this.$emit("open")},onOpened:function(){this.$emit("opened")},onClose:function(){this.$emit("close")},onClosed:function(){this.$emit("closed")}}},r=(a("468e"),a("2877")),n=Object(r.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"mp-img-style-header mp-erp-common-dialog-comp-wrap",attrs:{title:e.title,visible:e.dialogVisible,"close-on-click-modal":!1,width:e.width,top:e.top,modal:!1,"before-close":e.onCancleClick},on:{"update:visible":function(t){e.dialogVisible=t},open:e.onOpen,opened:e.onOpened,close:e.onClose,closed:e.onClosed}},[e._t("default"),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.showSubmit?a("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.onSubmitClick}},[e._v(e._s(e.submitText))]):e._e(),e.showDanger?a("el-button",{attrs:{type:"danger"},on:{click:e.onDangerClick}},[e._v(e._s(e.dangerText))]):e._e(),a("el-button",{on:{click:e.onCancleClick}},[e._v(e._s(e.cancelText))])],1)],2)}),[],!1,null,null,null);t.a=n.exports},adaf:function(e,t,a){"use strict";a.r(t);var i=(a("99af"),a("4de4"),a("96cf"),a("1da1")),r=a("2909"),n=a("5530"),s=a("2f62"),l=(a("7db0"),a("a9e3"),a("8ba4"),a("ad32")),o=(a("4160"),a("d81d"),a("d3b7"),a("25f0"),a("159b"),a("d4ec")),c=a("bee2"),u=a("ade3"),d=[{ID:0,Name:"正翻版",key:"zhengFan"},{ID:1,Name:"自翻版",key:"ziFan"},{ID:2,Name:"天地翻",key:"tianDiFan"}],h=function(){function e(t){var a=this;if(Object(o.a)(this,e),Object(u.a)(this,"ID",""),Object(u.a)(this,"Name",""),Object(u.a)(this,"MinMaterialSize",{Length:"",Width:""}),Object(u.a)(this,"MaxMaterialSize",{Length:"",Width:""}),Object(u.a)(this,"Class",""),Object(u.a)(this,"ModeList",d.map((function(e){return{checked:!1,Mode:e.ID,WhiteEdge:{Length:"",Width:""},key:e.key,Name:e.Name}}))),t&&"[object Object]"===Object.prototype.toString.call(t)){var i=JSON.parse(JSON.stringify(t)),r=i.ID,n=i.Name,s=i.MinMaterialSize,l=i.MaxMaterialSize,c=i.Class,h=i.ModeList;r&&(this.ID=r),n&&(this.Name=n),s&&(this.MinMaterialSize=s),l&&(this.MaxMaterialSize=l),c&&(this.Class=c),h&&h.length>0&&h.forEach((function(e){var t=a.ModeList.find((function(t){return e.Mode===t.Mode}));t&&(t.checked=!0,t.WhiteEdge=e.WhiteEdge)}))}}return Object(c.a)(e,null,[{key:"formatSubmit",value:function(e){var t=JSON.parse(JSON.stringify(e));return t.ModeList=t.ModeList.filter((function(e){return e.checked})).map((function(e){return{Mode:e.Mode,WhiteEdge:e.WhiteEdge}})),t}}]),e}(),m={props:{visible:{type:Boolean,default:!1},curData:{type:Object,default:null},classList:{type:Array,default:function(){return[]}}},components:{CommonDialogComp:l.a},computed:{localClass:{get:function(){return this.ruleForm.Class?this.ruleForm.Class.ID:""},set:function(e){var t=this.classList.find((function(t){return t.ID===e}));t&&(this.ruleForm.Class=t)}}},data:function(){return{title:"添加印刷幅面",ruleForm:null,rules:{Name:[{required:!0,message:"请输入印刷幅面名称",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],MinMaterialSize:{Length:[{required:!0,message:"长值不能为空"},{type:"number",min:1,message:"请输入正整数数值"}],Width:[{required:!0,message:"短值不能为空"},{type:"number",min:1,message:"请输入正整数数值"}]},MaxMaterialSize:{Length:[{required:!0,message:"长值不能为空"},{type:"number",message:"请输入正整数数值或-1"},{validator:this.MaxMaterialSizeLength,trigger:"blur"}],Width:[{required:!0,message:"短值不能为空"},{type:"number",message:"请输入正整数数值或-1"},{validator:this.MaxMaterialSizeWidth,trigger:"blur"}]},Class:[{required:!0,message:"请选择所属分类",trigger:"change"}],ModeList:[{validator:this.checkModeList,trigger:"change"}]}}},methods:{onSubmit:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.ruleForm.validate().catch((function(){}));case 2:t.sent&&(a=h.formatSubmit(e.ruleForm),e.$emit("submit",a));case 4:case"end":return t.stop()}}),t)})))()},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.ruleForm=null},initEditData:function(){this.ruleForm=new h(this.curData),this.title=this.curData?"编辑印刷幅面":"添加印刷幅面"},checkModeList:function(e,t,a){var i=this;if(t&&Array.isArray(t)&&0!==t.length){var r=t.filter((function(e){return e.checked}));if(0!==r.length){var n=r.find((function(e){return""===e.WhiteEdge.Length||""===e.WhiteEdge.Width}));n?a(new Error("请设置白边，如果不想在此处设置白边的话可设为0")):(n=r.find((function(e){return!Number.isInteger(e.WhiteEdge.Length)||!Number.isInteger(e.WhiteEdge.Width)||e.WhiteEdge.Length<0||e.WhiteEdge.Width<0})))?a(new Error("请输入大于等于0的整数类型数字值")):(n=r.find((function(e){return i.ruleForm.MinMaterialSize.Length&&e.WhiteEdge.Length>=i.ruleForm.MinMaterialSize.Length||i.ruleForm.MinMaterialSize.Width&&e.WhiteEdge.Width>=i.ruleForm.MinMaterialSize.Width})))?a(new Error("白边长值和宽值不能大于等于最小物料尺寸的对应长值和宽值")):a()}else a(new Error("请选择拼版方式"))}else a(new Error("拼版方式值获取错误，请刷新重试"))},MaxMaterialSizeLength:function(e,t,a){t<=0&&-1!==t?a(new Error("请输入正整数数值或-1")):this.ruleForm.MinMaterialSize.Length&&t<this.ruleForm.MinMaterialSize.Length&&-1!==t?a(new Error("不能小于最小物料尺寸长")):a()},MaxMaterialSizeWidth:function(e,t,a){t<=0&&-1!==t?a(new Error("请输入正整数数值或-1")):this.ruleForm.MinMaterialSize.Width&&t<this.ruleForm.MinMaterialSize.Width&&-1!==t?a(new Error("不能小于最小物料尺寸宽")):a()}}},p=(a("14e6"),a("2877")),g=Object(p.a)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CommonDialogComp",{staticClass:"mp-erp-comps-print-breadth-save-dialog-comp-wrap",attrs:{width:"700px",top:"18vh",title:e.title,visible:e.visible},on:{"update:visible":function(t){e.visible=t},submit:e.onSubmit,cancle:e.onCancle,open:e.onOpen,closed:e.onClosed}},[e.ruleForm?a("el-form",{ref:"ruleForm",staticClass:"file-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"138px",size:"small"}},[a("el-form-item",{key:"FileName",attrs:{label:"名称：",prop:"Name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入印刷幅面名称",maxlength:"10","show-word-limit":""},model:{value:e.ruleForm.Name,callback:function(t){e.$set(e.ruleForm,"Name","string"==typeof t?t.trim():t)},expression:"ruleForm.Name"}})],1),a("el-form-item",{key:"MinMaterialSize",attrs:{label:"最小物料尺寸："}},[a("el-col",{attrs:{span:6.6}},[a("el-form-item",{attrs:{prop:"MinMaterialSize.Length"}},[a("el-input",{staticStyle:{width:"110px"},attrs:{maxlength:"9",placeholder:"长"},model:{value:e.ruleForm.MinMaterialSize.Length,callback:function(t){e.$set(e.ruleForm.MinMaterialSize,"Length",e._n("string"==typeof t?t.trim():t))},expression:"ruleForm.MinMaterialSize.Length"}}),a("span",{staticStyle:{margin:"0 10px"}},[e._v("X")])],1)],1),a("el-col",{attrs:{span:6.6}},[a("el-form-item",{attrs:{prop:"MinMaterialSize.Width"}},[a("el-input",{staticStyle:{width:"110px"},attrs:{maxlength:"9",placeholder:"宽"},model:{value:e.ruleForm.MinMaterialSize.Width,callback:function(t){e.$set(e.ruleForm.MinMaterialSize,"Width",e._n("string"==typeof t?t.trim():t))},expression:"ruleForm.MinMaterialSize.Width"}}),a("span",{staticStyle:{"margin-left":"10px",color:"#a2a2a2"}},[e._v("mm")])],1)],1)],1),a("el-form-item",{key:"MaxMaterialSize",attrs:{label:"最大物料尺寸："}},[a("el-col",{attrs:{span:6.6}},[a("el-form-item",{attrs:{prop:"MaxMaterialSize.Length"}},[a("el-input",{staticStyle:{width:"110px"},attrs:{maxlength:"9",placeholder:"长"},model:{value:e.ruleForm.MaxMaterialSize.Length,callback:function(t){e.$set(e.ruleForm.MaxMaterialSize,"Length",e._n("string"==typeof t?t.trim():t))},expression:"ruleForm.MaxMaterialSize.Length"}}),a("span",{staticStyle:{margin:"0 10px"}},[e._v("X")])],1)],1),a("el-col",{attrs:{span:6.6}},[a("el-form-item",{attrs:{prop:"MaxMaterialSize.Width"}},[a("el-input",{staticStyle:{width:"110px"},attrs:{maxlength:"9",placeholder:"宽"},model:{value:e.ruleForm.MaxMaterialSize.Width,callback:function(t){e.$set(e.ruleForm.MaxMaterialSize,"Width",e._n("string"==typeof t?t.trim():t))},expression:"ruleForm.MaxMaterialSize.Width"}}),a("span",{staticStyle:{margin:"0 10px",color:"#a2a2a2"}},[e._v("mm")])],1)],1),a("span",{staticClass:"tips-box"},[a("i",{staticClass:"el-icon-warning"}),e._v(" 注：最小最大物料尺寸包含白边")])],1),a("el-form-item",{key:"ruleFormClass",attrs:{label:"分类：",prop:"Class"}},[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择分类"},model:{value:e.localClass,callback:function(t){e.localClass=t},expression:"localClass"}},e._l(e.classList,(function(e){return a("el-option",{key:e.ID,attrs:{label:e.Name,value:e.ID}})})),1)],1),a("el-form-item",{key:"ruleFormModeList",attrs:{label:"允许拼版方式：",prop:"ModeList"}},e._l(e.ruleForm.ModeList,(function(t){return a("div",{key:t.key,staticClass:"MakeupMode-box"},[a("el-checkbox",{model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"it.checked"}},[e._v(e._s(t.Name))]),t.checked?[a("span",{staticStyle:{margin:"0 4px 0 28px"}},[e._v("白边：")]),a("el-input",{staticStyle:{width:"100px"},attrs:{maxlength:"9",placeholder:"长"},model:{value:t.WhiteEdge.Length,callback:function(a){e.$set(t.WhiteEdge,"Length",e._n("string"==typeof a?a.trim():a))},expression:"it.WhiteEdge.Length"}}),a("el-input",{staticStyle:{width:"100px","margin-left":"25px"},attrs:{maxlength:"9",placeholder:"宽"},model:{value:t.WhiteEdge.Width,callback:function(a){e.$set(t.WhiteEdge,"Width",e._n("string"==typeof a?a.trim():a))},expression:"it.WhiteEdge.Width"}}),a("span",{staticStyle:{"margin-left":"10px",color:"#a2a2a2"}},[e._v("mm")])]:e._e()],2)})),0)],1):e._e()],1)}),[],!1,null,null,null).exports,f=(a("a15b"),a("2af0")),b={props:{dataList:{default:function(){return[]},type:Array},loading:{type:Boolean,default:!1}},computed:{localTableData:function(){var e=this;return this.dataList&&Array.isArray(this.dataList)&&0!==this.dataList.length?this.dataList.map((function(t){return Object(n.a)({},t,{ModeText:e.getModeListText(t.ModeList),MinSize:e.getBreadthSizeText(t.MinMaterialSize),MaxSize:e.getBreadthSizeText(t.MaxMaterialSize)})})):[]}},mixins:[f.a],methods:{setHeight:function(){var e=this.getHeight(".mp-erp-print-breadth-page-wrap > header",45);this.h=e},onEditClick:function(e){this.$emit("edit",e)},onRemoveClick:function(e){this.$emit("remove",e)},getModeListText:function(e){var t=this;if(!e||0===e.length)return"";var a=[];return e.forEach((function(e){var i=d.find((function(t){return t.ID===e.Mode}));if(i){var r="".concat(i.Name,"（").concat(t.getBreadthSizeText(e.WhiteEdge),"）");a.push(r)}})),a.join(" ")},getBreadthSizeText:function(e){var t=e.Length,a=e.Width;return"".concat(t," X ").concat(a,"mm")}}},v=(a("a0f9"),Object(p.a)(b,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{key:"mp-erp-print-breadth-page-breadth-table-comp-wrap",staticClass:"mp-erp-print-breadth-page-breadth-table-comp-wrap",staticStyle:{width:"100%"},attrs:{"max-height":e.h,height:e.h,stripe:"",border:"",data:e.localTableData,fit:""}},[a("el-table-column",{attrs:{prop:"Name",label:"名称",width:"260"}}),a("el-table-column",{attrs:{prop:"ModeText",label:"允许拼版方式（括号内为白边）","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"MinSize",label:"最小幅面",width:"280"}}),a("el-table-column",{attrs:{prop:"MaxSize",label:"最大幅面",width:"280"}}),a("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"menu-list"},[a("span",{on:{click:function(a){return e.onEditClick(t.row)}}},[a("i"),e._v("编辑")]),a("span",{on:{click:function(a){return e.onRemoveClick(t.row)}}},[a("i"),e._v("删除")])])}}])}),a("div",{attrs:{slot:"empty"},slot:"empty"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}]},[e._v("暂无数据")])])],1)}),[],!1,null,null,null)).exports,M={computed:Object(n.a)({},Object(s.e)("basicSet",["BreadthCLassList","BreadthList"]),{listData:function(){var e=this;return!this.classID&&0!==this.classID&&""!==this.classID||0===this.BreadthList.length?[]:""===this.classID?this.BreadthList:this.BreadthList.filter((function(t){return t.Class.ID===e.classID}))},localBreadthCLassList:function(){var e={ID:"",Name:"全部"};return this.BreadthCLassList&&Array.isArray(this.BreadthCLassList)&&0!==this.BreadthCLassList.length?[e].concat(Object(r.a)(this.BreadthCLassList)):[e]}}),data:function(){return{classID:"",visible:!1,saveData:null,tableLoading:!1,classLoading:!1}},components:{BreadthSaveDialog:g,BreadthTableComp:v},methods:{onBreadthSaveClick:function(e){this.saveData=e||null,this.visible=!0},onClassManageClick:function(){this.$router.push("/PrintFormatClassManage")},onSaveSubmit:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function a(){var i,r,n,s;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("basicSet/getBreadthSave",e);case 2:(i=a.sent)&&(r=!(!e.ID&&0!==e.ID),n=r?"编辑成功":"添加成功",s=function(){t.handleSaveSuccess({isEdit:r,data:e,ID:i})},t.messageBox.successSingle(n,s,s));case 4:case"end":return a.stop()}}),a)})))()},handleSaveSuccess:function(e){var t=e.isEdit,a=e.data,i=e.ID;this.$store.commit("basicSet/setBreadthSaveSuccess",{isEdit:t,data:a,ID:i,curClassID:this.classID}),this.visible=!1},getTableDataList:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.tableLoading=!0,a.next=3,t.$store.dispatch("basicSet/getBreadthList",e);case 3:t.tableLoading=!1;case 4:case"end":return a.stop()}}),a)})))()},onRemoveClick:function(e){var t=this;e&&this.messageBox.warnCancelBox("确定删除该印刷幅面吗","幅面名称：[ ".concat(e.Name," ]"),(function(){t.$store.dispatch("basicSet/getBreadthRemove",e.ID)}))}},watch:{classID:{handler:function(e){this.getTableDataList(e)},immediate:!0}},mounted:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.classLoading=!0,t.next=3,e.$store.dispatch("basicSet/getBreadthClassList");case 3:e.classLoading=!1,e.$refs.oBreadthTable&&e.$refs.oBreadthTable.setHeight&&e.$refs.oBreadthTable.setHeight();case 5:case"end":return t.stop()}}),t)})))()}},S=(a("5300"),Object(p.a)(M,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"mp-erp-print-breadth-page-wrap"},[a("header",[a("div",{staticClass:"menu"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onBreadthSaveClick(null)}}},[e._v("添加印刷幅面")]),a("span",{staticClass:"blue-span",on:{click:e.onClassManageClick}},[e._v("管理分类")])],1),a("div",{staticClass:"list"},[e.BreadthCLassList.length>0?a("el-radio-group",{attrs:{size:"small"},model:{value:e.classID,callback:function(t){e.classID=t},expression:"classID"}},e._l(e.localBreadthCLassList,(function(t){return a("el-radio-button",{key:t.ID,attrs:{label:t.ID}},[e._v(e._s(t.Name))])})),1):e._e(),0!==e.BreadthCLassList.length||e.classLoading?e._e():a("span",{staticClass:"is-font-size-12 is-pink",staticStyle:{opacity:"0.8"}},[a("i",{staticClass:"el-icon-warning-outline",staticStyle:{"font-size":"14px"}}),e._v(" 分类列表数据为空，请添加")])],1)]),a("main",[a("BreadthSaveDialog",{attrs:{visible:e.visible,curData:e.saveData,classList:e.BreadthCLassList},on:{"update:visible":function(t){e.visible=t},submit:e.onSaveSubmit}}),a("BreadthTableComp",{ref:"oBreadthTable",attrs:{dataList:e.listData,loading:e.tableLoading},on:{edit:e.onBreadthSaveClick,remove:e.onRemoveClick}})],1),a("footer",[a("span",[e._v("共检索出 "),a("i",[e._v(e._s(e.listData.length))]),e._v(" 条数据")])])])}),[],!1,null,null,null));t.default=S.exports}}]);