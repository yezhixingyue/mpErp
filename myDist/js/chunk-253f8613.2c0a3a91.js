(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-253f8613"],{"27ff":function(t,e,r){"use strict";var i={model:{prop:"radio",event:"handleRadioChange"},props:{list:{type:Array,default:function(){return[]}},radio:{},defaultProps:{type:Object,default:function(){return{label:"name",value:"ID"}}}},computed:{radioValue:{get:function(){return this.radio},set:function(t){this.$emit("handleRadioChange",t)}}}},o=r("2877"),n=Object(o.a)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-radio-group",{staticClass:"mp-coms-common-single-radio-group-comp-wrap",model:{value:t.radioValue,callback:function(e){t.radioValue=e},expression:"radioValue"}},t._l(t.list,(function(e){return r("el-radio",{key:e[t.defaultProps.value],attrs:{label:e[t.defaultProps.value]}},[t._v(t._s(e[t.defaultProps.label]))])})),1)}),[],!1,null,null,null);e.a=n.exports},"4ab7":function(t,e,r){"use strict";r.r(e);var i=(r("7db0"),r("b0c0"),r("96cf"),r("1da1")),o=r("5530"),n=r("2f62"),a=r("9477"),s={components:{SingleRadioGroupComp:r("27ff").a},props:{PriceUnitList:{type:Array,default:function(){return[]}},value:{type:Object,default:function(){return{}}}},computed:Object(o.a)({},Object(n.e)("common",["conditionTypeList"]),{priceUnit:function(){if(!this.radio&&0!==this.radio)return"";switch(this.radio){case 0:return"元 / 每个产品";case 1:return"元 / 单款总价";case 3:return"%";case 4:return"元";default:return""}},radio:{get:function(){return this.value?this.value.PriceUnit:""},set:function(t){this.$emit("input",Object(o.a)({},this.value,{PriceUnit:t}))}},price:{get:function(){return this.value?this.value.Price:""},set:function(t){this.$emit("input",Object(o.a)({},this.value,{Price:t}))}}}),methods:{handleRadioChange:function(t){this.radio=t}}},c=(r("92ce"),r("2877")),u=Object(c.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"mp-promote-comps-result-list-comp-wrap"},[r("SingleRadioGroupComp",{attrs:{radio:t.radio,list:t.PriceUnitList},on:{handleRadioChange:t.handleRadioChange}}),r("footer",[4===t.radio?r("span",[t._v("减款:")]):r("span",[t._v("执行价格:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],attrs:{type:"text",placeholder:"请输入价格"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}}),r("span",[t._v(t._s(t.priceUnit))])])],1)}),[],!1,null,null,null).exports,l=r("3eca"),p={name:"promoteConditionSet",components:{ContionCommonComp:a.a,ResultComps:u},data:function(){return{curEditData:null,priceData:{PriceUnit:"",Price:""},PropertyList:[],loading:!0}},computed:Object(o.a)({},Object(n.e)("common",["PriceUnitList"]),{},Object(n.e)("promoteStore",["promoteAddRequestObj"])),methods:{onSubmitClick:function(){var t=this.$refs.oLeftComp.getConditonResult();if(t){var e=this.priceData,r=e.PriceUnit,i=e.Price;if(r||0===r)if(i)if(!this.$utils.getValueIsOrNotNumber(i)||i<=0)this.messageBox.failSingleError("保存失败","活动执行价格应为大于0的数字类型");else{var o=this.PriceUnitList.find((function(t){return t.ID===r}));if(o){if("百分比"===o.name&&i>100)return void this.messageBox.failSingleError("保存失败","百分比折扣不能大于100%");var n={Constraint:t.Constraint,PriceUnit:r,Price:i};"new"===this.$route.params.itemIndex?this.$store.commit("promoteStore/addPrice4AddRequestObj",[this.$route.params.productIndex,n]):this.$store.commit("promoteStore/delPrice4AddRequestObj",[this.$route.params.productIndex,this.$route.params.itemIndex,n]),this.onGoBackClick()}}else this.messageBox.failSingleError("保存失败","请输入活动执行价格");else this.messageBox.failSingleError("保存失败","请设置活动价格类型")}},onGoBackClick:function(){this.$goback()},getPropertyList:function(t,e){var r=this;return Object(i.a)(regeneratorRuntime.mark((function i(){var o,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t.ProductID){i.next=11;break}if(!(r.promoteAddRequestObj.commonPropertyList.length>0)){i.next=5;break}r.PropertyList=r.promoteAddRequestObj.commonPropertyList,i.next=9;break;case 5:return i.next=7,l.d.getPropertyList(t);case 7:(o=i.sent)&&(r.PropertyList=o,r.$store.commit("promoteStore/addCommonPropertyListToAddRequestObj",o));case 9:i.next=19;break;case 11:if(!(e&&e.length>0)){i.next=15;break}r.PropertyList=e,i.next=19;break;case 15:return i.next=17,l.d.getPropertyList(t);case 17:(n=i.sent)&&(r.PropertyList=n,r.$store.commit("promoteStore/addSingleProductPropertyListToAddRequestObj",[n,r.$route.params.productIndex]));case 19:r.loading=!1;case 20:case"end":return i.stop()}}),i)})))()},getInitData:function(){var t=this.promoteAddRequestObj.ProductList[this.$route.params.productIndex],e=t.LimitList,r=t.PropertyList;if(e&&0!==e.length){var i={UseModule:41};if(1===e.length&&(i.ProductID=e[0].ProductID),this.getPropertyList(i,r),"new"!==this.$route.params.itemIndex){var o=this.promoteAddRequestObj.ProductList[this.$route.params.productIndex].List[this.$route.params.itemIndex],n=o.Constraint,a=o.PriceUnit,s=o.Price;this.curEditData={ID:"",Priority:"",Constraint:n},this.priceData={PriceUnit:a,Price:s}}else this.curEditData=null,this.priceData={PriceUnit:this.PriceUnitList&&this.PriceUnitList[0]?this.PriceUnitList[0].ID:"",Price:""}}}},mounted:function(){this.getInitData()}},d=(r("ccc0"),Object(c.a)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"mp-erp-promote-condition-set-page-wrap"},[r("header",[r("span",[t._v("活动产品：")]),r("span",[t._v(t._s(t.$route.params.productNames))])]),r("main",[t.loading?t._e():r("ContionCommonComp",{ref:"oLeftComp",attrs:{PropertyList:t.PropertyList,ComparePropertyList:t.PropertyList,showPriority:!1,leftWidth:"45%",curEditData:t.curEditData,rightTitle:"则执行价格"}},[r("ResultComps",{attrs:{PriceUnitList:t.PriceUnitList},model:{value:t.priceData,callback:function(e){t.priceData=e},expression:"priceData"}})],1)],1),r("footer",[r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitClick}},[t._v("确定")]),r("el-button",{on:{click:t.onGoBackClick}},[r("i",{staticClass:"el-icon-d-arrow-left"}),t._v(" 返回")])],1)])}),[],!1,null,null,null));e.default=d.exports},7131:function(t,e,r){},7367:function(t,e,r){},"92ce":function(t,e,r){"use strict";var i=r("7367");r.n(i).a},ccc0:function(t,e,r){"use strict";var i=r("7131");r.n(i).a}}]);