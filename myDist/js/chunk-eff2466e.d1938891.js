(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-eff2466e"],{"0d59":function(t,e,i){"use strict";var n=i("9bf8");i.n(n).a},"39d8":function(t,e,i){"use strict";var n=i("5651");i.n(n).a},"3a9e":function(t,e,i){},"468e":function(t,e,i){"use strict";var n=i("4aae");i.n(n).a},"4aae":function(t,e,i){},"4c44":function(t,e,i){"use strict";var n=i("94d4");i.n(n).a},5651:function(t,e,i){},5816:function(t,e,i){},6062:function(t,e,i){"use strict";var n=i("6d61"),a=i("6566");t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),a)},6173:function(t,e,i){"use strict";var n=i("e5ca");i.n(n).a},6566:function(t,e,i){"use strict";var n=i("9bf2").f,a=i("7c73"),s=i("e2cc"),r=i("0366"),o=i("19aa"),l=i("2266"),u=i("7dd0"),c=i("2626"),f=i("83ab"),d=i("f183").fastKey,p=i("69f3"),h=p.set,m=p.getterFor;t.exports={getConstructor:function(t,e,i,u){var c=t((function(t,n){o(t,c,e),h(t,{type:e,index:a(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=n&&l(n,t[u],t,i)})),p=m(e),C=function(t,e,i){var n,a,s=p(t),r=v(t,e);return r?r.value=i:(s.last=r={index:a=d(e,!0),key:e,value:i,previous:n=s.last,next:void 0,removed:!1},s.first||(s.first=r),n&&(n.next=r),f?s.size++:t.size++,"F"!==a&&(s.index[a]=r)),t},v=function(t,e){var i,n=p(t),a=d(e);if("F"!==a)return n.index[a];for(i=n.first;i;i=i.next)if(i.key==e)return i};return s(c.prototype,{clear:function(){for(var t=p(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=this,i=p(e),n=v(e,t);if(n){var a=n.next,s=n.previous;delete i.index[n.index],n.removed=!0,s&&(s.next=a),a&&(a.previous=s),i.first==n&&(i.first=a),i.last==n&&(i.last=s),f?i.size--:e.size--}return!!n},forEach:function(t){for(var e,i=p(this),n=r(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:i.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!v(this,t)}}),s(c.prototype,i?{get:function(t){var e=v(this,t);return e&&e.value},set:function(t,e){return C(this,0===t?0:t,e)}}:{add:function(t){return C(this,t=0===t?0:t,t)}}),f&&n(c.prototype,"size",{get:function(){return p(this).size}}),c},setStrong:function(t,e,i){var n=e+" Iterator",a=m(e),s=m(n);u(t,e,(function(t,e){h(this,{type:n,target:t,state:a(t),kind:e,last:void 0})}),(function(){for(var t=s(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),c(e)}}},"6d61":function(t,e,i){"use strict";var n=i("23e7"),a=i("da84"),s=i("94ca"),r=i("6eeb"),o=i("f183"),l=i("2266"),u=i("19aa"),c=i("861d"),f=i("d039"),d=i("1c7e"),p=i("d44e"),h=i("7156");t.exports=function(t,e,i){var m=-1!==t.indexOf("Map"),C=-1!==t.indexOf("Weak"),v=m?"set":"add",b=a[t],g=b&&b.prototype,L=b,D={},I=function(t){var e=g[t];r(g,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(C&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return C&&!c(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(C&&!c(t))&&e.call(this,0===t?0:t)}:function(t,i){return e.call(this,0===t?0:t,i),this})};if(s(t,"function"!=typeof b||!(C||g.forEach&&!f((function(){(new b).entries().next()})))))L=i.getConstructor(e,t,m,v),o.REQUIRED=!0;else if(s(t,!0)){var x=new L,y=x[v](C?{}:-0,1)!=x,k=f((function(){x.has(1)})),_=d((function(t){new b(t)})),S=!C&&f((function(){for(var t=new b,e=5;e--;)t[v](e,e);return!t.has(-0)}));_||((L=e((function(e,i){u(e,L,t);var n=h(new b,e,L);return null!=i&&l(i,n[v],n,m),n}))).prototype=g,g.constructor=L),(k||S)&&(I("delete"),I("has"),m&&I("get")),(S||y)&&I(v),C&&g.clear&&delete g.clear}return D[t]=L,n({global:!0,forced:L!=b},D),p(L,t),C||i.setStrong(L,t,m),L}},"6e84":function(t,e,i){"use strict";var n={props:{leftWidth:{type:String,default:"49%"},single:{type:Boolean,default:!1}},data:function(){return{leftW:"48%",offsetWidth:0,oLeft:null,moving:!1,distance:7,initPageX:0}},methods:{onLineDown:function(t){!this.oLeft&&this.$refs.oLeft&&(this.oLeft=this.$refs.oLeft),this.oLeft&&(this.offsetWidth=this.oLeft.offsetWidth,document.addEventListener("mousemove",this.onLineMove),document.addEventListener("mouseup",this.onLineUp),this.moving=!0,this.distance=t.offsetX,this.initPageX=t.pageX),t.preventDefault()},onLineMove:function(t){this.leftW="".concat(t.pageX-this.initPageX-this.distance+this.offsetWidth,"px")},onLineUp:function(){document.removeEventListener("mousemove",this.onLineMove),document.removeEventListener("mouseup",this.onLineUp),this.moving=!1}},created:function(){this.leftW=this.leftWidth}},a=(i("6173"),i("2877")),s=Object(a.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{ref:"oWrap",staticClass:"mp-erp-common-comps-left-and-right-width-drap-auto-change-comp-wrap"},[i("div",{ref:"oLeft",staticClass:"left mp-scroll-wrap",style:"width:"+t.leftW},[t._t("left")],2),t.single?t._e():i("span",{staticClass:"vertical-line",class:t.moving?"moving":"",on:{mousedown:t.onLineDown}},[i("i")]),i("div",{staticClass:"right mp-scroll-wrap"},[t._t("right")],2)])}),[],!1,null,null,null);e.a=s.exports},"710e":function(t,e,i){"use strict";var n=i("c68d");i.n(n).a},"7b2c":function(t,e,i){"use strict";var n=i("5816");i.n(n).a},"7e27":function(t,e,i){"use strict";i.r(e);var n=(i("4de4"),i("7db0"),i("c740"),i("4160"),i("caad"),i("a15b"),i("d81d"),i("a434"),i("b0c0"),i("ac1f"),i("2532"),i("5319"),i("159b"),i("96cf"),i("1da1")),a=i("5530"),s=i("2f62"),r=i("6e84"),o=(i("99af"),i("2909")),l=i("ad32"),u={model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},value:{type:Object,default:null},usableCraftList:{type:Array,default:null},CraftConditionList:{type:Array,default:null}},components:{CommonDialogComp:l.a},data:function(){return{title:"",ruleForm:null}},computed:{selectList:function(){var t=this;return this.ruleForm.List&&0!==this.ruleForm.List.length?this.ruleForm.List.map((function(e){return t.usableCraftList.find((function(t){return t.ID===e}))})).filter((function(t){return t})):[]},optionList:function(){var t={ID:"",Name:"不选中"};if(!this.selectList||0===this.selectList.length)return[t];var e=this.selectList.filter((function(t){return t&&(!t.ElementList||0===t.ElementList.length)}));return[t].concat(Object(o.a)(e))},CraftConditionIDs:function(){var t=this;if(!this.CraftConditionList||0===this.CraftConditionList.length)return[];var e=[];return this.CraftConditionList.forEach((function(i){t.ruleForm&&t.ruleForm.ID===i.ID||e.push.apply(e,Object(o.a)(i.List))})),e},curCanSelectUsableCraftList:function(){var t=this;return this.usableCraftList&&0!==this.usableCraftList.length?0===this.CraftConditionIDs.length?this.usableCraftList:this.usableCraftList.filter((function(e){return!t.CraftConditionIDs.includes(e.ID)})):[]},DefaultCraft:{get:function(){var t=this.ruleForm.DefaultCraft;return this.optionList.map((function(t){return t.ID})).filter((function(t){return t})).includes(t)?t:""},set:function(t){this.ruleForm.DefaultCraft=t}}},methods:{onSubmit:function(){if(this.ruleForm)if(this.ruleForm.List.length<1)this.messageBox.failSingleError("保存失败","没有选中的工艺");else if(this.ruleForm.IsRequired&&this.ruleForm.DefaultCraft&&!this.ruleForm.List.includes(this.ruleForm.DefaultCraft))this.messageBox.failSingleError("保存失败","当前选中的初始选中工艺不在所选工艺列表中");else{var t=Object(a.a)({},this.ruleForm,{DefaultCraft:this.ruleForm.IsRequired?this.ruleForm.DefaultCraft:""});this.$emit("change",t)}},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.ruleForm=null,this.title=""},initEditData:function(){if(this.value){this.title="编辑单选工艺";var t=this.value,e=t.ID,i=t.IsRequired,n=t.DefaultCraft,a=t.List;this.ruleForm={ID:e,IsRequired:i,DefaultCraft:n,List:Object(o.a)(a)}}else this.title="添加单选工艺",this.ruleForm={ID:"",IsRequired:!1,DefaultCraft:"",List:[]}}}},c=(i("d93d"),i("2877")),f=Object(c.a)(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CommonDialogComp",{staticClass:"mp-erp-comps-pruduct-module-single-craft-set-dialog-comp-wrap",attrs:{width:"800px",top:"12vh",title:t.title,visible:t.visible,disabled:t.curCanSelectUsableCraftList.length<2},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[t.ruleForm?i("el-checkbox-group",{model:{value:t.ruleForm.List,callback:function(e){t.$set(t.ruleForm,"List",e)},expression:"ruleForm.List"}},t._l(t.usableCraftList,(function(e){return i("el-checkbox",{key:e.ID,attrs:{label:e.ID,title:e.Name,disabled:t.CraftConditionIDs.includes(e.ID)}},[t._v(t._s(e.Name))])})),1):t._e(),t.ruleForm?i("div",{staticClass:"select-type"},[i("el-checkbox",{attrs:{disabled:t.curCanSelectUsableCraftList.length<2},model:{value:t.ruleForm.IsRequired,callback:function(e){t.$set(t.ruleForm,"IsRequired",e)},expression:"ruleForm.IsRequired"}},[t._v("必选")]),i("div",[t.ruleForm&&t.ruleForm.IsRequired?[i("span",[t._v("初始选中：")]),i("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.DefaultCraft,callback:function(e){t.DefaultCraft=e},expression:"DefaultCraft"}},t._l(t.optionList,(function(t){return i("el-option",{key:t.ID,attrs:{label:t.Name,value:t.ID}})})),1)]:t._e()],2)],1):t._e(),t.curCanSelectUsableCraftList.length<2?i("p",{staticClass:"tips-box"},[i("i",{staticClass:"el-icon-warning"}),t._v(" 当前可选工艺数量少于2，不支持单选工艺设置")]):t._e()],1)}),[],!1,null,null,null).exports,d={props:{usableCraftList:{type:Array,default:null},CraftConditionList:{type:Array,default:null}},components:{SingleSelectCraftSetDialog:f},data:function(){return{visible:!1,singleCraftData:null}},computed:{curEditData:{get:function(){return this.singleCraftData},set:function(t){this.$emit("submit",t)}}},methods:{onSingleCraftSaveClick:function(t){this.singleCraftData=t,this.visible=!0},getSingleCraftNames:function(t){var e=this;return t&&Array.isArray(t)&&0!==t.length&&this.usableCraftList&&Array.isArray(this.usableCraftList)&&0!==this.usableCraftList.length?t.map((function(t){return e.usableCraftList.find((function(e){return e.ID===t}))})).filter((function(t){return t})).map((function(t){return t.Name})).join("、"):""},getDefaultCraftName:function(t){if(!t)return"未设置";var e=this.usableCraftList.filter((function(t){return t&&(!t.ElementList||0===t.ElementList.length)})).find((function(e){return e.ID===t}));return e?e.Name:"未设置"},onItemRemove:function(t){var e=this;this.messageBox.warnCancelBox("确定删除该单选工艺设置吗","该设置共包含有".concat(t.List.length,"种工艺"),(function(){e.$emit("remove",t)}))}}},p=(i("7ea3"),Object(c.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mp-erp-product-module-craft-set-page-left-content-wrap"},[i("header",[i("span",{staticClass:"mp-common-title-wrap"},[t._v("单选工艺")]),i("span",{staticClass:"blue-span",class:t.usableCraftList&&t.usableCraftList.length>0?"":"disabled",on:{click:function(e){return t.onSingleCraftSaveClick(null)}}},[t._v("+ 添加")])]),i("main",[i("SingleSelectCraftSetDialog",{attrs:{usableCraftList:t.usableCraftList,CraftConditionList:t.CraftConditionList,visible:t.visible},on:{"update:visible":function(e){t.visible=e}},model:{value:t.curEditData,callback:function(e){t.curEditData=e},expression:"curEditData"}}),t.usableCraftList&&t.usableCraftList.length>0&&t.CraftConditionList?i("ul",t._l(t.CraftConditionList,(function(e){return i("li",{key:e.ID},[i("div",{staticClass:"names",attrs:{title:t.getSingleCraftNames(e.List)}},[t._v(t._s(t.getSingleCraftNames(e.List)))]),i("div",{staticClass:"required"},[t._v(t._s(e.IsRequired?"必选":""))]),i("div",{staticClass:"select"},[e.IsRequired?[i("span",[t._v("初始选中：")]),i("span",{attrs:{title:t.getDefaultCraftName(e.DefaultCraft)}},[t._v(t._s(t.getDefaultCraftName(e.DefaultCraft)))])]:t._e()],2),i("div",{staticClass:"ctrl"},[i("span",{on:{click:function(i){return t.onSingleCraftSaveClick(e)}}},[i("i"),t._v(" 编辑")]),i("span",{staticClass:"del-btn",on:{click:function(i){return t.onItemRemove(e)}}},[i("i"),t._v(" 删除")])])])})),0):t._e()],1)])}),[],!1,null,null,null)).exports,h={model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},value:{type:Array,default:null}},components:{CommonDialogComp:l.a},data:function(){return{checkList:[]}},computed:{},methods:{onSubmit:function(){this.checkList.find((function(t){return!t.HiddenToCustomer}))?this.$emit("change",this.checkList):this.messageBox.failSingleError("保存失败","不能设置全部工艺均对客户隐藏")},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.checkList=[]},initEditData:function(){this.checkList=JSON.parse(JSON.stringify(this.value))}}},m=(i("7b2c"),Object(c.a)(h,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CommonDialogComp",{staticClass:"mp-erp-comps-pruduct-module-craft-hidden-set-dialog-comp-wrap",attrs:{width:"800px",top:"12vh",title:"设置客户隐藏",visible:t.visible},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},t._l(t.checkList,(function(e){return i("el-checkbox",{key:e.ID,attrs:{title:e.Name},model:{value:e.HiddenToCustomer,callback:function(i){t.$set(e,"HiddenToCustomer",i)},expression:"it.HiddenToCustomer"}},[t._v(t._s(e.Name))])})),1)}),[],!1,null,null,null)).exports,C=(i("13d5"),i("fb6a"),i("d3b7"),i("25f0"),i("6062"),i("3ca3"),i("ddb0"),{model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},value:{type:Array,default:null},usableCraftList:{type:Array,default:null}},components:{CommonDialogComp:l.a},data:function(){return{checkList:[],submitList:[]}},computed:{isIndeterminate:function(){return 0!==this.checkList.length&&this.checkList.length!==this.canSelectList.length},checkAll:{get:function(){return this.checkList.length>0&&this.checkList.length===this.canSelectList.length},set:function(t){this.checkList=t?this.canSelectList.map((function(t){return t.ID})):[]}},selectedIds:function(){return this.submitList&&Array.isArray(this.submitList)&&0!==this.submitList.length?this.submitList.reduce((function(t,e){return[].concat(Object(o.a)(t),Object(o.a)(e.List))}),[]):[]},canSelectList:function(){var t=this;return this.usableCraftList&&0!==this.usableCraftList.lenght?0===this.selectedIds.length?this.usableCraftList:this.usableCraftList.filter((function(e){return!t.selectedIds.includes(e.ID)})):[]}},methods:{onSubmit:function(){if(!(this.canSelectList.length>0&&this.usableCraftList&&this.usableCraftList.length>0))if(this.submitList.find((function(t){return!t.Name})))this.messageBox.failSingleError("保存失败","分组名称必填，请检查");else{var t=this.submitList.map((function(t){return t.Name})),e=Object(o.a)(new Set(t));t.length>e.length?this.messageBox.failSingleError("保存失败","存在重复分组名称，请检查"):this.$emit("change",this.submitList)}},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.checkList=[],this.submitList=[]},initEditData:function(){this.submitList=JSON.parse(JSON.stringify(this.value))},joinGroup:function(){if(0!==this.checkList.length){var t={IsNameHidden:!1,List:this.checkList,ID:"",Name:"",key:Math.random().toString(36).slice(-8)};this.submitList.push(t),this.checkList=[]}},getItemNames:function(t){var e=this;return t&&0!==t.length?t.map((function(t){var i=e.usableCraftList.find((function(e){return e.ID===t}));return i?i.Name:""})).filter((function(t){return t})).join("、"):""},onOptionItemRemove:function(t){this.submitList.splice(t,1)}}}),v=(i("0d59"),Object(c.a)(C,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CommonDialogComp",{staticClass:"mp-erp-comps-pruduct-module-craft-grouping-set-dialog-comp-wrap",attrs:{width:"800px",top:"12vh",title:"设置分组",visible:t.visible,disabled:t.canSelectList.length>0&&t.usableCraftList&&t.usableCraftList.length>0},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[i("el-checkbox",{attrs:{indeterminate:t.isIndeterminate,disabled:0===t.canSelectList.length},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),i("span",{staticClass:"tips-box"},[t._v("（ 需要所有工艺都设置入分组后，才可保存！）")]),t.usableCraftList?i("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.usableCraftList,(function(e){return i("el-checkbox",{key:e.ID,attrs:{label:e.ID,disabled:t.selectedIds.includes(e.ID),title:e.Name}},[t._v(t._s(e.Name))])})),1):t._e(),i("p",{staticClass:"btn"},[i("el-button",{staticClass:"border-blue-btn",attrs:{size:"small",disabled:0===t.checkList.length},on:{click:t.joinGroup}},[t._v("+ 加入分组")])],1),i("section",{staticClass:"table"},[i("header",[i("span",[t._v("名称")]),i("span",[t._v("界面隐藏名称")]),i("span",[t._v("包含工艺")])]),i("main",t._l(t.submitList,(function(e,n){return i("div",{key:e.key||e.ID},[i("el-input",{attrs:{maxlength:"10",size:"small"},model:{value:e.Name,callback:function(i){t.$set(e,"Name","string"==typeof i?i.trim():i)},expression:"it.Name"}}),i("el-checkbox",{model:{value:e.IsNameHidden,callback:function(i){t.$set(e,"IsNameHidden",i)},expression:"it.IsNameHidden"}},[t._v("隐藏")]),i("span",{staticClass:"list-name",attrs:{title:t.getItemNames(e.List)}},[t._v(t._s(t.getItemNames(e.List)))]),i("span",{staticClass:"del-btn",on:{click:function(e){return t.onOptionItemRemove(n)}}},[i("i"),t._v(" 删除")])],1)})),0)])],1)}),[],!1,null,null,null)).exports,b={props:{usableCraftList:{type:Array,default:null},CraftGroupList:{type:Array,default:null}},components:{DisplayHiddenCraftSetDialog:m,DisplayCraftGroupingSetDialog:v},data:function(){return{DisplayHiddenVisible:!1,DisplayGroupingVisible:!1}},computed:{curHiddenCraftData:{get:function(){return this.usableCraftList},set:function(t){this.$emit("setHiddenCraftList",t)}},HiddenCraftTextList:function(){return this.usableCraftList&&0!==this.usableCraftList.length?this.usableCraftList.filter((function(t){return t.HiddenToCustomer})).map((function(t){return t.Name})).join("、"):""},curGroupCraftData:{get:function(){return this.CraftGroupList},set:function(t){this.$emit("setGroupCraftList",t)}}},methods:{getItemNames:function(t){var e=this;return t&&0!==t.length?t.map((function(t){var i=e.usableCraftList.find((function(e){return e.ID===t}));return i?i.Name:""})).filter((function(t){return t})).join("、"):""}}},g=(i("4c44"),Object(c.a)(b,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mp-erp-product-module-craft-set-page-right-content-wrap"},[i("div",{staticClass:"display-hidden"},[i("span",{staticClass:"mp-common-title-wrap is-black"},[t._v("客户界面隐藏")]),i("span",{staticClass:"blue-span is-font-size-13",class:t.usableCraftList&&t.usableCraftList.length>0?"":"disabled",on:{click:function(e){t.DisplayHiddenVisible=!0}}},[t._v("设置隐藏")]),i("span",{staticClass:"hide-text",attrs:{title:t.HiddenCraftTextList}},[t._v(t._s(t.HiddenCraftTextList))])]),i("div",{staticClass:"display-grouping"},[i("p",[i("span",{staticClass:"mp-common-title-wrap is-black"},[t._v("显示分组")]),i("span",{staticClass:"blue-span is-font-size-13",class:t.usableCraftList&&t.usableCraftList.length>0?"":"disabled",on:{click:function(e){t.DisplayGroupingVisible=!0}}},[t._v("设置分组")])]),t._l(t.CraftGroupList,(function(e){return i("div",{key:e.key||e.ID},[i("span",[t._v(t._s(e.Name)+" "),i("i",{class:{"is-success":!e.IsNameHidden}},[t._v("（"+t._s(e.IsNameHidden?"隐藏名称":"显示名称")+"）")])]),i("span",{staticClass:"list-name",attrs:{title:t.getItemNames(e.List)}},[t._v(t._s(t.getItemNames(e.List)))])])})),t.usableCraftList&&t.usableCraftList.length>0&&t.CraftGroupList&&0===t.CraftGroupList.length?i("div",{staticClass:"empty is-pink"},[t._v(" 显示分组未设置 ！ ")]):t._e()],2),i("DisplayHiddenCraftSetDialog",{attrs:{visible:t.DisplayHiddenVisible},on:{"update:visible":function(e){t.DisplayHiddenVisible=e}},model:{value:t.curHiddenCraftData,callback:function(e){t.curHiddenCraftData=e},expression:"curHiddenCraftData"}}),i("DisplayCraftGroupingSetDialog",{attrs:{visible:t.DisplayGroupingVisible,usableCraftList:t.usableCraftList},on:{"update:visible":function(e){t.DisplayGroupingVisible=e}},model:{value:t.curGroupCraftData,callback:function(e){t.curGroupCraftData=e},expression:"curGroupCraftData"}})],1)}),[],!1,null,null,null)).exports,L={model:{prop:"value",event:"change"},props:{itemData:{type:Object,default:null},value:{type:Array,default:function(){return[]}}},data:function(){return{extend:!0}},computed:{},methods:{change:function(t){this.$emit("change",t)}}},D=(i("710e"),Object(c.a)(L,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.itemData?i("div",{staticClass:"mp-erp-comps-pruduct-module-usable-craft-select-dialog-comp-content-item-wrap"},[i("div",{staticClass:"header"},[i("span",{staticClass:"mp-common-title-wrap"},[t._v(t._s(t.itemData.ClassName))]),i("div",{staticClass:"extend-box",on:{click:function(e){t.extend=!t.extend}}},[t.extend?i("span",[t._v("收起")]):i("span",[t._v("展开")]),t.extend?i("i",{staticClass:"el-icon-arrow-up"}):i("i",{staticClass:"el-icon-arrow-down"})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.extend,expression:"extend"}],staticClass:"content"},t._l(t.itemData.children,(function(e){return i("el-checkbox",{key:e.ID,attrs:{value:t.value.includes(e.ID),title:e.Name},on:{change:function(i){return t.change(e)}}},[t._v(" "+t._s(e.Name)+" ")])})),1)]):t._e()}),[],!1,null,null,null)).exports,I={props:{visible:{type:Boolean,default:!1},usableCraftList:{type:Array,default:function(){return[]}}},components:{CommonDialogComp:l.a,CraftSelectFoldItem:D},data:function(){return{allCraftDataList:[],activeName:"0",localCraftList:[]}},computed:Object(a.a)({},Object(s.c)("common",["twoLevelsCraftClassify"]),{CraftLevelData:function(){return this.$utils.getTreeDataFromListAndClassifyData(this.allCraftDataList,this.twoLevelsCraftClassify)},selectedIDs:function(){return this.localCraftList&&0!==this.localCraftList.length?this.localCraftList.map((function(t){return t.ID})):[]},foldItemData:{get:function(){return this.selectedIDs},set:function(t){if(t){var e=t.ID;this.selectedIDs.includes(e)?this.localCraftList=this.localCraftList.filter((function(t){return t.ID!==e})):this.localCraftList.push(t)}}}}),methods:{onSubmit:function(){this.$emit("submit",this.localCraftList)},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.localCraftList=[],this.activeName="0",this.allCraftDataList=[]},getAllCraftDataList:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.allCraftDataList.length>0)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.api.getCraftListData({Page:1,PageSize:1e5,FieldType:2}).catch((function(){}));case 4:(i=e.sent)&&i.data&&1e3===i.data.Status&&(t.allCraftDataList=i.data.Data);case 6:case"end":return e.stop()}}),e)})))()},initEditData:function(){this.$store.dispatch("common/getCraftClassifyData"),this.getAllCraftDataList(),this.localCraftList=JSON.parse(JSON.stringify(this.usableCraftList))}}},x=(i("d7c9"),Object(c.a)(I,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CommonDialogComp",{staticClass:"mp-erp-comps-pruduct-module-usable-craft-set-dialog-comp-wrap",attrs:{width:"800px",top:"8vh",title:"设置可用工艺",visible:t.visible},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[i("el-tabs",{attrs:{type:"card",size:"small"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.CraftLevelData,(function(e,n){return i("el-tab-pane",{key:e.ID,attrs:{label:e.ClassName,name:""+n}},[i("div",{staticClass:"list-content"},t._l(e.children,(function(e){return i("CraftSelectFoldItem",{key:e.ID,attrs:{itemData:e},model:{value:t.foldItemData,callback:function(e){t.foldItemData=e},expression:"foldItemData"}})})),1)])})),1)],1)}),[],!1,null,null,null)).exports,y=i("ede4"),k={name:"ProductCraftSetPage",components:{LRWidthDragAutoChangeComp:r.a,ContentLeft:p,ContentRight:g,UsableCraftSetDialog:x,MaterialSortDialog:y.a},data:function(){return{ProductID:"",PartID:"",ProductName:"",titleType:"",CraftList:[],CraftConditionList:[],CraftGroupList:[],craftVisible:!1,sortVisible:!1}},computed:Object(a.a)({},Object(s.e)("productManage",["ProductManageList","ProductModuleKeyIDList"]),{curProduct:function(){var t=this;return this.ProductID?this.ProductManageList.find((function(e){return e.ID===t.ProductID})):null},curPart:function(){var t=this;return this.PartID&&this.curProduct?this.curProduct.PartList.find((function(e){return e.ID===t.PartID})):null},usableCraftText:function(){return this.CraftList&&0!==this.CraftList.length?this.CraftList.map((function(t){return t.Name})).join("、"):""},SortListData:{get:function(){return this.CraftList&&Array.isArray(this.CraftList)&&0!==this.CraftList.length?this.CraftList.map((function(t){return{ID:t.ID,Name:t.Name}})):[]},set:function(t){t&&0!==t.length&&this.onSortSubmit(t)}},CraftListIDs:function(){return Array.isArray(this.CraftList)&&0!==this.CraftList.length?this.CraftList.map((function(t){return t.ID})):[]}}),methods:{getPositionID:function(){if(this.$route.params){var t=this.$route.params,e=t.ProductID,i=t.PartID,n=t.name,a=t.type;e&&i&&n&&a?(this.ProductID=e,this.PartID="null"!==i?i:"",this.ProductName=n,this.titleType=a,this.getProductOrPartCraftData()):this.onGoBackClick()}else this.onGoBackClick()},getProductOrPartCraftData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["Craft","CraftCondition","CraftDisplayGroup"];return Object(n.a)(regeneratorRuntime.mark((function i(){var n,a,s,r,o,l,u,c,f;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.PartID?t.PartID:t.ProductID,a=t.PartID?t.api.getPartModuleData:t.api.getProductModuleData,s=t.$utils.getIDFromListByNames(e,t.ProductModuleKeyIDList),r={ID:n,List:s},i.next=6,a(r).catch((function(){}));case 6:(o=i.sent)&&o.data&&1e3===o.data.Status&&(l=o.data.Data,u=l.CraftList,c=l.CraftConditionList,f=l.CraftGroupList,e.includes("Craft")&&u&&(t.CraftList=u),e.includes("CraftCondition")&&c&&(t.CraftConditionList=c),e.includes("CraftDisplayGroup")&&f&&(t.CraftGroupList=f));case 8:case"end":return i.stop()}}),i)})))()},onGoBackClick:function(){this.$router.replace("/ProductManageList")},onUsableCraftSetSubmit:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function i(){var n,a,s,r,o,l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.ProductID,a=e.PartID,s=t.map((function(t){return t.ID})),r={ProductID:n,PartID:a,List:s},i.next=5,e.api.getProductCraftUsableSet(r).catch((function(){}));case 5:(o=i.sent)&&o.data&&1e3===o.data.Status&&(l=function(){e.CraftList=t,e.craftVisible=!1,e.handleCraftListChange4CraftConditionList(),e.handleCraftListChange4CraftGroupList()},e.messageBox.successSingle("设置成功",l,l));case 7:case"end":return i.stop()}}),i)})))()},handleCraftListChange4CraftConditionList:function(){var t=this;this.CraftConditionList.forEach((function(e){e.List=e.List.filter((function(e){return t.CraftListIDs.includes(e)}))})),this.CraftConditionList=this.CraftConditionList.filter((function(t){return t.List.length>0}))},handleCraftListChange4CraftGroupList:function(){var t=this;this.CraftGroupList.forEach((function(e){e.List=e.List.filter((function(e){return t.CraftListIDs.includes(e)}))})),this.CraftGroupList=this.CraftGroupList.filter((function(t){return t.List.length>0}))},onSortSubmit:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function i(){var n,a,s,r,o,l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.ProductID,a=e.PartID,s=t.map((function(t){return t.ID})),r={ProductID:n,PartID:a,TypeList:s},i.next=5,e.api.getProductCraftOrder(r).catch((function(){}));case 5:(o=i.sent)&&o.data&&1e3===o.data.Status&&(l=function(){var t=[],i=JSON.parse(JSON.stringify(e.CraftList));s.forEach((function(e){i.forEach((function(n,a){n&&n.ID===e&&(t.push(n),i.splice(a,1,null))}))})),e.CraftList=t,e.sortVisible=!1},e.messageBox.successSingle("保存排序成功",l,l));case 7:case"end":return i.stop()}}),i)})))()},onSingleCraftSaveSubmit:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function i(){var n,s,r,o,l,u,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.ProductID,s=e.PartID,r=Object(a.a)({ProductID:n,PartID:s},t),i.next=4,e.api.getProductCraftConditionSave(r).catch((function(){}));case 4:(o=i.sent)&&o.data&&1e3===o.data.Status&&(l=!!t.ID,u=l?"编辑单选工艺成功":"添加单选工艺成功",c=function(){if(l){var t=e.CraftConditionList.findIndex((function(t){return t.ID===r.ID}));t>-1&&e.CraftConditionList.splice(t,1,r)}else e.CraftConditionList.push(Object(a.a)({},r,{ID:o.data.Data}));e.$refs.oLeft.visible=!1},e.messageBox.successSingle(u,c,c));case 6:case"end":return i.stop()}}),i)})))()},onSingleCraftRemove:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function i(){var n,a,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return");case 2:return n=t.ID,i.next=5,e.api.getProductCraftConditionRemove(n).catch((function(){}));case 5:(a=i.sent)&&a.data&&1e3===a.data.Status&&(s=function(){var t=e.CraftConditionList.findIndex((function(t){return t.ID===n}));t>-1&&e.CraftConditionList.splice(t,1)},e.messageBox.successSingle("删除成功",s,s));case 7:case"end":return i.stop()}}),i)})))()},setHiddenCraftList:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function i(){var n,a,s,r,o,l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t&&0!==t.length){i.next=2;break}return i.abrupt("return");case 2:return n=e.ProductID,a=e.PartID,s=t.filter((function(t){return t.HiddenToCustomer})).map((function(t){return t.ID})),r={ProductID:n,PartID:a,List:s},i.next=7,e.api.getProductCraftSetHidden(r).catch((function(){}));case 7:(o=i.sent)&&o.data&&1e3===o.data.Status&&(l=function(){e.CraftList=t,e.$refs.oRight.DisplayHiddenVisible=!1},e.messageBox.successSingle("设置成功",l,l));case 9:case"end":return i.stop()}}),i)})))()},setGroupCraftList:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function i(){var n,a,s,r,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t&&0!==t.length){i.next=2;break}return i.abrupt("return");case 2:return n=e.ProductID,a=e.PartID,s={ProductID:n,PartID:a,List:t},i.next=6,e.api.getProductCraftSetGroup(s).catch((function(){}));case 6:(r=i.sent)&&r.data&&1e3===r.data.Status&&(o=function(){e.CraftGroupList=t,e.$refs.oRight.DisplayGroupingVisible=!1},e.messageBox.successSingle("设置成功",o,o));case 8:case"end":return i.stop()}}),i)})))()}},mounted:function(){this.getPositionID()}},_=(i("39d8"),Object(c.a)(k,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mp-erp-product-list-page-craft-set-comp-wrap"},[i("header",[i("span",[t._v("当前"+t._s(t.titleType)+"：")]),i("span",[t._v(t._s(t.ProductName))]),i("p",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.craftVisible=!0}}},[t._v("设置可用工艺")]),i("span",{staticClass:"text",attrs:{title:t.usableCraftText}},[t._v(t._s(t.usableCraftText))]),i("span",{staticClass:"blue-span",class:t.CraftList&&t.CraftList.length>0?"":"disabled",on:{click:function(e){t.sortVisible=!0}}},[t._v("设置排序")])],1)]),i("main",[t.curProduct?i("LRWidthDragAutoChangeComp",{attrs:{leftWidth:"50%"},scopedSlots:t._u([{key:"left",fn:function(){return[i("ContentLeft",{ref:"oLeft",attrs:{usableCraftList:t.CraftList,CraftConditionList:t.CraftConditionList},on:{submit:t.onSingleCraftSaveSubmit,remove:t.onSingleCraftRemove}})]},proxy:!0},{key:"right",fn:function(){return[i("ContentRight",{ref:"oRight",attrs:{usableCraftList:t.CraftList,CraftGroupList:t.CraftGroupList},on:{setHiddenCraftList:t.setHiddenCraftList,setGroupCraftList:t.setGroupCraftList}})]},proxy:!0}],null,!1,272721363)}):t._e(),i("UsableCraftSetDialog",{attrs:{usableCraftList:t.CraftList,visible:t.craftVisible},on:{"update:visible":function(e){t.craftVisible=e},submit:t.onUsableCraftSetSubmit}}),i("MaterialSortDialog",{attrs:{title:"可用工艺排序",visible:t.sortVisible},on:{"update:visible":function(e){t.sortVisible=e}},model:{value:t.SortListData,callback:function(e){t.SortListData=e},expression:"SortListData"}})],1),i("footer",[i("el-button",{on:{click:t.onGoBackClick}},[t._v("返回")])],1)])}),[],!1,null,null,null));e.default=_.exports},"7ea3":function(t,e,i){"use strict";var n=i("3a9e");i.n(n).a},"92af":function(t,e,i){},"94d4":function(t,e,i){},"9bf8":function(t,e,i){},ad32:function(t,e,i){"use strict";var n={model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},title:{type:String,default:"提示"},width:{default:"30%"},top:{type:String,default:"15vh"},showSubmit:{type:Boolean,default:!0},submitText:{type:String,default:"保存"},dangerText:{type:String,default:"重新生成"},cancelText:{type:String,default:"取消"},disabled:{type:Boolean,default:!1},showDanger:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},data:function(){return{checkList:[]}},methods:{onCancleClick:function(){this.$emit("cancle")},onSubmitClick:function(t){this.dialogVisible&&("BUTTON"===t.target.nodeName?t.target.blur():"BUTTON"===t.target.parentNode.nodeName&&t.target.parentNode.blur(),this.$emit("submit"))},onDangerClick:function(){this.$emit("danger")},onOpen:function(){this.$emit("open")},onOpened:function(){this.$emit("opened")},onClose:function(){this.$emit("close")},onClosed:function(){this.$emit("closed")}}},a=(i("468e"),i("2877")),s=Object(a.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"mp-img-style-header mp-erp-common-dialog-comp-wrap",attrs:{title:t.title,visible:t.dialogVisible,"close-on-click-modal":!1,width:t.width,top:t.top,modal:!1,"before-close":t.onCancleClick},on:{"update:visible":function(e){t.dialogVisible=e},open:t.onOpen,opened:t.onOpened,close:t.onClose,closed:t.onClosed}},[t._t("default"),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.$slots["foot-tip"]?i("div",[t._t("foot-tip")],2):t._e(),i("p",[t.showSubmit?i("el-button",{attrs:{type:"primary",loading:t.loading,disabled:t.disabled},on:{click:t.onSubmitClick}},[t._v(t._s(t.loading?"加载中":t.submitText))]):t._e(),t.showDanger?i("el-button",{attrs:{type:"danger"},on:{click:t.onDangerClick}},[t._v(t._s(t.dangerText))]):t._e(),i("el-button",{on:{click:t.onCancleClick}},[t._v(t._s(t.cancelText))])],1)])],2)}),[],!1,null,null,null);e.a=s.exports},bb2f:function(t,e,i){var n=i("d039");t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c68d:function(t,e,i){},d270:function(t,e,i){},d7c9:function(t,e,i){"use strict";var n=i("e9a0");i.n(n).a},d93d:function(t,e,i){"use strict";var n=i("d270");i.n(n).a},db44:function(t,e,i){"use strict";var n=i("92af");i.n(n).a},e5ca:function(t,e,i){},e9a0:function(t,e,i){},ede4:function(t,e,i){"use strict";var n=i("2909"),a=i("ad32"),s=i("b76a"),r=i.n(s),o={model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},value:{type:Array,default:function(){return[]}},title:{type:String,default:"一级组合排序"}},components:{CommonDialogComp:a.a,draggable:r.a},data:function(){return{sortList:[]}},methods:{onSubmit:function(){this.$emit("change",this.sortList)},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.sortList=[]},initEditData:function(){this.sortList=Object(n.a)(this.value)}}},l=(i("db44"),i("2877")),u=Object(l.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CommonDialogComp",{staticClass:"mp-erp-comps-pruduct-module-material-sort-dialog-comp-wrap",attrs:{width:"650px",top:"12vh",title:t.title,visible:t.visible},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[i("p",{staticClass:"tips-box"},[i("i",{staticClass:"el-icon-warning"}),t._v(" 注：拖动排序")]),i("draggable",t._b({model:{value:t.sortList,callback:function(e){t.sortList=e},expression:"sortList"}},"draggable",{tag:"ul"},!1),t._l(t.sortList,(function(e){return i("li",{key:e.ID},[t._v(t._s(e.Name))])})),0)],1)}),[],!1,null,null,null);e.a=u.exports},f183:function(t,e,i){var n=i("d012"),a=i("861d"),s=i("5135"),r=i("9bf2").f,o=i("90e3"),l=i("bb2f"),u=o("meta"),c=0,f=Object.isExtensible||function(){return!0},d=function(t){r(t,u,{value:{objectID:"O"+ ++c,weakData:{}}})},p=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,u)){if(!f(t))return"F";if(!e)return"E";d(t)}return t[u].objectID},getWeakData:function(t,e){if(!s(t,u)){if(!f(t))return!0;if(!e)return!1;d(t)}return t[u].weakData},onFreeze:function(t){return l&&p.REQUIRED&&f(t)&&!s(t,u)&&d(t),t}};n[u]=!0}}]);