(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a852ef68"],{"0eb9":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAMAAAAolt3jAAAAqFBMVEUAAAAAAP8A//8zmf8rgP9Jkv9AgP9Alf87if9Hjv9AifZAif9DjPlAi/k+iPlEjvlDi/lAivpCjvpCjPs/jfdDjftBjPtDjvlAi/lCjfpCjftBi/lCjvtCjfpCjfpBjfpCjftBjftBjflCjfpCjfpCjPpCjvpCjfpCjftCjftCjPpCjPpCjfpBjPpBjftCjfpCjftCjPpCjfpCjfpCjfpBjfpCjfpCjfqXXPJcAAAAN3RSTlMAAQEFBgcIDA0SHBwqLC0tLjA2PkFBR1hccHd5fJufqK6wt87X2Njh5OXp7O3u7u/v8PP3+Pr+o2px6wAAAHNJREFUCNdVx8cCwUAARdErYbToRBctugiD9/9/ZmGUnN1hkMTrtzjpwzngo3HySPm5mkxT16CbafMZVf7q33Ub5b9lJWkT1nOuM0nSvOg6lLQb13DtScdLFTh0AMqath5LINxba217UWCyLQEYY4wH4MMLT3UNYgPDWD4AAAAASUVORK5CYII="},"10e2":function(t,e,i){},1130:function(t,e,i){"use strict";var a=i("b8b5");i.n(a).a},1219:function(t,e,i){},1904:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABV0lEQVQ4T6WTMUvDUBDH//eGpn4OawpCJ110SvHpKHTQWRcFBcFPIggKuuisg+BYI+2ki50KQp/t57Dp8E4ufQkxsSnFLEfI3f/u/7sL4Z8P5ev9dtRiRWcEa4yuHst3PxzfMJRPli/NjveUrSkKhOMrgE5c0sjF5Wnka6Orp3MEog8AazOc9Yz21gsC9ddoj5kDhlolcFCGhUFdgv0kou5gy3uMLdTDyRuDNxbhSaD3ga5sxgICCaCjvAAR9mPnjIeiON8K5BSiH0ZDAA4WYNk2h9tLXSmsvXwHilQnIzIy2qvJe1ZgIMMkSdJdPMYWY0a/pjBGe/VUYJYFmUKSct1dj4yFlXDSmUc/z0C28aUrzSnEdtSCol2AGyU3kGj0AOrD8rNcZeESy6ZJus65xMkdwAcuybjo4NK90ZXDUgEhDqZzhu1nfyaCaoD4ItlMuq1Fru+v3B/CMIkRmm5zmAAAAABJRU5ErkJggg=="},3452:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAAAXNSR0IArs4c6QAAAXJJREFUOE+lkj8vQ1Echt/39t7TG0RIxEZi7iARiUUkRCK0VVKsvoDBZBNMvoQNCwN1uhkaSyU1WiwWi0UiVOg95+pPWvUvFTc42zk5z5P394f45+FveDdvJ8Jnt4gMy2/crwRKB5sAkkaeU5huuapJfhbsSUz5ZgYOshAkBOgl0AHgWoQZO63OXgUH0gEPRIq3b9HUUZAQYpdA/3dlisiJTcdH6wKlgwMQvknFJ2t3T5saVCCksw4TVkTuALYTUCD2zaNaxAKfmgUF8dWDOQfQJ4JtcZ2tsNstYZBW6WANhGeSahWkvPfgcwIvV1kiuSLknE2r0pf4+r4L6fab2pubt+MMbbkpgdKBNqEsY9a//GnEnjanpFw0C3LBvMnE96P243tBUk1hA8Q6q38TNKYQBTcm9VGCp4MdAgPGsWMwthIpqMbblOcUhU6u3gP3yA6T1WMCfiTc+CBAGQ5HPlb5UHpUzAyBcCMlVVhjwyKyrdcvhjKlYmuoarIAAAAASUVORK5CYII="},3773:function(t,e,i){"use strict";var a=i("64cb");i.n(a).a},"3a48":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJBRURDM0JEQkI3QjExRUFCRkM4OTA5RkY4QTEzM0VFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJBRURDM0JFQkI3QjExRUFCRkM4OTA5RkY4QTEzM0VFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QkFFREMzQkJCQjdCMTFFQUJGQzg5MDlGRjhBMTMzRUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QkFFREMzQkNCQjdCMTFFQUJGQzg5MDlGRjhBMTMzRUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4rxy6UAAAAy0lEQVR42mJgIAKwbf5pDsQPQTRMjJEITSxA6h4QywLxJyB2++XLfpKJkE1AagcQZ0E18QHxLpA4CwFNu6CKxYE4GoiXQvlLmYnQBAJiQKwHtRkkF8hIhCZksBvoPzcQg4kETW+AuBgjVInQ5AS07TJMANnG2cRqgmsE2rYfSNUD8VNiNIGdCtSkAKTvQxWlAfFkIJbGpwlmoyeULQLEs4A4F4jP4NMEAqAE4I7EB2lOAWowJZQUQRoNgHgVEG8H4p1ATc+JSfgAAQYARRBJE7ECLWIAAAAASUVORK5CYII="},4473:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAMAAAAMs7fIAAAAAXNSR0IArs4c6QAAAGxQTFRFAAAAAKr/GrP/Fb//J8T/IL/vI7j4Jbn2JLv6JLv7I737Jrz4JLv4I7z4I7n4Jrz5Jrz5Jrz3Jb33Jbv4Jbv4Jrv5Jb35Jrz4Jbv6Jbz4Jrv5Jbz6Jbz5Jrz6Jrz5Jrv5Jrz5Jbv5Jbv5Jrz5Q1BNPgAAACN0Uk5TAAMKDA0QJDc4QEJER0hJUFhfYG10eHuVl5mhv9rz9/n6/P0ihtLfAAAAbElEQVQY04XMSRKCQBBE0S+II1gq7cTQqHn/O7qwoSHCkL98UVnc7qEL4JTDuw5V4OQAz9AXRhIgShkAD5ui2C24lvSSdpLWwLbpb5IsWwIcNf0zlr2Zma2ipK0k6fF3NSvyQ88XAKdz7MDPPhz2CxJVCltZAAAAAElFTkSuQmCC"},"509e":function(t,e,i){"use strict";var a=i("5724");i.n(a).a},5724:function(t,e,i){},"58a2":function(t,e,i){"use strict";i.r(e);var a=(i("99af"),i("4de4"),i("7db0"),i("c740"),i("4160"),i("caad"),i("a15b"),i("d81d"),i("a434"),i("b0c0"),i("d3b7"),i("ac1f"),i("6062"),i("2532"),i("3ca3"),i("5319"),i("1276"),i("159b"),i("ddb0"),i("2909")),n=i("3835"),r=(i("96cf"),i("1da1")),s=i("5530"),o=i("2f62"),l=i("17de"),c=i("a9e4"),u=(i("13d5"),i("ad32")),p=i("3eca"),m={props:{Property:{type:Object,default:function(){return{}}},value:{type:String,default:""},Operator:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{OperatorList:function(){var t=["小于","小于等于"];return p.a.filter((function(e){return t.includes(e.Name)}))},LeftOperator:{get:function(){return this.Operator.First},set:function(t){this.$emit("update:operator",Object(s.a)({},this.Operator,{First:t}))}},RightOperator:{get:function(){return this.Operator.Second},set:function(t){this.$emit("update:operator",Object(s.a)({},this.Operator,{Second:t}))}},inpContent:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},f=(i("59a5"),i("2877")),A=Object(f.a)(m,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"mp-erp-comps-price-module-price-table-item-axis-prop-data-number-type-panel-wrap"},[i("li",{staticClass:"operator"},[i("span",{staticClass:"label"},[t._v("区间对比符号：")]),i("span",[t._v("下限")]),i("el-select",{attrs:{size:"mini"},model:{value:t.LeftOperator,callback:function(e){t.LeftOperator=e},expression:"LeftOperator"}},t._l(t.OperatorList,(function(t){return i("el-option",{key:t.ID,attrs:{label:t.label,value:t.ID}})})),1),i("span",[t._v("值")]),i("el-select",{attrs:{size:"mini"},model:{value:t.RightOperator,callback:function(e){t.RightOperator=e},expression:"RightOperator"}},t._l(t.OperatorList,(function(t){return i("el-option",{key:t.ID,attrs:{label:t.label,value:t.ID}})})),1),i("span",[t._v("上限")])],1),i("li",{staticClass:"input"},[i("el-input",{attrs:{size:"small",maxlength:"200"},model:{value:t.inpContent,callback:function(e){t.inpContent=e},expression:"inpContent"}})],1),t._m(0),t._m(1)])}),[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"tip"},[i("div",{staticClass:"tips-box"},[i("span",{staticClass:"l"},[i("i",{staticClass:"el-icon-warning"}),t._v(" 注：")]),i("p",[i("span",[t._v("各段之间以逗号“，”分开，固定数值和区间范围可以混合在一起；")]),i("span",[t._v("区间范围的上下限以空格（全角或半角）分开；")]),i("span",[t._v("-1 表示无限大；")])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"intro"},[i("p",[t._v("例如：")]),i("div",[i("p",[t._v("名片数量输入：10，20，50，50 70，70 100，100 -1")]),i("p",[t._v("对比符号设为：下限 ＜ 值 ≤ 上限")]),i("p",[t._v("则被分解成：10盒，20盒，50盒，50盒 ＜ 数量 ≤ 70盒，70盒 ＜ 数量 ≤ 100盒，100盒 ＜ 数量 ≤ 无穷大")])]),i("div",[i("p",[t._v("名片数量输入：10 50，50 100，200 500，500 -1")]),i("p",[t._v("对比符号设为：下限 ＜ 值 ≤ 上限")]),i("p",[t._v("则被分解成：10 ＜ 数量 ≤ 50盒，50 ＜ 数量 ≤ 100盒， 200 ＜ 数量 ≤ 500盒，500盒 ＜ 数量 ≤ 无穷大")])])])}],!1,null,null,null).exports,h=i("2bd3"),b={props:{Property:{type:Object,default:function(){return{}}},value:{type:Array,default:function(){return[]}},PropType:{type:String,default:""},SizeList:{type:Array,default:function(){return[]}}},components:{SizeAddPanelComp:h.a},data:function(){return{template:null,showSizePanel:!1}},computed:{optionList:function(){return this.Property&&Array.isArray(this.Property.OptionList)?this.Property.OptionList:[]},checkList:{get:function(){return this.value.map((function(t){return t.Value}))},set:function(t){var e=this,i=t.map((function(t){return{ID:e.$utils.getAUUID(),Value:t}}));this.$emit("input",i)}}},methods:{getInputSizeList:function(){return this.$refs.oPanel.onSubmit()}},mounted:function(){var t=this;"groupsize"===this.PropType&&(this.template={ID:"",Name:"",Index:0,HiddenToCustomer:!1,List:[]},this.Property.SizeGroup.ElementList.forEach((function(e){var i={First:e.ID,Second:""};t.template.List.push(i)})),this.showSizePanel=!0)}},d=(i("509e"),Object(f.a)(b,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mp-erp-comps-price-module-price-table-item-axis-prop-data-option-type-panel-wrap"},[i("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.optionList,(function(e){return i("el-checkbox",{key:e.First,attrs:{label:e.First,title:e.Second}},[t._v(t._s(e.Second))])})),1),t.showSizePanel?i("SizeAddPanelComp",{ref:"oPanel",attrs:{canEmpty:"",hiddenName:"",hiddenSort:"",hiddenCustomerSet:"",Elements:t.Property.SizeGroup.ElementList,sizeTemp:t.template,List:t.SizeList}}):t._e()],1)}),[],!1,null,null,null)).exports,v={props:{visible:{type:Boolean,default:!1},saveData:{type:Object,default:null},type:{type:String,default:""}},components:{CommonDialogComp:u.a,NumberTypePropDataSetPanel:A,OptionTypePropDataSetPanel:d},computed:{curAxisName:function(){return"X"===this.type?"横轴":"Y"===this.type?"竖轴":"未知"},PropertyName:function(){if(this.Property){var t=this.Property,e=t.DisplayContent,i=t.Unit,a=e.replace(/\[|\]/g,""),n=i?"（单位：".concat(i,"）"):"";return"".concat(a).concat(n)}return""},curPropType:function(){return this.Property?0===this.Property.ValueType?"number":7===this.Property.FixedType?"groupsize":"option":""}},data:function(){return{title:"设置费用",showPanel:!1,Property:null,SizeList:[],ruleForm:{InputContent:"",Operator:{First:5,Second:6},List:[]}}},methods:{onSubmit:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var i,r,s,o,l,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("groupsize"!==t.curPropType){e.next=5;break}if(i=t.$refs.oSizePanel.getInputSizeList(),Array.isArray(i)){e.next=4;break}return e.abrupt("return");case 4:i.forEach((function(e){t.ruleForm.List.push({ID:t.$utils.getAUUID(),Values:e.List})}));case 5:if("number"===t.curPropType){e.next=11;break}if(0!==t.ruleForm.List.length){e.next=9;break}return t.messageBox.failSingleError("保存失败","请添加内容"),e.abrupt("return");case 9:e.next=56;break;case 11:if(t.ruleForm.InputContent){e.next=14;break}return t.messageBox.failSingleError("保存失败","请添加内容"),e.abrupt("return");case 14:if(r=t.ruleForm.InputContent.split(/,|，/).filter((function(t){return t})).map((function(t){return t.split(" ").filter((function(t){return t}))})),r.find((function(t){return t.length>0}))){e.next=19;break}return t.messageBox.failSingleError("保存失败","请添加内容"),e.abrupt("return");case 19:if(!r.find((function(t){return t.length>2}))){e.next=23;break}return t.messageBox.failSingleError("保存失败","输入内容格式不正确"),e.abrupt("return");case 23:if(!((s=r.map((function(t){return JSON.stringify(t)}))).length>Object(a.a)(new Set(s)).length)){e.next=27;break}return t.messageBox.failSingleError("保存失败","存在重复项"),e.abrupt("return");case 27:if(o=r.reduce((function(t,e){return[].concat(Object(a.a)(t),Object(a.a)(e))}),[]),!o.find((function(e){return!t.$utils.getValueIsOrNotNumber(e)}))){e.next=32;break}return t.messageBox.failSingleError("保存失败","输入内容中存在非数字类型"),e.abrupt("return");case 32:if(!o.find((function(t){return+t<0&&"-1"!==t}))){e.next=36;break}return t.messageBox.failSingleError("保存失败","不能输入负数（-1除外）"),e.abrupt("return");case 36:if(!r.filter((function(t){return 2===t.length})).find((function(t){var e=Object(n.a)(t,2);return e[0]===e[1]}))){e.next=40;break}return t.messageBox.failSingleError("保存失败","同一个项目中前后2个数值不能相同"),e.abrupt("return");case 40:if(!r.filter((function(t){return 1===t.length})).find((function(t){return"-1"===Object(n.a)(t,1)[0]}))){e.next=44;break}return t.messageBox.failSingleError("保存失败","不能单独使用-1设置为一个项目"),e.abrupt("return");case 44:if(l=o[0],c=!1,o.forEach((function(t,e){e>0&&!c&&((+t<+l||"-1"===l)&&"-1"!==t?c=!0:l=t)})),!c){e.next=50;break}return t.messageBox.failSingleError("保存失败","数字排序应按照从小到大顺序排列"),e.abrupt("return");case 50:if(u=null,r.forEach((function(e){c||(u&&(1===u.length?c=e[0]===u[0]&&6===t.ruleForm.Operator.First:e[0]===u[1]&&6===t.ruleForm.Operator.Second&&(c=1===e.length||e.length>1&&6===t.ruleForm.Operator.First)),u=e)})),!c){e.next=55;break}return t.messageBox.failSingleError("保存失败","存在相同数字且导致区间重叠"),e.abrupt("return");case 55:t.ruleForm.List=r.map((function(e){return{ID:t.$utils.getAUUID(),Value:e.join(" ")}}));case 56:t.$emit("submit",t.ruleForm,t.type);case 57:case"end":return e.stop()}}),e)})))()},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.showPanel=!1},initEditData:function(){var t;"X"===this.type&&(t=this.saveData.XAxis,this.title="设置横轴数据"),"Y"===this.type&&(t=this.saveData.YAxis,this.title="设置竖轴数据"),t?(this.Property=t.Property,this.ruleForm.InputContent=t.InputContent,this.ruleForm.Operator=Object(s.a)({},t.Operator),this.ruleForm.List=Array.isArray(t.List)?JSON.parse(JSON.stringify(t.List.filter((function(t){return t.Value})))):[],this.SizeList=Array.isArray(t.List)?JSON.parse(JSON.stringify(t.List.filter((function(t){return!t.Value&&t.Values&&t.Values.length>0})).map((function(t){return{List:t.Values,ID:t.ID}})))):[]):(this.Property=null,this.ruleForm.InputContent="",this.ruleForm.Operator={First:5,Second:6},this.ruleForm.List=[],this.SizeList=[]),this.showPanel=!0}}},D=(i("c3b9"),Object(f.a)(v,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CommonDialogComp",{staticClass:"mp-erp-comps-price-module-price-table-item-axis-prop-data-set-dialog-comp-wrap",attrs:{width:"800px",top:"10vh",title:t.title,visible:t.visible,submitText:"确定"},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[i("p",[i("span",{staticClass:"label"},[t._v("当前设置"+t._s(t.curAxisName))]),i("span",{staticClass:"name"},[t._v(t._s(t.PropertyName))])]),"number"===t.curPropType?i("NumberTypePropDataSetPanel",{attrs:{Operator:t.ruleForm.Operator,Property:t.Property},on:{"update:Operator":function(e){return t.$set(t.ruleForm,"Operator",e)},"update:operator":function(e){return t.$set(t.ruleForm,"Operator",e)}},model:{value:t.ruleForm.InputContent,callback:function(e){t.$set(t.ruleForm,"InputContent",e)},expression:"ruleForm.InputContent"}}):t._e(),("option"===t.curPropType||"groupsize"===t.curPropType)&&t.showPanel&&t.Property?i("OptionTypePropDataSetPanel",{ref:"oSizePanel",attrs:{SizeList:t.SizeList,PropType:t.curPropType,Property:t.Property},model:{value:t.ruleForm.List,callback:function(e){t.$set(t.ruleForm,"List",e)},expression:"ruleForm.List"}}):t._e()],1)}),[],!1,null,null,null)).exports,C=i("bc5c"),g={props:{visible:{type:Boolean,default:!1},saveData:{type:Object,default:null}},components:{CommonDialogComp:u.a,CtrlMenus:C.a},computed:{},data:function(){return{title:"设置表数据",Unit:"",DataList:[]}},methods:{onSubmit:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var i,n,r,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.DataList.length>0)){e.next=15;break}if(!((i=t.DataList.findIndex((function(t){return!t.Name})))>-1)){e.next=5;break}return t.messageBox.failSingleError("保存失败","第".concat(i+1,"行其它数据未填写名称信息")),e.abrupt("return");case 5:if(!((i=t.DataList.findIndex((function(t){return"表数据"===t.Name})))>-1)){e.next=9;break}return t.messageBox.failSingleError("保存失败","第".concat(i+1,"行其它数据中名称不能为表数据")),e.abrupt("return");case 9:if(n=t.DataList.map((function(t){return t.Name})),r=n.length,s=Object(a.a)(new Set(n)).length,!(r>s)){e.next=15;break}return t.messageBox.failSingleError("保存失败","其它数据中存在重复名称，请检查并修改"),e.abrupt("return");case 15:o={Unit:t.Unit,DataList:t.DataList},t.$emit("submit",o);case 17:case"end":return e.stop()}}),e)})))()},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){},initEditData:function(){if(this.Unit="",this.DataList=[],this.saveData){var t=this.saveData,e=t.Unit,i=t.DataList;e&&(this.Unit=e),Array.isArray(i)&&(this.DataList=JSON.parse(JSON.stringify(i)))}},onAddClick:function(){if(!(this.DataList.length>=2)){var t={ID:this.$utils.getAUUID(),Name:"",Unit:""};this.DataList.push(t)}},onRemoveClick:function(t){this.DataList.splice(t,1)}}},I=(i("1130"),Object(f.a)(g,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CommonDialogComp",{staticClass:"mp-erp-comps-price-module-price-table-item-option-data-set-dialog-comp-wrap",attrs:{width:"800px",top:"13vh",title:t.title,visible:t.visible,submitText:"确定"},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[i("div",{staticClass:"form-item"},[i("p",[i("span",{staticClass:"mp-common-title-wrap black"},[t._v("表数据")])]),i("div",{staticClass:"unit"},[i("span",{staticClass:"label"},[t._v("数据单位：")]),i("el-input",{attrs:{size:"small",maxlength:"6","show-word-limit":""},model:{value:t.Unit,callback:function(e){t.Unit="string"==typeof e?e.trim():e},expression:"Unit"}}),i("span",{staticClass:"tips-box"},[i("i",{staticClass:"el-icon-warning"}),t._v(" 注：可为空，仅作备注使用，无实际效用！")])],1)]),i("div",{staticClass:"form-item"},[i("p",[i("span",{staticClass:"mp-common-title-wrap black"},[t._v("其他数据")]),i("span",{staticClass:"blue-span",class:{disabled:t.DataList.length>=2},on:{click:t.onAddClick}},[t._v("+ 添加-行")])]),i("ul",[i("li",{staticClass:"title"},[i("span",[t._v("名称")]),i("span",[t._v("单位")]),i("span",{staticClass:"ctrl"},[t._v("操作")])]),t._l(t.DataList,(function(e,a){return i("li",{key:e.ID},[i("el-input",{attrs:{size:"small",maxlength:"6"},model:{value:e.Name,callback:function(i){t.$set(e,"Name","string"==typeof i?i.trim():i)},expression:"item.Name"}}),i("el-input",{attrs:{size:"small",maxlength:"6"},model:{value:e.Unit,callback:function(i){t.$set(e,"Unit","string"==typeof i?i.trim():i)},expression:"item.Unit"}}),i("CtrlMenus",{staticClass:"ctrl",attrs:{showList:["del"]},on:{remove:function(e){return t.onRemoveClick(a)}}})],1)}))],2)]),i("div",{staticClass:"tips"},[i("p",[t._v("其他数据说明：")]),i("p",[t._v("每张表内部各数据的名称不能为空，不能重复，且名称不能叫“表数据”，公式以此名称来引用该数据")]),i("p",[t._v("单位可为空，仅作备注使用，无实际效用！")]),i("p",{staticClass:"is-bold"},[t._v("最多添加 2 个其他数据！")])])])}),[],!1,null,null,null)).exports,x={props:{tableData:{type:Object,default:function(){return{}}},YAxisList:{type:Array,default:function(){return[]}},XAxisList:{type:Array,default:function(){return[]}}},computed:{XOperator:function(){return this.tableData.XAxis.Operator},YOperator:function(){return this.tableData.YAxis.Operator},RowNameList:function(){var t=this;return this.XAxisList.map((function(e){return t.getItemName(e,t.tableData.XAxis)}))},ColNameList:function(){var t=this;return this.YAxisList.map((function(e){return t.getItemName(e,t.tableData.YAxis)}))},DataList:function(){var t;return Array.isArray(null===(t=this.tableData)||void 0===t?void 0:t.DataList)?this.tableData.DataList:[]},Unit:function(){return this.tableData.Unit}},data:function(){return{labelWidth:80,titleWidth:161}},methods:{getItemName:function(t,e){var i=e.Property,a=e.Operator;if(!i)return"";if(0===i.ValueType){var n=i.Unit,r=t.Value.split(" ");if(1===r.length)return n?"".concat(r[0]).concat(n):r[0];if(2===r.length){var s=r[0],o=n?"".concat(r[1]).concat(n):r[1];"-1"===o&&(s=n?"".concat(r[0]).concat(n):r[0],o="无穷大");var l=this.$utils.getNameFromListByIDs(a.First,p.a,{label:"label",value:"ID"}),c=this.$utils.getNameFromListByIDs(a.Second,p.a,{label:"label",value:"ID"});return"".concat(s," ").concat(l," 值 ").concat(c," ").concat(o)}}else if(7===i.FixedType){var u=i.OptionList,m=i.SizeGroup;if(t.Value&&Array.isArray(u)){var f=u.find((function(e){return e.First===t.Value}));return f?f.Second:t.Value}if(t.Values&&t.Values.length>0){var A=m.ElementList;if(Array.isArray(A)&&A.length===t.Values.length){var h=!0,b=A[0].Unit;return A.forEach((function(t){h&&t.Unit!==b&&(h=!1)})),t.Values.map((function(e,i){var a="";h?i===t.Values.length-1&&(a=b||""):a=A[i].Unit||"";var n=e.Second;if(2===A[i].Type){var r,s,o=null===(r=A[i].OptionAttribute)||void 0===r||null===(s=r.OptionList)||void 0===s?void 0:s.find((function(t){return t.ID===e.Second}));o&&(n=o.Name)}return"".concat(n).concat(a)})).join("×")}}}else{var d=i.OptionList;if(Array.isArray(d)){var v=d.find((function(e){return e.First===t.Value}));return v?v.Second:t.Value}}return"未知标题"},getInputValue:function(t,e,i){var a=this.tableData.PriceList.find((function(i){return!(i.XAxisID!==e&&(i.XAxisID||e)||i.YAxisID!==t&&(i.YAxisID||t))}));if(a&&Array.isArray(a.List)){var n=a.List.find((function(t){return t.First===i||!i&&("00000000-0000-0000-0000-000000000000"===t.First||!t.First)}));if(n)return n.Second}return""},onInputChange:function(t,e,i,a){this.$emit("itemInput",t,e,i,a)},onSubmitClick:function(){this.disabled||this.$emit("submit")},handleWidthChange:function(){var t=this;0!==this.XAxisList.length&&0!==this.YAxisList.length&&(this.labelWidth=0,this.$nextTick((function(){if(t.$refs.oLabelDoms.length>0&&t.$refs.oUlDoms.length>0){var e=Math.max.apply(Math,Object(a.a)(t.$refs.oLabelDoms.map((function(t){return t.offsetWidth})))),i=t.$refs.oUlDoms[0];t.labelWidth=e||80,t.titleWidth=i.offsetWidth||161}})))}},watch:{XAxisList:function(){this.handleWidthChange()},YAxisList:function(){this.handleWidthChange()},Unit:function(){this.handleWidthChange()},DataList:function(){this.handleWidthChange()}},mounted:function(){this.handleWidthChange()}},P=(i("7ee8"),Object(f.a)(x,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mp-erp-comps-price-module-price-table-form-content-wrap mp-scroll-wrap hidden"},[i("header",[i("span",{staticClass:"space",style:"width:"+(t.labelWidth?t.labelWidth+"px":"auto")}),t._l(t.XAxisList,(function(e,a){return i("span",{key:e.ID,style:"width:"+t.titleWidth+"px",attrs:{title:t.RowNameList[a]}},[t._v(t._s(t.RowNameList[a]))])}))],2),i("main",t._l(t.YAxisList,(function(e,a){return i("div",{key:e.ID},[i("span",{ref:"oLabelDoms",refInFor:!0,staticClass:"label",style:"width:"+(t.labelWidth?t.labelWidth+"px":"auto"),attrs:{title:t.ColNameList[a]}},[t._v(t._s(t.ColNameList[a]))]),t._l(t.XAxisList,(function(a){return i("ul",{key:a.ID,ref:"oUlDoms",refInFor:!0},[i("li",[i("span"),t._l(t.DataList,(function(e){return i("span",{key:e.ID},[t._v(t._s(e.Name))])}))],2),i("li",[i("el-input",{attrs:{value:t.getInputValue(e.ID,a.ID,""),maxlength:"9",size:"small"},on:{input:function(i){return t.onInputChange(i,e.ID,a.ID,"")}}}),t._l(t.DataList,(function(n){return i("el-input",{key:n.ID,attrs:{value:t.getInputValue(e.ID,a.ID,n.ID),maxlength:"9",size:"small"},on:{input:function(i){return t.onInputChange(i,e.ID,a.ID,n.ID)}}})}))],2),i("li",[i("span",{staticClass:"unit"},[t._v(t._s(t.Unit||""))]),t._l(t.DataList,(function(e){return i("span",{key:e.ID,staticClass:"unit",attrs:{title:e.Unit||""}},[t._v(t._s(e.Unit||""))])}))],2)])}))],2)})),0)])}),[],!1,null,null,null)).exports,y=i("f820"),S={name:"CraftPriceTableItemSet",components:{FormulaPanelElementSelectDialog:c.a,AxisPropDataSetDialog:D,FormItemOptionDataSetDialog:I,TableContentComp:P,ResultFormulaTableCom:y.a},data:function(){return{productData:null,PriceID:"",PriceName:"",ProductID:"",ProductName:"",CraftPriceID:"",isQuotationPage:!1,PriceTableData:null,AxisPropVisible:!1,loading:!1,curAxisPropSetType:"",selectedElementIDs:[],AxisPropDataSetVisible:!1,FormItemOptionSetVisible:!1,initFetchResultFormula:!0}},computed:Object(s.a)({},Object(o.e)("priceManage",["curSolutionItem","curEditPriceItemData","curPriceItem","curCraftPriceItemData","PriceItemAxisPropertyList"]),{AxisTitle:function(){return"X"===this.curAxisPropSetType?"设置横轴属性":"Y"===this.curAxisPropSetType?"设置竖轴属性":"设置轴属性"},ConstraintContent:function(){if(!this.PriceTableData)return"";var t=this.PriceTableData.Constraint;return t&&Array.isArray(t.ItemList)&&0!==t.ItemList.length?"有条件，尚未编写显示":"条件为空"},XAxisProp:function(){var t,e;return null===(t=this.PriceTableData)||void 0===t||null===(e=t.XAxis)||void 0===e?void 0:e.Property},YAxisProp:function(){var t,e;return null===(t=this.PriceTableData)||void 0===t||null===(e=t.YAxis)||void 0===e?void 0:e.Property},FormDataUnit:function(){var t;return null===(t=this.PriceTableData)||void 0===t?void 0:t.Unit},OtherDataUnit:function(){var t;return null===(t=this.PriceTableData)||void 0===t?void 0:t.DataList.map((function(t){return t.Unit?"".concat(t.Name,"（单位：").concat(t.Unit,"）"):"".concat(t.Name)})).join("、")},XAxisList:function(){return Array.isArray(this.PriceTableData.XAxis.List)&&this.PriceTableData.XAxis.List.length>0?this.PriceTableData.XAxis.List:!this.PriceTableData.XAxis.Property&&Array.isArray(this.PriceTableData.YAxis.List)&&this.PriceTableData.YAxis.List.length>0?[{ID:"",Value:""}]:[]},YAxisList:function(){return Array.isArray(this.PriceTableData.YAxis.List)&&this.PriceTableData.YAxis.List.length>0?this.PriceTableData.YAxis.List:!this.PriceTableData.YAxis.Property&&Array.isArray(this.PriceTableData.XAxis.List)&&this.PriceTableData.XAxis.List.length>0?[{ID:"",Value:""}]:[]},disabled:function(){return 0===this.XAxisList.length||0===this.YAxisList.length},FilterTypeText:function(){return this.PriceTableData&&this.PriceTableData.Constraint?1===this.PriceTableData.Constraint.FilterType?"满足所有":"满足任一":""},fetchFormulaListData:function(){return this.PriceTableData&&this.PriceTableData.ID?{TableID:this.PriceTableData.ID,ProductID:this.ProductID,PriceID:this.PriceID,CraftPriceID:this.CraftPriceID,UseModule:5}:null}}),methods:{getInitDataFromRoutePath:function(){var t=this.$route.params.isQuotation;if(t||this.curPriceItem&&this.curCraftPriceItemData&&this.curCraftPriceItemData.Craft||this.curSolutionItem){var e,i,a=this.curPriceItem,n=a.ID,r=a.Name;this.PriceID=n,this.PriceName=r,this.ProductID=this.$route.params.id,this.ProductName=this.$route.params.name,t&&(this.isQuotationPage=t),t||(this.CraftPriceID=(null===(e=this.curCraftPriceItemData)||void 0===e||null===(i=e.Craft)||void 0===i?void 0:i.CraftPriceID)||"")}else this.onGoBackClick()},FetchInitDatas:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var i,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,Promise.all([t.$store.dispatch("priceManage/getProductCraftData",t.$route.params.id)]);case 3:i=e.sent,a=Object(n.a)(i,1),r=a[0],t.productData=r,t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},onGoBackClick:function(){var t=this.$route.params,e=this.isQuotationPage?"QuotationList":"CompositionCostOfCraft";this.$router.replace({name:e,params:t})},onAxisPropSetupClick:function(t){var e,i;this.selectedElementIDs=[null===(e=this.YAxisProp)||void 0===e?void 0:e.StoredContent,null===(i=this.XAxisProp)||void 0===i?void 0:i.StoredContent].filter((function(t){return t})),this.curAxisPropSetType=t,this.AxisPropVisible=!0},onAxisDataSetupClick:function(t){this.curAxisPropSetType=t,this.AxisPropDataSetVisible=!0},onTableItemDataSetClick:function(){this.FormItemOptionSetVisible=!0},onAxisPropSelect:function(t){var e=this,i=null,a=[];if("X"===this.curAxisPropSetType&&(i=this.PriceTableData.XAxis,a=this.XAxisList),"Y"===this.curAxisPropSetType&&(i=this.PriceTableData.YAxis,a=this.YAxisList),i){var n=!1;if(a.length>0)this.PriceTableData.PriceList.find((function(t){return t.List.find((function(t){return t.Second}))}))&&(n=!0);n?this.messageBox.warnCancelBox("确定更改属性吗","更改属性将会导致表格已填写数据全部清空",(function(){e.handlePropSelectSuccess(t,i)})):this.handlePropSelectSuccess(t,i)}},handlePropSelectSuccess:function(t,e){var i=this,a=e;a.Property=t,a.InputContent="",a.List=[],this.PriceTableData.PriceList=[],t&&0===t.ValueType&&t.Element&&t.Element.NumbericAttribute&&t.Element.NumbericAttribute.GeneralValues&&(a.InputContent=t.Element.NumbericAttribute.GeneralValues.join(","),a.List=t.Element.NumbericAttribute.GeneralValues.map((function(t){return{ID:i.$utils.getAUUID(),Value:"".concat(t)}}))),this.generatePriceListData()},onAxisDataSetSubmit:function(t,e){var i=this,n=t.InputContent,r=t.Operator,o=t.List,l=null,c=[];if("X"===e&&(l=this.PriceTableData.XAxis),"Y"===e&&(l=this.PriceTableData.YAxis),l){l.InputContent=n,l.Operator=Object(s.a)({},r),c=Object(a.a)(l.List);var u=o.map((function(t){var e=t.Value,a=t.Values;return e&&(!a||Array.isArray(a)&&0===a.length)?l.List.find((function(t){return t.Value&&t.Value===e}))||t:l.List.find((function(t){return t.Values&&i.getIsOrNotSameBy2Array(t.Values,a)}))||t}));l.List=Object(a.a)(u)}this.AxisPropDataSetVisible=!1,this.generatePriceListData(e,l,c)},generatePriceListData:function(t,e,i){var n=this.XAxisList,r=this.YAxisList;if(n&&r&&0!==n.length&&0!==r.length){var o=[],l=[{ID:"",Name:""}];Array.isArray(this.PriceTableData.DataList)&&this.PriceTableData.DataList.length>0&&l.push.apply(l,Object(a.a)(this.PriceTableData.DataList));var c=l.map((function(t){return t.ID})),u=Object(a.a)(this.PriceTableData.PriceList);n.forEach((function(p){r.forEach((function(m){var f=u.findIndex((function(t){return!(t.XAxisID!==p.ID&&(t.XAxisID||p.ID)||t.YAxisID!==m.ID&&(t.YAxisID||m.ID))}));if(f<0)if(t&&e&&0===e.Property.ValueType&&u.length>0){var A="X"===t?m:p,h="X"===t?p:m,b="X"===t?"YAxisID":"XAxisID",d="X"===t?"XAxisID":"YAxisID",v=("X"===t?n:r).map((function(t){return t.ID})),D=u.filter((function(t){return t[b]===A.ID&&!v.includes(t[d])})).map((function(t){var e=i.find((function(e){return e.ID===t[d]}));return e?Object(s.a)({},t,{TargetValue:e.Value}):""})).filter((function(t){return t}));if(0===D.length){var C={XAxisID:p.ID,YAxisID:m.ID,List:[]};l.forEach((function(t){C.List.push({First:t.ID,Second:""})})),o.push(C)}else{var g=D.find((function(t){var e=t.TargetValue.split(" "),i=h.Value.split(" ");return(1!==e.length||1!==i.length)&&e.length+i.length>Object(a.a)(new Set([].concat(Object(a.a)(e),Object(a.a)(i)))).length}));if(g){var I={XAxisID:p.ID,YAxisID:m.ID,List:Object(a.a)(g.List)};o.push(I);var x=u.findIndex((function(t){return t.YAxisID===g.YAxisID&&t.XAxisID===g.XAxisID}));x>-1&&u.splice(x,1)}else{var P={XAxisID:p.ID,YAxisID:m.ID,List:[]};l.forEach((function(t){P.List.push({First:t.ID,Second:""})})),o.push(P)}}}else{var y={XAxisID:p.ID,YAxisID:m.ID,List:[]};l.forEach((function(t){y.List.push({First:t.ID,Second:""})})),o.push(y)}else{var S=u[f],L=Object(s.a)({},S,{List:Object(a.a)(S.List.filter((function(t){return c.includes(t.First)||"00000000-0000-0000-0000-000000000000"===t.First})))});l.forEach((function(t){L.List.find((function(e){return e.First===t.ID||!t.ID&&("00000000-0000-0000-0000-000000000000"===e.First||!e.First)}))||L.List.push({First:t.ID,Second:""})})),o.push(L),u.splice(f,1)}}))})),this.PriceTableData.PriceList=o}else this.PriceTableData.PriceList=[]},onFormItemOptionDataSubmit:function(t){var e=t.Unit,i=t.DataList;this.PriceTableData.Unit=e,this.PriceTableData.DataList=i,this.FormItemOptionSetVisible=!1,this.generatePriceListData()},onExcelImportClick:function(){},getIsOrNotSameBy2Array:function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length||0===t.length)return!1;var i=!0;return t.forEach((function(t){if(i){var a=e.find((function(e){return e.First===t.First}));a&&a.Second===t.Second||(i=!1)}})),i},onPriceItemInput:function(t,e,i,a){var n=this.PriceTableData.PriceList.find((function(t){return!(t.XAxisID!==i&&(t.XAxisID||i)||t.YAxisID!==e&&(t.YAxisID||e))}));if(n&&Array.isArray(n.List)){var r=n.List.find((function(t){return t.First===a||!a&&("00000000-0000-0000-0000-000000000000"===t.First||!t.First)}));r&&(r.Second=t)}},onTableSubmit:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var i,a,n,r,s,o,l,c,u,p,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.disabled){e.next=2;break}return e.abrupt("return");case 2:if(t.tableSubmitChecker()){e.next=5;break}return e.abrupt("return");case 5:return i=t.PriceTableData.PriceList.filter((function(t){return t.List.map((function(t){return t.Second})).filter((function(t){return t})).length>0})),a=t.PriceTableData,n=a.ID,r=a.PriceID,s=a.SolutionID,o=a.XAxis,l=a.YAxis,c=a.DataList,u=a.Unit,p={ID:n,PriceID:r,SolutionID:s,XAxis:o,YAxis:l,DataList:c,Unit:u,PriceList:i},e.next=10,t.api.getPriceTableSave(p).catch((function(){}));case 10:(m=e.sent)&&1e3===m.data.Status&&(f=function(){t.$store.commit("priceManage/setPriceTableListItemChange",[p,m.data.Data,t.isQuotationPage,t.ProductID,t.CraftPriceID]),t.PriceTableData.ID||(t.PriceTableData.ID=m.data.Data)},t.messageBox.successSingle("保存成功",f,f));case 12:case"end":return e.stop()}}),e)})))()},tableSubmitChecker:function(){var t=this,e=this.PriceTableData.PriceList.find((function(e){return e.List.find((function(e){return e.Second&&!t.$utils.getValueIsOrNotNumber(e.Second)}))}));return e?(this.messageBox.failSingleError("保存失败","表单项必须为数字值"),!1):(e=this.PriceTableData.PriceList.find((function(t){return t.List.find((function(t){return t.Second&&t.Second<0}))})))?(this.messageBox.failSingleError("保存失败","表单项输入值不能小于0"),!1):!(e=this.PriceTableData.PriceList.find((function(t){var e=t.List.map((function(t){return t.Second})).filter((function(t){return t}));return e.length>0&&e.length<t.List.length})))||(this.messageBox.failSingleError("保存失败","同一表格单元内数据应同时填写或同时不填写"),!1)},onFormulaSetupClick:function(t){this.$store.commit("priceManage/setCurPriceTableItemResultFormulaInfo",[this.PriceTableData,t]);var e=this.$route.params,i=this.isQuotationPage?"QuotationPriceResultFormulaSet":"CraftPriceTableResultFormulaSet";this.$router.replace({name:i,params:e})},onFormulaRemove:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.api.getFormulaRemove(t.ID).catch((function(){}));case 2:(a=i.sent)&&1e3===a.data.Status&&(n=function(){e.$store.commit("priceManage/setResultFormulaItemRemove",[t,!1])},e.messageBox.successSingle("删除成功",n,n));case 4:case"end":return i.stop()}}),i)})))()}},created:function(){var t,e,i=JSON.parse(JSON.stringify(this.curEditPriceItemData))||{ID:"",PriceID:null===(t=this.curPriceItem)||void 0===t?void 0:t.ID,SolutionID:null===(e=this.curSolutionItem)||void 0===e?void 0:e.ID};this.PriceTableData=new l.a(i),this.generatePriceListData(),this.getInitDataFromRoutePath(),this.fetchFormulaListData||(this.initFetchResultFormula=!1)}},L=(i("6279"),Object(f.a)(S,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.PriceTableData?i("section",{staticClass:"mp-erp-price-module-price-table-common-set-page-wrap"},[i("header",[i("div",{staticClass:"title-box"},[i("h2",[t._v(t._s(t.$route.params.name))]),i("span",[t._v("价格名称："+t._s(t.curPriceItem?t.curPriceItem.Name:""))]),!t.isQuotationPage&&t.curCraftPriceItemData?i("span",[t._v("设置工艺："+t._s(t.curCraftPriceItemData.Craft.Name))]):t._e()]),i("div",{staticClass:"import"},[i("span",{staticClass:"mp-common-title-wrap black f-15"},[t._v(t._s(t.curSolutionItem.ShowName))]),i("div",[i("span",{staticClass:"blue-span",on:{click:t.onExcelImportClick}},[t._v("导入表")]),i("el-tooltip",{attrs:{effect:"light","popper-class":"common-property-condition-text-tips-box",placement:"bottom-start","visible-arrow":!1}},[i("div",{attrs:{slot:"content"},slot:"content"},[Array.isArray(t.PriceTableData._ConditionText)?[i("p",{staticClass:"if-box"},[i("span",{staticClass:"is-origin"},[t._v("如果")]),t._v(" "+t._s(t.FilterTypeText)+"：")]),t._l(t.PriceTableData._ConditionText,(function(e,a){return i("p",{key:e.name+"tips"+a},[a>0?i("span",{staticClass:"type"},[t._v(t._s(1===t.PriceTableData.Constraint.FilterType?"且":"或"))]):t._e(),i("span",{staticClass:"name"},[t._v(t._s(e.name))]),i("span",{staticClass:"is-origin"},[t._v(t._s(e.operator))]),i("span",{staticClass:"val"},[t._v(t._s(e.val))]),a===t.PriceTableData._ConditionText.length-1?i("span",{staticStyle:{"margin-left":"2px"}},[t._v(" 。")]):i("span",{staticStyle:{"margin-left":"2px"}},[t._v("；")])])}))]:i("p",[t._v(t._s(t.PriceTableData._ConditionText))]),i("p",[t._v("时使用此表")])],2),i("div",{staticClass:"common-property-condition-text-content-box condition"},[Array.isArray(t.PriceTableData._ConditionText)?[i("p",{staticClass:"if-box"},[i("span",{staticClass:"is-origin"},[t._v("如果")]),t._v(" "+t._s(t.FilterTypeText))]),t._l(t.PriceTableData._ConditionText,(function(e,a){return i("p",{key:e.name+"content"+a},[a>0?i("span",{staticClass:"type"},[t._v(t._s(1===t.PriceTableData.Constraint.FilterType?"且":"或"))]):t._e(),i("span",[t._v(t._s(e.name))]),i("span",[t._v(t._s(e.operator))]),i("span",[t._v(t._s(e.val))])])}))]:i("p",[t._v(t._s(t.PriceTableData._ConditionText))]),i("p",[t._v("时使用此表")])],2)])],1)]),i("div",{staticClass:"setup"},[i("ul",{staticClass:"l"},[i("li",[i("span",{staticClass:"label"},[t._v("横轴：")]),i("span",{staticClass:"blue-span",class:{disabled:t.loading},on:{click:function(e){return t.onAxisPropSetupClick("X")}}},[t._v("设置")]),i("span",{staticClass:"content"},[t._v(t._s(t.XAxisProp?t.XAxisProp.DisplayContent.replace(/\[|\]/g,""):"未设置"))]),i("span",{staticClass:"blue-span",class:{disabled:!t.XAxisProp},on:{click:function(e){return t.onAxisDataSetupClick("X")}}},[t._v("设置数据")]),i("el-checkbox",{attrs:{disabled:!t.XAxisProp||0!==t.XAxisProp.ValueType||t.PriceTableData.YAxis.IsCumsum},model:{value:t.PriceTableData.XAxis.IsCumsum,callback:function(e){t.$set(t.PriceTableData.XAxis,"IsCumsum",e)},expression:"PriceTableData.XAxis.IsCumsum"}},[t._v("分段累加")])],1),i("li",[i("span",{staticClass:"label"},[t._v("竖轴：")]),i("span",{staticClass:"blue-span",class:{disabled:t.loading},on:{click:function(e){return t.onAxisPropSetupClick("Y")}}},[t._v("设置")]),i("span",{staticClass:"content"},[t._v(t._s(t.YAxisProp?t.YAxisProp.DisplayContent.replace(/\[|\]/g,""):"未设置"))]),i("span",{staticClass:"blue-span",class:{disabled:!t.YAxisProp},on:{click:function(e){return t.onAxisDataSetupClick("Y")}}},[t._v("设置数据")]),i("el-checkbox",{attrs:{disabled:!t.YAxisProp||0!==t.YAxisProp.ValueType||t.PriceTableData.XAxis.IsCumsum},model:{value:t.PriceTableData.YAxis.IsCumsum,callback:function(e){t.$set(t.PriceTableData.YAxis,"IsCumsum",e)},expression:"PriceTableData.YAxis.IsCumsum"}},[t._v("分段累加")])],1)]),i("div",{staticClass:"r"},[i("span",{staticClass:"label"},[t._v("数据：")]),i("span",{staticClass:"blue-span",on:{click:t.onTableItemDataSetClick}},[t._v("设置")]),i("div",[i("p",[t._v("数据单位："+t._s(t.FormDataUnit||"无"))]),i("p",[t._v("其他数据："+t._s(t.OtherDataUnit||"未设置"))])])])])]),i("main",[i("FormulaPanelElementSelectDialog",{attrs:{visible:t.AxisPropVisible,selectedElementIDs:t.selectedElementIDs,list:t.PriceItemAxisPropertyList,title:t.AxisTitle,freeText:"不限",showConstant:""},on:{"update:visible":function(e){t.AxisPropVisible=e},submit:t.onAxisPropSelect}}),i("AxisPropDataSetDialog",{attrs:{visible:t.AxisPropDataSetVisible,saveData:t.PriceTableData,type:t.curAxisPropSetType},on:{"update:visible":function(e){t.AxisPropDataSetVisible=e},submit:t.onAxisDataSetSubmit}}),i("FormItemOptionDataSetDialog",{attrs:{visible:t.FormItemOptionSetVisible,saveData:t.PriceTableData},on:{"update:visible":function(e){t.FormItemOptionSetVisible=e},submit:t.onFormItemOptionDataSubmit}}),t.PriceTableData?i("TableContentComp",{attrs:{tableData:t.PriceTableData,XAxisList:t.XAxisList,YAxisList:t.YAxisList},on:{itemInput:t.onPriceItemInput}}):t._e(),i("p",{staticClass:"submit"},[i("el-button",{staticClass:"blue-full-color-btn-styles is-blue-button",attrs:{type:"primary",size:"small",disabled:t.disabled},on:{click:t.onTableSubmit}},[t._v("保存表数据")])],1),t.PriceTableData&&t.PriceTableData.ID?i("ResultFormulaTableCom",{attrs:{fetchFormulaListData:t.fetchFormulaListData,initFetch:t.initFetchResultFormula},on:{setup:t.onFormulaSetupClick,remove:t.onFormulaRemove}}):t._e()],1),i("footer",[i("el-button",{on:{click:t.onGoBackClick}},[i("i",{staticClass:"el-icon-d-arrow-left"}),t._v(" 返回")])],1)]):t._e()}),[],!1,null,null,null));e.default=L.exports},"59a5":function(t,e,i){"use strict";var a=i("85a7");i.n(a).a},6279:function(t,e,i){"use strict";var a=i("1219");i.n(a).a},"64cb":function(t,e,i){},"6e30":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAYAAAAiYZ4HAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkY3NDlERTgxNzdEMTExRUFCREM5RjNGQzRGRkFBQ0U4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkY3NDlERTgyNzdEMTExRUFCREM5RjNGQzRGRkFBQ0U4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Rjc0OURFN0Y3N0QxMTFFQUJEQzlGM0ZDNEZGQUFDRTgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Rjc0OURFODA3N0QxMTFFQUJEQzlGM0ZDNEZGQUFDRTgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7W2NX3AAACRUlEQVR42mxSS2tTQRQ+Z2buKze1MSWpfWB9IAUFFy5EEAT3/gH/gktBxYVb/4GK2I0WYkFw7cqtuOrChRJqMJioTXLbYtPcx9yZ45kkS4cL98zcb873OBdvdtpwCFW4FnyFTrF+65veeBBjXicASq2fXfR/Pr8afHn/Kb0BDTkCVcEU+qYBu+kmjClqMa6tSX4EtxA2e+VyK7NBeGwX4ILXBVWSXDuy8aMRLVZCzNc8sB8s4MChPTRhTkHQLs/uKLIHKfkvcbk9tiMbYygIiHUg0rQ1M/GDMGMiyKyAupwA1tr53SVx3GUmOUP9b/FNRJuRfwpv/9iNvutzTyTYCn+w3NMyQsyR05q7CA0qX5HJMzU0jYd9U3vsoUPRVAx7gJLfvtuzHE0CSr4Vol5VEwr7Vb5fw5P7LLaXgr8VYf6U0+smdvGFD+W9WGTqtz39piDVER6YgeEOVZy0YszecT05I5JXV4K9HZY4ZtDbCItt506BORA+FkMnRGJ5XaEG1ioR6DyfKUNSucROKLjsMAKpJwSYERfAGTcNuxCcrfNgXY2z0AzIBuKUYSD4cMgJQUZRoyRvPgeYA3l4bN8H3XRMHEoiAiyOXPwKymaEmcvFKjQTPi95QwJdsrDgMBJNolgvdzE8lOCSZDk+FLRvliq6kCpAjZoUjCHckFM+GKnMRm72e3+pcie1QcrywoGpff5j6pr/rbAElRY2DjnqMU/IiHX1C1bU/ms2at1suI9maulhybXUbD90ETTF4daqSOCfAAMArfYZ68CyjZgAAAAASUVORK5CYII="},"7ee8":function(t,e,i){"use strict";var a=i("ecfd");i.n(a).a},"855c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAQCAMAAAAs2N9uAAAAAXNSR0IArs4c6QAAAThQTFRFAAAAAAD/AID/Var/QID/SZL/QID/OY7/M5n/Lov/RovoRov/RIj/QI//PJb/OY7xOY7/PYb/Oov/Q5D/QIr0PY//QIf3RI/4Qor4QIz/QI36P4v7Q4/7Qo37QIz7Qoz7Qov3QY37QYz7QIr4QI38P4v8QY78QIz8QYz8QY38Qo35QI38Q478Qoz5QI76Qoz6Qo36QYz6QI36QY76QI36Q436Qo36QY37QI34Qo37QY35QYz5Qoz6Qoz6QY36Qoz6Qo36QYz6QYz5QY35QY36Qo37Qo37QY37Qo37Qo36Qoz6Qo77QY36Qoz7QY36Qo36QYz6QY36Qoz6Qo35Qoz6Qoz7Qo35Qo37QY36Qo36Qo37Qo37Qoz6Qo36QY36Qo36Qo36Qo36Qoz6Qo36QY36Qo36QY36Qo36uDprygAAAGd0Uk5TAAECAwQHCAkKCwsLDxAREhIVFhcYGSAiIyg4OTk6PD5CQ0dITE1PUFJTVVdYWWNkZWZnamtrcHJ0iImKjJCRl5udqKioqq+wsbq9vcPGy8zP09jZ2uPk6Orr6+/w8PLz9PX3+fr6/noFHYEAAADHSURBVBgZBcEFQgIAEACwqdiN2N3d3R0oAnYH1v3/B25A3046c7RUD0D7ZcTj3U+8rwB0vH1vtlI5eR17QPLhpQsoO4lVsBtDRvZLDB4rvfpsRHXhnObbg4HCLNOxVkV/zFHb+/y30ZIY/4qbjwkz0cNpRESM1mQjsjVmoofy1EIu1VSkNp9voD/mOYuIiDESCVQXLqhILeRSTcUAuzGMzm0AJB9eu4FEEUDH2/dWG5VTN+sA2i8jnu5/430ZAH076czhYh3wDwXDJi2g2fGvAAAAAElFTkSuQmCC"},"85a7":function(t,e,i){},"8c7b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAABFElEQVQ4T72TsUoDQRCGv39OL1FQxMIqXSABsbFQ1AfIk4gIqXwB0ScQweewsxAClmKnpWgjBts0IonxdmQDWlxyyWHhVruzs9/s/vOvyI1GZ3AKHOfjE9eiq3FA/wDXEVaM8OCrktZihurXgw0Sr5WqCFhmvWE6/5Bmnz2gqkZn0AcqZQEx74u0mTC8E74SAV5w+MWhJkjy+x60iXEzFRCwPSOcA1t/A3i2K82dCd/5J4DrIlO4+qnmXrm17KNOYssxZqYFd10KqhM1cNHF9fwLwNuG2g7ro37ji8B2nJcTcaYG4RDZUmEbwwzAUyu9H92s0AceTpDtA2MujU+YDZhizRyg/woq/ReAd4W0+djSW6zxDTChl/pgNivTAAAAAElFTkSuQmCC"},b8b5:function(t,e,i){},bc5c:function(t,e,i){"use strict";var a={props:{canEdit:{type:Boolean,default:!0},canRemove:{type:Boolean,default:!0},canCopy:{type:Boolean,default:!0},canSelect:{type:Boolean,default:!0},canSetupCost:{type:Boolean,default:!0},canAllCost:{type:Boolean,default:!0},showList:{type:Array,default:function(){return["edit","del"]}},setupCostText:{type:String,default:"设置费用组成"},canExport:{type:Boolean,default:!0},exportText:{type:String,default:"导出表"},canWrite:{type:Boolean,default:!0},writeText:{type:String,default:"填写表数据"}},methods:{onEditClick:function(){this.canEdit&&this.$emit("edit")},onRemoveClick:function(){this.canRemove&&this.$emit("remove")},onCopyClick:function(){this.canCopy&&this.$emit("copy")},onSelectClick:function(){this.canSelect&&this.$emit("select")},onAllCostClick:function(){this.canAllCost&&this.$emit("allCost")},onSetupCostClick:function(){this.canSetupCost&&this.$emit("setup")},onExportClick:function(){this.canExport&&this.$emit("export")},onWriteClick:function(){this.canWrite&&this.$emit("write")}}},n=(i("fe9a"),i("2877")),r=Object(n.a)(a,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ctrl-menus-container"},[t.showList.includes("copy")?a("span",{class:t.canCopy?"":"disabled",on:{click:t.onCopyClick}},[a("img",{attrs:{src:i("8c7b"),alt:""}}),a("i",[t._v("拷贝")])]):t._e(),t.showList.includes("select")?a("span",{class:t.canSelect?"":"disabled",on:{click:t.onSelectClick}},[a("img",{attrs:{src:i("0eb9"),alt:""}}),a("i",[t._v("选择")])]):t._e(),t.showList.includes("setup")?a("span",{class:t.canSetupCost?"":"disabled",on:{click:t.onSetupCostClick}},[a("img",{attrs:{src:i("1904"),alt:""}}),a("i",[t._v(t._s(t.setupCostText))])]):t._e(),t.showList.includes("allCost")?a("span",{class:t.canAllCost?"":"disabled",on:{click:t.onAllCostClick}},[a("img",{attrs:{src:i("855c"),alt:""}}),a("i",[t._v("总费用")])]):t._e(),t.showList.includes("write")?a("span",{class:t.canWrite?"":"disabled",on:{click:t.onWriteClick}},[a("img",{attrs:{src:i("4473"),alt:""}}),a("i",[t._v(t._s(t.writeText))])]):t._e(),t.showList.includes("export")?a("span",{class:t.canExport?"":"disabled",on:{click:t.onExportClick}},[a("img",{attrs:{src:i("3452"),alt:""}}),a("i",[t._v(t._s(t.exportText))])]):t._e(),t.showList.includes("edit")?a("span",{class:t.canEdit?"":"disabled",on:{click:t.onEditClick}},[a("img",{attrs:{src:i("3a48"),alt:""}}),a("i",[t._v("编辑")])]):t._e(),t.showList.includes("del")?a("span",{class:t.canRemove?"":"disabled",on:{click:t.onRemoveClick}},[a("img",{attrs:{src:i("6e30"),alt:""}}),a("i",[t._v("删除")])]):t._e()])}),[],!1,null,null,null);e.a=r.exports},c3b9:function(t,e,i){"use strict";var a=i("f726");i.n(a).a},ecfd:function(t,e,i){},f726:function(t,e,i){},f820:function(t,e,i){"use strict";var a=(i("d81d"),i("96cf"),i("1da1")),n=i("3835"),r=i("5530"),s=i("2f62"),o=i("bc5c"),l=i("3eca"),c={props:{dataList:{type:Array,default:function(){return[]}},initFetch:{type:Boolean,default:!0},fetchFormulaListData:{type:Object,default:null},title:{type:String,default:"结果公式列表"},hiddenTip:{type:Boolean,default:!1}},components:{CtrlMenus:o.a},computed:Object(r.a)({},Object(s.e)("priceManage",["ResultFormulaList","PriceItemPropertyList"]),{localTableData:function(){var t=this;return this.ResultFormulaList&&Array.isArray(this.ResultFormulaList)&&0!==this.ResultFormulaList.length?this.ResultFormulaList.map((function(e){return Object(r.a)({},e,{FilterTypeText:e.Constraint?1===e.Constraint.FilterType?"满足所有":"满足任一":"",result:t.getShowResult(e)})})).map((function(e){if(!e.Constraint)return Object(r.a)({},e,{_ConditionText:"无"});var i=l.d.getConstraintAndTextByImperfectConstraint(e.Constraint,t.PriceItemPropertyList),a=Object(n.a)(i,2),s=a[0],o=a[1];return Object(r.a)({},e,{Constraint:s,_ConditionText:o})})):[]}}),data:function(){return{loading:!1}},methods:{onSetupClick:function(t){this.$emit("setup",t)},onRemoveClick:function(t){var e=this;this.messageBox.warnCancelNullMsg("确定删除该条公式吗?",(function(){e.$emit("remove",t)}))},getShowResult:function(t){return[t.Content||"未获取到公式"]},getFormulaList:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.fetchFormulaListData){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,e.next=5,t.$store.dispatch("priceManage/getResultFormulaList",t.fetchFormulaListData);case 5:t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.initFetch&&this.getFormulaList()}},u=(i("3773"),i("2877")),p=Object(u.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mp-erp-price-module-price-table-result-formula-table-comp-container"},[i("header",[i("span",{staticClass:"mp-common-title-wrap"},[t._v(t._s(t.title))]),i("span",{staticClass:"blue-span",on:{click:function(e){return t.onSetupClick(null)}}},[t._v("+ 添加公式")]),t.hiddenTip?t._e():i("span",{staticClass:"tips-box"},[i("i",{staticClass:"el-icon-warning"}),t._v(" 注：最终输出结果以下列公式运算结果为准，如果匹配不到任何公式，则此表输出结果为空。 ")])]),i("main",{class:{loading:t.loading}},[t._l(t.localTableData,(function(e){return i("div",{key:e.ID},[i("div",{staticClass:"condition"},[i("el-tooltip",{attrs:{effect:"light","popper-class":"common-property-condition-text-tips-box",placement:"bottom-start","visible-arrow":!1}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("p",{staticClass:"if-box"},[i("span",{staticClass:"is-origin"},[t._v("如果")]),t._v(" "+t._s(e.FilterTypeText)+"：")]),Array.isArray(e._ConditionText)?t._l(e._ConditionText,(function(a,n){return i("p",{key:a.name+"tips"+n},[n>0?i("span",{staticClass:"type"},[t._v(t._s(1===e.Constraint.FilterType?"且":"或"))]):t._e(),i("span",{staticClass:"name"},[t._v(t._s(a.name))]),i("span",{staticClass:"is-origin"},[t._v(t._s(a.operator))]),i("span",{staticClass:"val"},[t._v(t._s(a.val))]),n===e._ConditionText.length-1?i("span",{staticStyle:{"margin-left":"2px"}},[t._v(" 。")]):i("span",{staticStyle:{"margin-left":"2px"}},[t._v("；")])])})):i("p",[t._v(t._s(e._ConditionText))]),i("p",{staticClass:"if-box",staticStyle:{"margin-right":"5px"}},[i("span",{staticClass:"is-origin"},[t._v("则使用此公式")])]),t._l(e.result.filter((function(t){return t})),(function(e,a){return i("p",{key:e+a},[t._v(t._s(e))])}))],2),i("div",{staticClass:"common-property-condition-text-content-box"},[i("p",{staticClass:"if-box"},[i("span",{staticClass:"is-origin"},[t._v("如果")]),t._v(" "+t._s(e.FilterTypeText))]),Array.isArray(e._ConditionText)?t._l(e._ConditionText,(function(a,n){return i("p",{key:a.name+"content"+n},[n>0?i("span",{staticClass:"type"},[t._v(t._s(1===e.Constraint.FilterType?"且":"或"))]):t._e(),i("span",[t._v(t._s(a.name))]),i("span",[t._v(t._s(a.operator))]),i("span",[t._v(t._s(a.val))])])})):i("p",[t._v(t._s(e._ConditionText))]),i("p",{staticClass:"if-box",staticStyle:{"margin-left":"10px","margin-right":"5px"}},[i("span",{staticClass:"is-origin"},[t._v("则使用此公式")])]),i("p",t._l(e.result.filter((function(t){return t})),(function(a,n){return i("em",{key:a+n,staticStyle:{"margin-right":"4px"}},[t._v(t._s(a)+" "),n<e.result.length-1?i("i",{staticStyle:{color:"#33BBD5","font-weight":"700","font-size":"13px"}},[t._v("；")]):t._e()])})),0)],2)])],1),i("span",{staticClass:"priority-box"},[t._v("优先级："+t._s(e.Priority))]),i("CtrlMenus",{on:{edit:function(i){return t.onSetupClick(e)},remove:function(i){return t.onRemoveClick(e)}}})],1)})),0===t.localTableData.length?i("div",[i("span",{staticStyle:{"margin-left":"25px",color:"#a2a2a2"}},[t._v("暂无数据")])]):t._e()],2)])}),[],!1,null,null,null);e.a=p.exports},fe9a:function(t,e,i){"use strict";var a=i("10e2");i.n(a).a}}]);