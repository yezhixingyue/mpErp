(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-523c8a40"],{2298:function(t,e,a){},"3b2b":function(t,e,a){"use strict";var n=a("f549");a.n(n).a},"3c0c":function(t,e,a){"use strict";var n=a("9d1e");a.n(n).a},"468e":function(t,e,a){"use strict";var n=a("4aae");a.n(n).a},4989:function(t,e,a){},"4aae":function(t,e,a){},5731:function(t,e){t.exports="data:image/png;base64,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"},"5c16":function(t,e,a){"use strict";var n=a("2298");a.n(n).a},6062:function(t,e,a){"use strict";var n=a("6d61"),i=a("6566");t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},6566:function(t,e,a){"use strict";var n=a("9bf2").f,i=a("7c73"),r=a("e2cc"),s=a("0366"),o=a("19aa"),c=a("2266"),u=a("7dd0"),l=a("2626"),d=a("83ab"),m=a("f183").fastKey,p=a("69f3"),f=p.set,h=p.getterFor;t.exports={getConstructor:function(t,e,a,u){var l=t((function(t,n){o(t,l,e),f(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),d||(t.size=0),null!=n&&c(n,t[u],t,a)})),p=h(e),v=function(t,e,a){var n,i,r=p(t),s=g(t,e);return s?s.value=a:(r.last=s={index:i=m(e,!0),key:e,value:a,previous:n=r.last,next:void 0,removed:!1},r.first||(r.first=s),n&&(n.next=s),d?r.size++:t.size++,"F"!==i&&(r.index[i]=s)),t},g=function(t,e){var a,n=p(t),i=m(e);if("F"!==i)return n.index[i];for(a=n.first;a;a=a.next)if(a.key==e)return a};return r(l.prototype,{clear:function(){for(var t=p(this),e=t.index,a=t.first;a;)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete e[a.index],a=a.next;t.first=t.last=void 0,d?t.size=0:this.size=0},delete:function(t){var e=this,a=p(e),n=g(e,t);if(n){var i=n.next,r=n.previous;delete a.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),a.first==n&&(a.first=i),a.last==n&&(a.last=r),d?a.size--:e.size--}return!!n},forEach:function(t){for(var e,a=p(this),n=s(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:a.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!g(this,t)}}),r(l.prototype,a?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),d&&n(l.prototype,"size",{get:function(){return p(this).size}}),l},setStrong:function(t,e,a){var n=e+" Iterator",i=h(e),r=h(n);u(t,e,(function(t,e){f(this,{type:n,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=r(this),e=t.kind,a=t.last;a&&a.removed;)a=a.previous;return t.target&&(t.last=a=a?a.next:t.state.first)?"keys"==e?{value:a.key,done:!1}:"values"==e?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),l(e)}}},"6d61":function(t,e,a){"use strict";var n=a("23e7"),i=a("da84"),r=a("94ca"),s=a("6eeb"),o=a("f183"),c=a("2266"),u=a("19aa"),l=a("861d"),d=a("d039"),m=a("1c7e"),p=a("d44e"),f=a("7156");t.exports=function(t,e,a){var h=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),g=h?"set":"add",b=i[t],D=b&&b.prototype,C=b,P={},x=function(t){var e=D[t];s(D,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:function(t,a){return e.call(this,0===t?0:t,a),this})};if(r(t,"function"!=typeof b||!(v||D.forEach&&!d((function(){(new b).entries().next()})))))C=a.getConstructor(e,t,h,g),o.REQUIRED=!0;else if(r(t,!0)){var y=new C,S=y[g](v?{}:-0,1)!=y,k=d((function(){y.has(1)})),O=m((function(t){new b(t)})),w=!v&&d((function(){for(var t=new b,e=5;e--;)t[g](e,e);return!t.has(-0)}));O||((C=e((function(e,a){u(e,C,t);var n=f(new b,e,C);return null!=a&&c(a,n[g],n,h),n}))).prototype=D,D.constructor=C),(k||w)&&(x("delete"),x("has"),h&&x("get")),(w||S)&&x(g),v&&D.clear&&delete D.clear}return P[t]=C,n({global:!0,forced:C!=b},P),p(C,t),v||a.setStrong(C,t,h),C}},7397:function(t,e,a){"use strict";a.r(e);var n=a("5530"),i=a("57d5"),r=a("2f62"),s=(a("99af"),a("4de4"),a("7db0"),a("a15b"),a("d81d"),a("2387")),o=(a("96cf"),a("1da1")),c=a("ad32"),u=a("7775"),l={props:{visible:{type:Boolean,default:!1},curData:{type:Object,default:null},ProductID:{type:String,default:""}},components:{CommonDialogComp:c.a},data:function(){return{title:"添加部件",ruleForm:null,isEdit:!1,rules:{Name:[{required:!0,message:"请输入部件名称",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"},{pattern:u.f,message:"名称仅支持中文、英文(全角/半角)、+-_(全角/半角)、数字(全角/半角)",trigger:"blur"}],UseTimes:[{validator:this.checkUseTimes,trigger:"change"}]}}},methods:{onSubmit:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.ruleForm.validate().catch((function(){}));case 2:e.sent&&t.$emit("submit",t.ruleForm);case 4:case"end":return e.stop()}}),e)})))()},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.ruleForm=null,this.isEdit=!1},initEditData:function(){this.title=this.curData?"编辑部件":"添加部件",this.isEdit=!!this.curData;var t={ID:"",Name:"",UseTimes:{MinValue:"",MaxValue:""},ProductID:this.ProductID};if(this.isEdit){var e=this.curData,a=e.ID,i=e.Name,r=e.UseTimes;t.ID=a,t.Name=i,t.UseTimes=Object(n.a)({},r)}this.ruleForm=t},checkUseTimes:function(t,e,a){if(e){var n=e.MinValue,i=e.MaxValue;if(!n&&0!==n||!i&&0!==i)a(new Error("请填写和补充最大最小值"));else if(this.$utils.isPositiveInteger(n,!1,!0))if(this.$utils.isPositiveInteger(i))if(0!==n||0!==i)if(n<0||i<0)a(new Error("输入值不能为负，最大值不可设为-1"));else if(i<n)a(new Error("最大值不能小于最小值"));else{if(this.isEdit&&this.curData&&this.curData.UseTimes.MinValue>0&&this.curData.UseTimes.MaxValue>1){if(1===i&&1===n)return void a(new Error("1至多次及多至多次均不能改为1至1次"));if(0===n&&i>1)return void a(new Error("1至多次及多至多次均不能改为0至多次"))}a()}else a(new Error("最大最小值不能同时为0"));else a(new Error("最大值应为数字类型且必须为正整数"));else a(new Error("最小值应为数字类型且不小于0"))}else a(new Error("未获取到填写数值"))}}},d=(a("3b2b"),a("2877")),m=Object(d.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CommonDialogComp",{staticClass:"mp-erp-comps-pruduct-module-part-save-dialog-comp-wrap",attrs:{width:"800px",top:"13vh",title:t.title,visible:t.visible},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[t.ruleForm?a("el-form",{ref:"ruleForm",staticClass:"file-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"188px",size:"small"}},[a("el-form-item",{key:"FileName",attrs:{label:"名称：",prop:"Name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入部件名称",maxlength:"20","show-word-limit":""},model:{value:t.ruleForm.Name,callback:function(e){t.$set(t.ruleForm,"Name","string"==typeof e?e.trim():e)},expression:"ruleForm.Name"}})],1),a("el-form-item",{key:"GroupUseTimes",staticClass:"use-times-box",attrs:{label:"使用次数：",prop:"UseTimes"}},[a("el-input",{staticStyle:{width:"110px"},attrs:{disabled:t.isEdit&&1===t.curData.UseTimes.MinValue&&1===t.curData.UseTimes.MaxValue,maxlength:"9"},model:{value:t.ruleForm.UseTimes.MinValue,callback:function(e){t.$set(t.ruleForm.UseTimes,"MinValue",t._n("string"==typeof e?e.trim():e))},expression:"ruleForm.UseTimes.MinValue"}}),a("span",[t._v("≤ 次数 ≤")]),a("el-input",{staticStyle:{width:"110px"},attrs:{disabled:t.isEdit&&1===t.curData.UseTimes.MinValue&&1===t.curData.UseTimes.MaxValue,maxlength:"9"},model:{value:t.ruleForm.UseTimes.MaxValue,callback:function(e){t.$set(t.ruleForm.UseTimes,"MaxValue",t._n("string"==typeof e?e.trim():e))},expression:"ruleForm.UseTimes.MaxValue"}})],1),a("p",{staticClass:"remark"},[t._v("编辑时，需要注意以下几点：")]),a("p",{staticClass:"tips-box"},[a("i",{staticClass:"el-icon-warning"}),t._v(" 使用次数1至1次时：使用次数不能更改，影响很大。")]),a("p",{staticClass:"tips-box"},[a("i",{staticClass:"el-icon-warning"}),t._v(" 1至多次：不能改为1至1次，影响很大。改为0至多次，有些影响。")]),a("p",{staticClass:"tips-box"},[a("i",{staticClass:"el-icon-warning"}),t._v(" 多至多次：不能改为1至1次，影响很大。改为0至多次，有些影响。")])],1):t._e()],1)}),[],!1,null,null,null).exports,p=(a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("3835")),f=a("2909"),h={props:{visible:{type:Boolean,default:!1},curData:{type:Object,default:null},itemData:{type:Object,default:null}},components:{CommonDialogComp:c.a},computed:Object(n.a)({},Object(r.e)("productManage",["ProductElementTypeList"]),{selectedElementIDs:function(){return[]},OptionList:function(){return this.ElementData.List}}),data:function(){return{PartID:"",ElementData:{PositionID:"",List:[]},loading:!1,List:[]}},methods:{onSubmit:function(){var t=this.List.map((function(t){return t.Second})).filter((function(t){return t}));if(t.length>1&&t.length>Object(f.a)(new Set(t)).length)return void this.messageBox.failSingleError("保存失败","元素设置值不能重复!");var e={ProductID:this.itemData.ID,PartID:this.PartID,List:this.List};this.$emit("submit",e)},onCancle:function(){this.$emit("update:visible",!1)},onOpen:function(){this.$nextTick(this.initEditData)},onClosed:function(){this.PartID="",this.List=[]},initEditData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var a,n,i,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.curData&&(t.PartID=t.curData.ID),a=t.PartID||t.itemData.ID,t.ElementData.PositionID=a,e.next=5,t.getDataList();case 5:n=e.sent,i=Object(p.a)(n,2),r=i[0],s=i[1],t.List=t.ProductElementTypeList.filter((function(e){return!e.onlyProduct||!t.curData})).map((function(e){var a="",n=(t.curData?t.curData.TypeList:t.itemData.TypeList).find((function(t){return t.First===e.ID}));n&&(a=n.Second);var i=[];return e.needElement&&i.push.apply(i,Object(f.a)(r)),e.needFormula&&i.push.apply(i,Object(f.a)(s)),{Second:a,First:e.ID,label:e.Name,needFormula:e.needFormula,needElement:e.needElement,OptionList:i}}));case 10:case"end":return e.stop()}}),e)})))()},getDataList:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var a,n,i,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,Promise.all([t.getElementList(),t.getFormulaList()]);case 3:return a=e.sent,n=Object(p.a)(a,2),i=n[0],r=n[1],t.loading=!1,s=i.filter((function(t){return 1===t.Type&&!t.Group})),t.ElementData.List=[].concat(Object(f.a)(s),Object(f.a)(r)),e.abrupt("return",[s,r]);case 11:case"end":return e.stop()}}),e)})))()},getElementList:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.getElementList({positionID:t.ElementData.PositionID},!0).catch((function(){}));case 2:if(!(a=e.sent)||200!==a.status||1e3!==a.data.Status){e.next=5;break}return e.abrupt("return",a.data.Data);case 5:return t.ElementData.PositionID="",e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))()},getFormulaList:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.curData){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,t.api.getFormulaList({ProductID:t.itemData.ID,UseModule:1},!0).catch((function(){}));case 4:if(!(a=e.sent)||200!==a.status||1e3!==a.data.Status){e.next=7;break}return e.abrupt("return",a.data.Data.map((function(t){return Object(n.a)({},t,{Name:"公式：".concat(t.Name),isFormula:!0})})));case 7:return t.ElementData.PositionID="",e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e)})))()}}},v=(a("c06b"),Object(d.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.itemData?a("CommonDialogComp",{staticClass:"mp-erp-comps-pruduct-module-product-element-map-set-dialog-comp-wrap",attrs:{width:"650px",top:"15vh",title:"设置元素",visible:t.visible,loading:t.loading},on:{"update:visible":function(e){t.visible=e},submit:t.onSubmit,cancle:t.onCancle,open:t.onOpen,closed:t.onClosed}},[t.loading?t._e():a("ul",{staticClass:"list"},t._l(t.List,(function(e){return a("li",{key:e.First,staticClass:"item"},[a("span",{staticClass:"label"},[t._v(t._s(e.label)+"：")]),a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.Second,callback:function(a){t.$set(e,"Second",a)},expression:"it.Second"}},t._l(e.OptionList,(function(n){return a("el-option",{key:n.ID||n.Name,attrs:{disabled:t.selectedElementIDs.includes(n.ID)&&e.Second!==n.ID||!e.needFormula&&n.isFormula,label:n.Name,value:n.ID}})})),1)],1)})),0)]):t._e()}),[],!1,null,null,null)).exports,g={props:{itemData:{type:Object,default:null}},components:{TipsSpanButton:s.a,PartSaveDialog:m,ProductMapSetDialog:v},computed:Object(n.a)({},Object(r.c)("common",["twoLevelsProductClassify"]),{},Object(r.e)("productManage",["ProductElementTypeList"]),{helpOrderChecked:{get:function(){return!!this.itemData&&this.itemData.AllowValetOrder},set:function(){this.$store.dispatch("productManage/getOrderStatusChange",["ValetOrderStatus",this.itemData.ID])}},customOrderChecked:{get:function(){return!!this.itemData&&this.itemData.AllowCustomOrder},set:function(){this.$store.dispatch("productManage/getOrderStatusChange",["CustomOrderStatus",this.itemData.ID])}},ClassifyText:function(){if(!this.itemData)return"";var t=this.itemData.ClassifyList;return t&&Array.isArray(t)&&0!==t.length?t.map((function(t){return"".concat(t.FirstLevel.Name,"-").concat(t.SecondLevel.Name)})).join("，"):""},canOrder:function(){var t=this;return!(!this.itemData||!Array.isArray(this.itemData.TypeList)||this.itemData.TypeList.length<this.ProductElementTypeList.length)&&!(this.ProductElementTypeList.map((function(e){var a=e.ID,n=t.itemData.TypeList.find((function(t){return t.First===a}));return n?n.Second:null})).filter((function(t){return!t})).length>0)}}),data:function(){return{extend:!1,visible:!1,curPartData:null,mapVisible:!1}},methods:{onExtendClick:function(){this.extend=!this.extend,this.extend?sessionStorage.setItem("lastExtendProductID",this.itemData.ID):sessionStorage.removeItem("lastExtendProductID")},onHeadrClick:function(){this.$emit("setActive",this.itemData.ID)},onProductSaveClick:function(){this.$store.commit("productManage/setCurEditData",this.itemData),this.$router.push("/ProductDataSave/".concat(Date.now()))},onRemoveClick:function(){var t=this;this.messageBox.warnCancelBox("确定删除该产品吗","产品名称：".concat(this.itemData.Name),(function(){t.$store.dispatch("productManage/getProductRemove",t.itemData.ID)}))},setCommonPathJump:function(t,e){var a=this.itemData,n=a.Name,i="",r=a.ClassifyList.find((function(t){return 1===t.Type}));r&&(i="".concat(r.FirstLevel.Name)),i+="-".concat(n);var s=e?e.ID:this.itemData.ID;i+=e?"：".concat(e.Name):"";var o=e?"部件":"产品";if("ProductElementSet"!==t)if("ProductDisplaySort"!==t){var c=e?e.ID:null;this.$router.push("/".concat(t,"/").concat(this.itemData.ID,"/").concat(c,"/").concat(i,"/").concat(o,"/").concat(Date.now()))}else{var u=e?e.ID:null,l=e?e.MaterialDisplayName:this.itemData.MaterialDisplayName;this.$router.push("/".concat(t,"/").concat(this.itemData.ID,"/").concat(u,"/").concat(i,"/").concat(o,"/").concat(l,"/").concat(Date.now()))}else this.$router.push("/".concat(t,"/").concat(s,"/").concat(i,"/").concat(o,"/").concat(Date.now()))},onElementSaveClick:function(t){this.setCommonPathJump("ProductElementSet",t)},onProductSizeMaterialSetClick:function(t){this.setCommonPathJump("ProductSizeMaterialSet",t)},onProductCraftSetClick:function(t){this.setCommonPathJump("ProductCraftSet",t)},onProductDisplaySortSetClick:function(t){this.setCommonPathJump("ProductDisplaySort",t)},onProductFactorySetClick:function(){this.setCommonPathJump("ProductFactorySet")},onPartSaveClick:function(t){this.curPartData=t,this.visible=!0},onPartSaveSubmit:function(t){var e=this;if(this.itemData.PartList.find((function(e){return e.Name===t.Name&&e.ID!==t.ID})))this.messageBox.failSingleError("保存失败","部件名称不能与其它部件名称重复");else{this.$store.dispatch("productManage/getProductPartSave",[t,function(){e.visible=!1,e.extend=!0}])}},onPartRemoveClick:function(t){var e=this,a=t.ID,n=t.ProductID,i=t.Name;this.messageBox.warnCancelBox("确定删除该部件吗","部件名称：".concat(i),(function(){e.$store.dispatch("productManage/getProductPartRemove",[a,n])}))},onElementMapSetClick:function(t){this.curPartData=t,this.mapVisible=!0},onMapSetSubmit:function(t){var e=this;this.$store.dispatch("productManage/getProductBindElementType",[t,function(){e.mapVisible=!1}])}},mounted:function(){var t=sessionStorage.getItem("lastExtendProductID");t&&t===this.itemData.ID&&(this.extend=!0)}},b=(a("5c16"),Object(d.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.itemData?a("section",{staticClass:"mp-erp-product-manage-table-item-comp-wrap",class:t.extend?"extend":""},[a("header",{on:{click:t.onHeadrClick}},[a("div",{staticClass:"title-box"},[a("span",{staticClass:"name",attrs:{title:t.itemData.Name}},[t._v(t._s(t.itemData.Name))]),a("span",{staticClass:"show-name",attrs:{title:t.itemData.ShowName}},[t._v(t._s(t.itemData.ShowName))])]),a("div",{staticClass:"classify-box"},[a("span",{attrs:{title:t.ClassifyText}},[t._v(t._s(t.ClassifyText))])]),a("div",{staticClass:"order-ctrl",attrs:{title:t.canOrder?"":"先设置 [产品 - 设置元素] 后才可设置下单"}},[a("el-checkbox",{attrs:{disabled:!t.canOrder&&!t.helpOrderChecked},model:{value:t.helpOrderChecked,callback:function(e){t.helpOrderChecked=e},expression:"helpOrderChecked"}},[t._v("可代客下单")]),a("el-checkbox",{attrs:{disabled:!t.canOrder&&!t.customOrderChecked},model:{value:t.customOrderChecked,callback:function(e){t.customOrderChecked=e},expression:"customOrderChecked"}},[t._v("可自助上传")])],1),a("div",{staticClass:"text-menu-box"},[a("TipsSpanButton",{attrs:{text:"界面元素"},nativeOn:{click:function(e){return t.onElementSaveClick(null)}}}),a("TipsSpanButton",{attrs:{text:"尺寸物料"},nativeOn:{click:function(e){return t.onProductSizeMaterialSetClick(null)}}}),a("TipsSpanButton",{attrs:{text:"工艺"},nativeOn:{click:function(e){return t.onProductCraftSetClick(null)}}}),a("TipsSpanButton",{attrs:{text:"设置元素"},nativeOn:{click:function(e){return t.onElementMapSetClick(null)}}}),a("TipsSpanButton",{staticStyle:{"margin-right":"40px"},attrs:{text:"显示顺序"},nativeOn:{click:function(e){return t.onProductDisplaySortSetClick(null)}}}),a("TipsSpanButton",{attrs:{text:"工厂"},nativeOn:{click:function(e){return t.onProductFactorySetClick(e)}}}),a("TipsSpanButton",{attrs:{text:"文件"},nativeOn:{click:function(e){return t.setCommonPathJump("ProductFileList")}}}),a("TipsSpanButton",{attrs:{text:"公式"},nativeOn:{click:function(e){return t.setCommonPathJump("ProductFormulaList")}}}),a("TipsSpanButton",{attrs:{text:"交互"},nativeOn:{click:function(e){return t.setCommonPathJump("ProductInteractionList")}}}),a("TipsSpanButton",{attrs:{text:"文件名设置"},nativeOn:{click:function(e){return t.setCommonPathJump("ProductFileNameSet")}}}),a("TipsSpanButton",{attrs:{text:"库存"},nativeOn:{click:function(e){return t.setCommonPathJump("ProductStockList")}}})],1),a("div",{staticClass:"img-menu-box"},[a("span",{on:{click:function(e){return t.onPartSaveClick(null)}}},[a("i"),t._v("添加部件 ")]),a("span",{on:{click:t.onProductSaveClick}},[a("i"),t._v("编辑 ")]),a("span",{on:{click:t.onRemoveClick}},[a("i"),t._v("删除 ")])]),a("div",{staticClass:"extend-box",class:t.itemData.PartList&&t.itemData.PartList.length>0?"":"disabled",on:{click:t.onExtendClick}},[t.extend?a("span",[t._v("隐藏")]):a("span",[t._v("展开")]),t.extend?a("i",{staticClass:"el-icon-caret-top"}):a("i",{staticClass:"el-icon-caret-bottom"})])]),a("ul",t._l(t.itemData.PartList,(function(e){return a("li",{key:e.PartID},[a("div",[a("span",{attrs:{title:e.Name}},[t._v(t._s(e.Name))])]),a("div",[a("TipsSpanButton",{attrs:{text:"界面元素"},nativeOn:{click:function(a){return t.onElementSaveClick(e)}}}),a("TipsSpanButton",{attrs:{text:"尺寸物料"},nativeOn:{click:function(a){return t.onProductSizeMaterialSetClick(e)}}}),a("TipsSpanButton",{attrs:{text:"工艺"},nativeOn:{click:function(a){return t.onProductCraftSetClick(e)}}}),a("TipsSpanButton",{attrs:{text:"设置元素"},nativeOn:{click:function(a){return t.onElementMapSetClick(e)}}}),a("TipsSpanButton",{attrs:{text:"显示顺序"},nativeOn:{click:function(a){return t.onProductDisplaySortSetClick(e)}}})],1),a("div",[a("TipsSpanButton",{attrs:{text:"编辑"},nativeOn:{click:function(a){return t.onPartSaveClick(e)}}}),a("TipsSpanButton",{attrs:{text:"删除",isRed:""},nativeOn:{click:function(a){return t.onPartRemoveClick(e)}}})],1)])})),0),a("PartSaveDialog",{attrs:{visible:t.visible,curData:t.curPartData,ProductID:t.itemData.ID},on:{"update:visible":function(e){t.visible=e},submit:t.onPartSaveSubmit}}),a("ProductMapSetDialog",{attrs:{visible:t.mapVisible,curData:t.curPartData,itemData:t.itemData},on:{"update:visible":function(e){t.mapVisible=e},submit:t.onMapSetSubmit}})],1):t._e()}),[],!1,null,null,null)).exports,D={props:{listData:{type:Array,default:function(){return[]}}},components:{ProductTableItemComp:b},computed:Object(n.a)({},Object(r.e)("productManage",["isTableDataLoading"])),data:function(){return{activeID:""}},methods:{setActive:function(t){this.activeID=t}}},C=(a("3c0c"),Object(d.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"mp-erp-product-manage-table-comp-wrap"},[n("div",{staticClass:"content"},[t._m(0),t.isTableDataLoading||0!==t.listData.length?t._e():n("div",{staticClass:"empty-box"},[n("img",{attrs:{src:a("5731"),alt:""}}),n("p",{staticClass:"is-font-size-12 is-gray"},[t._v("暂无产品")])]),t._l(t.listData,(function(e){return n("ProductTableItemComp",{key:e.ID,class:{active:t.activeID===e.ID},attrs:{itemData:e},on:{setActive:t.setActive}})}))],2)])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"list-header"},[a("span",{staticClass:"name"},[t._v("内部名称")]),a("span",{staticClass:"show-name"},[t._v("显示名称")]),a("span",{staticClass:"classify"},[t._v("所属分类")]),a("span",{staticClass:"order-ctrl"},[t._v("下单方式")]),a("span",{staticClass:"setup"},[t._v("设置")]),a("span",{staticClass:"operate"},[t._v("操作")])])}],!1,null,null,null)).exports,P=a("8aa1"),x=a("ebb2"),y={name:"ProductManageList",components:{SearchInputComp:i.a,ProductTableComp:C,Count:P.a,NewProductClassifySelectComp:x.a},computed:Object(n.a)({},Object(r.e)("productManage",["condition4ProductManageList","ProductManageList","ProductManageListNumber","isTableDataLoading"]),{},Object(r.e)("common",["OperatorKeyValueList"]),{ProductClass:{get:function(){return this.condition4ProductManageList.ProductClass},set:function(t){this.$store.commit("productManage/setCondition4ProductManageList",[["ProductClass",""],t]),this.getManageProductList()}}}),data:function(){return{}},methods:{getManageProductList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$store.dispatch("productManage/getManageProductList",t)},setObjForListData:function(t){this.$store.commit("productManage/setCondition4ProductManageList",t)},clearCondition:function(){this.$store.commit("productManage/clearCondition4ProductManageList")},goToClassifyPage:function(){this.$router.push("/ProductClassifyManage")},handlePageChange:function(t){this.getManageProductList(t)},onProductSaveClick:function(t){this.$store.commit("productManage/setCurEditData",t),this.$router.push("/ProductDataSave/".concat(Date.now()))}},mounted:function(){this.getManageProductList()}},S=(a("8aa6"),Object(d.a)(y,(function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("section",{staticClass:"mp-erp-product-manage-list-page-wrap"},[n("header",[n("div",{staticClass:"left"},[n("el-button",{staticClass:"mp-common-btn-styles",attrs:{type:"primary"},on:{click:function(t){return e.onProductSaveClick(null)}}},[e._v("添加产品")]),n("el-button",{staticClass:"mp-common-btn-styles",attrs:{type:"primary"},on:{click:e.goToClassifyPage}},[e._v("管理产品分类")]),n("NewProductClassifySelectComp",{model:{value:e.ProductClass,callback:function(t){e.ProductClass=t},expression:"ProductClass"}})],1),n("search-input-comp",{staticClass:"search-section",attrs:{typeList:[["KeyWords",""]],title:"",placeholder:"请输入产品内部名称",requestFunc:e.getManageProductList,changePropsFunc:e.setObjForListData,word:e.condition4ProductManageList.KeyWords,searchWatchKey:e.ProductManageList,resetWords:"清空所有筛选条件"},on:{reset:function(){return t.clearCondition()}}})],1),n("main",[n("ProductTableComp",{attrs:{listData:e.ProductManageList}})],1),n("footer",[n("Count",{attrs:{watchPage:e.condition4ProductManageList.Page,handlePageChange:e.handlePageChange,count:e.ProductManageListNumber,center:"",pageSize:e.condition4ProductManageList.PageSize}})],1)])}),[],!1,null,null,null));e.default=S.exports},"8aa6":function(t,e,a){"use strict";var n=a("9a90");a.n(n).a},"9a90":function(t,e,a){},"9d1e":function(t,e,a){},ad32:function(t,e,a){"use strict";var n={model:{prop:"value",event:"change"},props:{visible:{type:Boolean,default:!1},title:{type:String,default:"提示"},width:{default:"30%"},top:{type:String,default:"15vh"},showSubmit:{type:Boolean,default:!0},submitText:{type:String,default:"保存"},dangerText:{type:String,default:"重新生成"},cancelText:{type:String,default:"取消"},disabled:{type:Boolean,default:!1},showDanger:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},data:function(){return{checkList:[]}},methods:{onCancleClick:function(){this.$emit("cancle")},onSubmitClick:function(t){this.dialogVisible&&("BUTTON"===t.target.nodeName?t.target.blur():"BUTTON"===t.target.parentNode.nodeName&&t.target.parentNode.blur(),this.$emit("submit"))},onDangerClick:function(){this.$emit("danger")},onOpen:function(){this.$emit("open")},onOpened:function(){this.$emit("opened")},onClose:function(){this.$emit("close")},onClosed:function(){this.$emit("closed")}}},i=(a("468e"),a("2877")),r=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"mp-img-style-header mp-erp-common-dialog-comp-wrap",attrs:{title:t.title,visible:t.dialogVisible,"close-on-click-modal":!1,width:t.width,top:t.top,modal:!1,"before-close":t.onCancleClick},on:{"update:visible":function(e){t.dialogVisible=e},open:t.onOpen,opened:t.onOpened,close:t.onClose,closed:t.onClosed}},[t._t("default"),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.$slots["foot-tip"]?a("div",[t._t("foot-tip")],2):t._e(),a("p",[t.showSubmit?a("el-button",{attrs:{type:"primary",loading:t.loading,disabled:t.disabled},on:{click:t.onSubmitClick}},[t._v(t._s(t.loading?"加载中":t.submitText))]):t._e(),t.showDanger?a("el-button",{attrs:{type:"danger"},on:{click:t.onDangerClick}},[t._v(t._s(t.dangerText))]):t._e(),a("el-button",{on:{click:t.onCancleClick}},[t._v(t._s(t.cancelText))])],1)])],2)}),[],!1,null,null,null);e.a=r.exports},bb2f:function(t,e,a){var n=a("d039");t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c06b:function(t,e,a){"use strict";var n=a("4989");a.n(n).a},f183:function(t,e,a){var n=a("d012"),i=a("861d"),r=a("5135"),s=a("9bf2").f,o=a("90e3"),c=a("bb2f"),u=o("meta"),l=0,d=Object.isExtensible||function(){return!0},m=function(t){s(t,u,{value:{objectID:"O"+ ++l,weakData:{}}})},p=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,u)){if(!d(t))return"F";if(!e)return"E";m(t)}return t[u].objectID},getWeakData:function(t,e){if(!r(t,u)){if(!d(t))return!0;if(!e)return!1;m(t)}return t[u].weakData},onFreeze:function(t){return c&&p.REQUIRED&&d(t)&&!r(t,u)&&m(t),t}};n[u]=!0},f549:function(t,e,a){}}]);